(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{pZC5:function(t,e,n){"use strict";n.r(e),n.d(e,"PortfolioModule",(function(){return dd}));var r=n("ofXK"),i=n("tyNb"),o=n("fXoL");let s=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Fb({type:t,selectors:[["app-intro"]],decls:30,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-sm-6"],[1,"col-sm-12"],[1,"text-center"],[1,"btn","btn-primary"],["src","assets/images/sribaabu.jpg","alt","picture-of-sribaabu",1,"img-fluid"]],template:function(t,e){1&t&&(o.Rb(0,"div",0),o.Rb(1,"div",1),o.Rb(2,"div",2),o.Rb(3,"div",1),o.Rb(4,"div",3),o.Rb(5,"div",4),o.Rb(6,"h1"),o.xc(7,"Hello!"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(8,"div",1),o.Rb(9,"div",3),o.Rb(10,"div",4),o.Rb(11,"p"),o.xc(12,"This is Sribaabu."),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(13,"div",1),o.Rb(14,"div",3),o.Rb(15,"div",4),o.Rb(16,"p"),o.xc(17,"Software | Machine Learning Engineer"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(18,"div",1),o.Rb(19,"div",2),o.Rb(20,"div",4),o.Rb(21,"button",5),o.xc(22," Look My Projects "),o.Qb(),o.Qb(),o.Qb(),o.Rb(23,"div",2),o.Rb(24,"div",4),o.Rb(25,"button",5),o.xc(26," See My Resume` "),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(27,"div",2),o.Mb(28,"img",6),o.Qb(),o.Qb(),o.Mb(29,"hr"),o.Qb())},styles:[""]}),t})(),u=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Fb({type:t,selectors:[["app-education"]],decls:32,vars:0,consts:[[1,"timeline"],[1,"direction-r"],[1,"flag-wrapper"],[1,"flag"],[1,"time-wrapper"],[1,"time"],[1,"desc"],[1,"direction-l"]],template:function(t,e){1&t&&(o.Rb(0,"ul",0),o.Rb(1,"li"),o.Rb(2,"div",1),o.Rb(3,"div",2),o.Rb(4,"span",3),o.xc(5,"Freelancer"),o.Qb(),o.Rb(6,"span",4),o.Rb(7,"span",5),o.xc(8,"2013 - present"),o.Qb(),o.Qb(),o.Qb(),o.Rb(9,"div",6),o.xc(10,"My current employment. Way better than the position before!"),o.Qb(),o.Qb(),o.Qb(),o.Rb(11,"li"),o.Rb(12,"div",7),o.Rb(13,"div",2),o.Rb(14,"span",3),o.xc(15,"Apple Inc."),o.Qb(),o.Rb(16,"span",4),o.Rb(17,"span",5),o.xc(18,"2011 - 2013"),o.Qb(),o.Qb(),o.Qb(),o.Rb(19,"div",6),o.xc(20,"My first employer. All the stuff I've learned and projects I've been working on."),o.Qb(),o.Qb(),o.Qb(),o.Rb(21,"li"),o.Rb(22,"div",1),o.Rb(23,"div",2),o.Rb(24,"span",3),o.xc(25,"Harvard University"),o.Qb(),o.Rb(26,"span",4),o.Rb(27,"span",5),o.xc(28,"2008 - 2011"),o.Qb(),o.Qb(),o.Qb(),o.Rb(29,"div",6),o.xc(30,"A description of all the lectures and courses I have taken and my final degree?"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Mb(31,"hr"))},styles:['.timeline[_ngcontent-%COMP%]{position:relative;width:660px;margin:20px auto 0;padding:1em 0;list-style-type:none}.timeline[_ngcontent-%COMP%]:before{position:absolute;left:50%;top:0;content:" ";display:block;width:6px;height:100%;margin-left:-3px;background:#505050;background:linear-gradient(180deg,rgba(80,80,80,0) 0,#505050 8%,#505050 92%,rgba(80,80,80,0));z-index:5}.timeline[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:1em 0}.timeline[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:after{content:"";display:block;height:0;clear:both;visibility:hidden}.direction-l[_ngcontent-%COMP%]{float:left;text-align:right}.direction-l[_ngcontent-%COMP%], .direction-r[_ngcontent-%COMP%]{position:relative;width:300px}.direction-r[_ngcontent-%COMP%]{float:right}.flag-wrapper[_ngcontent-%COMP%]{position:relative;display:inline-block;text-align:center}.flag[_ngcontent-%COMP%]{position:relative;display:inline;background:#f8f8f8;padding:6px 10px;border-radius:5px;font-weight:600;text-align:left}.direction-l[_ngcontent-%COMP%]   .flag[_ngcontent-%COMP%]{box-shadow:-1px 1px 1px rgba(0,0,0,.15),0 0 1px rgba(0,0,0,.15)}.direction-r[_ngcontent-%COMP%]   .flag[_ngcontent-%COMP%]{box-shadow:1px 1px 1px rgba(0,0,0,.15),0 0 1px rgba(0,0,0,.15)}.direction-l[_ngcontent-%COMP%]   .flag[_ngcontent-%COMP%]:before, .direction-r[_ngcontent-%COMP%]   .flag[_ngcontent-%COMP%]:before{position:absolute;top:50%;right:-40px;content:" ";display:block;width:12px;height:12px;margin-top:-10px;background:#fff;border-radius:10px;border:4px solid #ff5050;z-index:10}.direction-r[_ngcontent-%COMP%]   .flag[_ngcontent-%COMP%]:before{left:-40px}.direction-l[_ngcontent-%COMP%]   .flag[_ngcontent-%COMP%]:after{left:100%;border:8px solid transparent;border-left-color:#f8f8f8}.direction-l[_ngcontent-%COMP%]   .flag[_ngcontent-%COMP%]:after, .direction-r[_ngcontent-%COMP%]   .flag[_ngcontent-%COMP%]:after{content:"";position:absolute;top:50%;height:0;width:0;margin-top:-8px;pointer-events:none}.direction-r[_ngcontent-%COMP%]   .flag[_ngcontent-%COMP%]:after{right:100%;border:8px solid transparent;border-right-color:#f8f8f8}.time-wrapper[_ngcontent-%COMP%]{display:inline;line-height:1em;font-size:.66666em;color:#fa5050;vertical-align:middle}.direction-l[_ngcontent-%COMP%]   .time-wrapper[_ngcontent-%COMP%]{float:left}.direction-r[_ngcontent-%COMP%]   .time-wrapper[_ngcontent-%COMP%]{float:right}.time[_ngcontent-%COMP%]{display:inline-block;padding:4px 6px;background:#f8f8f8}.desc[_ngcontent-%COMP%]{margin:1em .75em 0 0;font-size:.77777em;font-style:italic;line-height:1.5em}.direction-r[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{margin:1em 0 0 .75em}@media screen and (max-width:660px){.timeline[_ngcontent-%COMP%]{width:100%;padding:4em 0 1em}.timeline[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:2em 0}.direction-l[_ngcontent-%COMP%], .direction-r[_ngcontent-%COMP%]{float:none;width:100%;text-align:center}.flag-wrapper[_ngcontent-%COMP%]{text-align:center}.flag[_ngcontent-%COMP%]{background:#fff;z-index:15}.direction-l[_ngcontent-%COMP%]   .flag[_ngcontent-%COMP%]:before, .direction-r[_ngcontent-%COMP%]   .flag[_ngcontent-%COMP%]:before{position:absolute;top:-30px;left:50%;content:" ";display:block;width:12px;height:12px;margin-left:-9px;background:#fff;border-radius:10px;border:4px solid #ff5050;z-index:10}.direction-l[_ngcontent-%COMP%]   .flag[_ngcontent-%COMP%]:after, .direction-r[_ngcontent-%COMP%]   .flag[_ngcontent-%COMP%]:after{content:"";position:absolute;left:50%;top:-8px;height:0;width:0;margin-left:-8px;border:8px solid transparent;border-bottom-color:#fff;pointer-events:none}.time-wrapper[_ngcontent-%COMP%]{display:block;position:relative;margin:4px 0 0;z-index:14}.direction-l[_ngcontent-%COMP%]   .time-wrapper[_ngcontent-%COMP%], .direction-r[_ngcontent-%COMP%]   .time-wrapper[_ngcontent-%COMP%]{float:none}.desc[_ngcontent-%COMP%]{position:relative;margin:1em 0 0;padding:1em;background:#f5f5f5;box-shadow:0 0 1px rgba(0,0,0,.2);z-index:15}.direction-l[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%], .direction-r[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{position:relative;margin:1em 1em 0;padding:1em;z-index:15}}']}),t})(),a=(()=>{class t{constructor(t,e){this.elementRef=t,this.renderer=e}ngOnInit(){this.renderer.setStyle(this.elementRef.nativeElement,"transition","top ease 0.4s"),this.renderer.setStyle(this.elementRef.nativeElement,"position","relative"),this.renderer.setStyle(this.elementRef.nativeElement,"top","0")}mouseover(){this.renderer.setStyle(this.elementRef.nativeElement,"top","-0.25em")}mouseleave(){this.renderer.setStyle(this.elementRef.nativeElement,"top","0")}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(o.l),o.Lb(o.D))},t.\u0275dir=o.Gb({type:t,selectors:[["","appHoverEffect",""]],hostBindings:function(t,e){1&t&&o.Zb("mouseenter",(function(){return e.mouseover()}))("mouseleave",(function(){return e.mouseleave()}))}}),t})(),c=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Fb({type:t,selectors:[["app-project"]],decls:25,vars:0,consts:[["appHoverEffect","",1,"project-container"]],template:function(t,e){1&t&&(o.Rb(0,"div",0),o.Rb(1,"h1"),o.xc(2,"hhhjjh"),o.Qb(),o.Rb(3,"h1"),o.xc(4,"hhhjjh"),o.Qb(),o.Rb(5,"h1"),o.xc(6,"hhhjjh"),o.Qb(),o.Rb(7,"h1"),o.xc(8,"hhhjjh"),o.Qb(),o.Rb(9,"h1"),o.xc(10,"hhhjjh"),o.Qb(),o.Rb(11,"h1"),o.xc(12,"hhhjjh"),o.Qb(),o.Rb(13,"h1"),o.xc(14,"hhhjjh"),o.Qb(),o.Rb(15,"h1"),o.xc(16,"hhhjjh"),o.Qb(),o.Rb(17,"h1"),o.xc(18,"hhhjjh"),o.Qb(),o.Rb(19,"h1"),o.xc(20,"hhhjjh"),o.Qb(),o.Rb(21,"h1"),o.xc(22,"hhhjjh"),o.Qb(),o.Rb(23,"h1"),o.xc(24,"hhhjjh"),o.Qb(),o.Qb())},directives:[a],styles:[".project-container[_ngcontent-%COMP%]{width:100%;background-color:#252525;border-radius:.5em}"]}),t})();var h=n("3Pt+"),f=n("D0XW"),l=n("HDdC"),p=n("Cfvw"),d=n("LRne"),v=n("JX91"),y=n("7o/Q");function b(){return t=>t.lift(new g)}class g{call(t,e){return e.subscribe(new m(t))}}class m extends y.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var w=n("lJxs"),_=n("Kqap"),I=n("/uUt"),E=n("pLZG"),O=n("pxpQ"),T=n("spgP"),j=n("Jgta"),x=n("zIRd"),N=n("q/0M"),A=n("qOnz"),S=function(t,e){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function P(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var D,k="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},C=C||{},R=k||self;function M(){}function V(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function L(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var U="closure_uid_"+(1e9*Math.random()>>>0),F=0;function q(t,e,n){return t.call.apply(t.bind,arguments)}function z(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Q(t,e,n){return(Q=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?q:z).apply(null,arguments)}function G(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function B(){return Date.now()}function H(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Y(){this.j=this.j,this.i=this.i}Y.prototype.j=!1,Y.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,U)&&t[U]||(t[U]=++F)}(this)},Y.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var K=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},X=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function W(t){return Array.prototype.concat.apply([],arguments)}function J(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Z(t){return/^[\s\xa0]*$/.test(t)}var $,tt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function et(t,e){return-1!=t.indexOf(e)}function nt(t,e){return t<e?-1:t>e?1:0}t:{var rt=R.navigator;if(rt){var it=rt.userAgent;if(it){$=it;break t}}$=""}function ot(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function st(t){var e={};for(var n in t)e[n]=t[n];return e}var ut="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function at(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<ut.length;o++)n=ut[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ct(t){return ct[" "](t),t}ct[" "]=M;var ht,ft,lt=et($,"Opera"),pt=et($,"Trident")||et($,"MSIE"),dt=et($,"Edge"),vt=dt||pt,yt=et($,"Gecko")&&!(et($.toLowerCase(),"webkit")&&!et($,"Edge"))&&!(et($,"Trident")||et($,"MSIE"))&&!et($,"Edge"),bt=et($.toLowerCase(),"webkit")&&!et($,"Edge");function gt(){var t=R.document;return t?t.documentMode:void 0}t:{var mt="",wt=(ft=$,yt?/rv:([^\);]+)(\)|;)/.exec(ft):dt?/Edge\/([\d\.]+)/.exec(ft):pt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ft):bt?/WebKit\/(\S+)/.exec(ft):lt?/(?:Version)[ \/]?(\S+)/.exec(ft):void 0);if(wt&&(mt=wt?wt[1]:""),pt){var _t=gt();if(null!=_t&&_t>parseFloat(mt)){ht=String(_t);break t}}ht=mt}var It={};function Et(t){return function(t,e){var n=It;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=tt(String(ht)).split("."),r=tt(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",u=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;e=nt(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||nt(0==s[2].length,0==u[2].length)||nt(s[2],u[2]),s=s[3],u=u[3]}while(0==e)}return 0<=e}))}var Ot=R.document&&pt&&(gt()||parseInt(ht,10))||void 0,Tt=!pt||9<=Number(Ot),jt=pt&&!Et("9"),xt=function(){if(!R.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{R.addEventListener("test",M,e),R.removeEventListener("test",M,e)}catch(n){}return t}();function Nt(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function At(t,e){if(Nt.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(yt){t:{try{ct(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:St[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Nt.prototype.b=function(){this.defaultPrevented=!0},H(At,Nt);var St={2:"touch",3:"pen",4:"mouse"};At.prototype.b=function(){At.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,jt)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Pt="closure_listenable_"+(1e6*Math.random()|0),Dt=0;function kt(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Dt,this.Y=this.Z=!1}function Ct(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Rt(t){this.src=t,this.a={},this.b=0}function Mt(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=K(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Ct(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Vt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Rt.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Vt(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new kt(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Lt="closure_lm_"+(1e6*Math.random()|0),Ut={};function Ft(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=Kt(r),e&&e[Pt]?e.wa(n,r,L(i)?!!i.capture:!!i,o):qt(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Ft(t,e[o],n,r,i);return null}return n=Kt(n),t&&t[Pt]?t.va(e,n,L(r)?!!r.capture:!!r,i):qt(t,e,n,!1,r,i)}function qt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=L(i)?!!i.capture:!!i;if(s&&!Tt)return null;var u=Ht(t);if(u||(t[Lt]=u=new Rt(t)),(n=u.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Bt,e=Tt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)xt||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Qt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function zt(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Pt])Mt(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Qt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Ht(e))?(Mt(n,t),0==n.b&&(n.src=null,e[Lt]=null)):Ct(t)}}}function Qt(t){return t in Ut?Ut[t]:Ut[t]="on"+t}function Gt(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&zt(t),n.call(r,e)}function Bt(t,e){if(t.Y)return!0;if(!Tt){if(!e)t:{e=["window","event"];for(var n=R,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Gt(t,e=new At(e,this))}return Gt(t,new At(e,this))}function Ht(t){return(t=t[Lt])instanceof Rt?t:null}var Yt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kt(t){return"function"==typeof t?t:(t[Yt]||(t[Yt]=function(e){return t.handleEvent(e)}),t[Yt])}function Xt(){Y.call(this),this.c=new Rt(this),this.J=this,this.C=null}function Wt(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Nt(e,t);else if(e instanceof Nt)e.target=e.target||t;else{var i=e;at(e=new Nt(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Jt(s,r,!0,e)&&i}if(i=Jt(s=e.a=t,r,!0,e)&&i,i=Jt(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Jt(s=e.a=n[o],r,!1,e)&&i}function Jt(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var u=s.listener,a=s.ca||s.src;s.Z&&Mt(t.c,s),i=!1!==u.call(a,r)&&i}}return i&&!r.defaultPrevented}H(Xt,Y),Xt.prototype[Pt]=!0,(D=Xt.prototype).addEventListener=function(t,e,n,r){Ft(this,t,e,n,r)},D.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=L(i)?!!i.capture:!!i,r=Kt(r),e&&e[Pt]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=Vt(s=e.a[n],r,i,o))&&(Ct(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):e&&(e=Ht(e))&&(n=e.a[n.toString()],e=-1,n&&(e=Vt(n,r,i,o)),(r=-1<e?n[e]:null)&&zt(r))}(this,t,e,n,r)},D.G=function(){if(Xt.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Ct(n[r]);delete e.a[t],e.b--}}this.C=null},D.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},D.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Zt=R.JSON.stringify;function $t(){this.b=this.a=null}var te,ee=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())((function(){return new re}),(function(t){t.reset()}));function ne(){var t=ue,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function re(){this.next=this.b=this.a=null}function ie(t){R.setTimeout((function(){throw t}),0)}function oe(t,e){te||function(){var t=R.Promise.resolve(void 0);te=function(){t.then(ae)}}(),se||(te(),se=!0),ue.add(t,e)}$t.prototype.add=function(t,e){var n=ee.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},re.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},re.prototype.reset=function(){this.next=this.b=this.a=null};var se=!1,ue=new $t;function ae(){for(var t;t=ne();){try{t.a.call(t.b)}catch(n){ie(n)}var e=ee;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}se=!1}function ce(t,e){Xt.call(this),this.b=t||1,this.a=e||R,this.f=Q(this.Za,this),this.g=B()}function he(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function fe(t,e,n){if("function"==typeof t)n&&(t=Q(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Q(t.handleEvent,t)}return 2147483647<Number(e)?-1:R.setTimeout(t,e||0)}function le(t){t.a=fe((function(){t.a=null,t.c&&(t.c=!1,le(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}H(ce,Xt),(D=ce.prototype).aa=!1,D.M=null,D.Za=function(){if(this.aa){var t=B()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Wt(this,"tick"),this.aa&&(he(this),this.start()))}},D.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=B())},D.G=function(){ce.X.G.call(this),he(this),delete this.a};var pe=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}S(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:le(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(R.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(Y);function de(t){Y.call(this),this.b=t,this.a={}}H(de,Y);var ve=[];function ye(t,e,n,r){Array.isArray(n)||(n&&(ve[0]=n.toString()),n=ve);for(var i=0;i<n.length;i++){var o=Ft(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function be(t){ot(t.a,(function(t,e){this.a.hasOwnProperty(e)&&zt(t)}),t),t.a={}}function ge(){this.a=!0}function me(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Zt(n)}catch(u){return e}}(t,n)+(r?" "+r:"")}))}de.prototype.G=function(){de.X.G.call(this),be(this)},de.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ge.prototype.info=function(){};var we={},_e=null;function Ie(){return _e=_e||new Xt}function Ee(t){Nt.call(this,we.Fa,t)}function Oe(t){var e=Ie();Wt(e,new Ee(e,t))}function Te(t,e){Nt.call(this,we.STAT_EVENT,t),this.stat=e}function je(t){var e=Ie();Wt(e,new Te(e,t))}function xe(t){Nt.call(this,we.Ga,t)}function Ne(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return R.setTimeout((function(){t()}),e)}we.Fa="serverreachability",H(Ee,Nt),we.STAT_EVENT="statevent",H(Te,Nt),we.Ga="timingevent",H(xe,Nt);var Ae={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Se={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Pe(){}function De(){}Pe.prototype.a=null;var ke,Ce={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Re(){Nt.call(this,"d")}function Me(){Nt.call(this,"c")}function Ve(){}function Le(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new de(this),this.P=Ue,this.R=new ce(t=vt?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}H(Re,Nt),H(Me,Nt),H(Ve,Pe),ke=new Ve;var Ue=45e3,Fe={},qe={};function ze(t,e,n){t.H=1,t.i=fn(on(e)),t.j=n,t.I=!0,Qe(t,null)}function Qe(t,e){t.u=B(),He(t),t.l=on(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),On(n.b,"t",r),t.D=0,t.a=gr(t.g,t.g.C?e:null),0<t.O&&(t.F=new pe(Q(t.Ca,t,t.a),t.O)),ye(t.J,t.a,"readystatechange",t.Xa),e=t.B?st(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Oe(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",u=o.split("&"),a=0;a<u.length;a++){var c=u[a].split("=");if(1<c.length){var h=c[0];c=c[1];var f=h.split("_");s=2<=f.length&&"type"==f[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function Ge(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Be(t,n);if(i==qe){4==e&&(t.h=4,je(14),r=!1),me(t.c,t.f,null,"[Incomplete Response]");break}if(i==Fe){t.h=4,je(15),me(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}me(t.c,t.f,i,null),Je(t,i)}4==e&&0==n.length&&(t.h=1,je(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),hr(e),e.F=!0,je(11))):(me(t.c,t.f,n,"[Invalid Chunked Response]"),We(t),Xe(t))}function Be(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?qe:(n=Number(e.substring(n,r)),isNaN(n)?Fe:(r+=1)+n>e.length?qe:(e=e.substr(r,n),t.D=r+n,e))}function He(t){t.T=B()+t.P,Ye(t,t.P)}function Ye(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Ne(Q(t.Va,t),e)}function Ke(t){t.o&&(R.clearTimeout(t.o),t.o=null)}function Xe(t){0==t.g.v||t.A||pr(t.g,t)}function We(t){Ke(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,he(t.R),be(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Je(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Pn(n.b,t)))if(n.I=t.N,!t.C&&Pn(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(tp){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;lr(n),er(n)}cr(n),je(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Ne(Q(n.Sa,n),6e3));if(1>=Sn(n.b)&&n.ea){try{n.ea()}catch(tp){}n.ea=void 0}}else vr(n,11)}else if((t.C||n.a==t)&&lr(n),!Z(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var u=i[5];if(null!=u&&"number"==typeof u&&0<u){var a=1.5*u;n.D=a,n.c.info("backChannelRequestTimeoutMs_="+a)}a=n;var c=t.a;if(c){var h=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var f=a.b;!f.a&&(et(h,"spdy")||et(h,"quic")||et(h,"h2"))&&(f.f=f.g,f.a=new Set,f.b&&(Dn(f,f.b),f.b=null))}if(a.A){var l=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;l&&(a.na=l,hn(a.B,a.A,l))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=B()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((a=n).la=br(a,a.C?a.ga:null,a.fa),p.C){kn(a.b,p);var d=p,v=a.D;v&&d.setTimeout(v),d.o&&(Ke(d),He(d)),a.a=p}else ar(a);0<n.g.length&&ir(n)}else"stop"!=i[0]&&"close"!=i[0]||vr(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?vr(n,7):tr(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Oe(4)}catch(tp){}}function Ze(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(V(t)||"string"==typeof t)X(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(V(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(V(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function $e(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof $e)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function tn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];en(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)en(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function en(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(D=Le.prototype).setTimeout=function(t){this.P=t},D.Xa=function(t){t=t.target;var e=this.F;e&&3==Wn(t)?e.f():this.Ca(t)},D.Ca=function(t){try{if(t==this.a)t:{var e=Wn(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!vt&&!this.a.$())){this.A||4!=e||7==n||Oe(8==n||0>=r?3:2),Ke(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,u=this.a;if((s=u.a?u.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z(s)){var a=s;break e}}a=null}if(!a){this.b=!1,this.h=3,je(12),We(this),Xe(this);break t}me(this.c,this.f,a,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Je(this,a)}this.I?(Ge(this,e,o),vt&&this.b&&3==e&&(ye(this.J,this.R,"tick",this.Wa),this.R.start())):(me(this.c,this.f,o,null),Je(this,o)),4==e&&We(this),this.b&&!this.A&&(4==e?pr(this.g,this):(this.b=!1,He(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,je(12)):(this.h=0,je(13)),We(this),Xe(this)}}}catch(c){}},D.Wa=function(){if(this.a){var t=Wn(this.a),e=this.a.$();this.D<e.length&&(Ke(this),Ge(this,t,e),this.b&&4!=t&&He(this))}},D.cancel=function(){this.A=!0,We(this)},D.Va=function(){this.o=null;var t=B();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(Oe(3),je(17)),We(this),this.h=2,Xe(this)):Ye(this,this.T-t)},(D=$e.prototype).K=function(){tn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},D.L=function(){return tn(this),this.a.concat()},D.get=function(t,e){return en(this.b,t)?this.b[t]:e},D.set=function(t,e){en(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},D.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var nn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function rn(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof rn){this.a=void 0!==e?e:t.a,sn(this,t.f),this.j=t.j,un(this,t.c),an(this,t.h),this.g=t.g,e=t.b;var n=new wn;n.c=e.c,e.a&&(n.a=new $e(e.a),n.b=e.b),cn(this,n),this.i=t.i}else t&&(n=String(t).match(nn))?(this.a=!!e,sn(this,n[1]||"",!0),this.j=ln(n[2]||""),un(this,n[3]||"",!0),an(this,n[4]),this.g=ln(n[5]||"",!0),cn(this,n[6]||"",!0),this.i=ln(n[7]||"")):(this.a=!!e,this.b=new wn(null,this.a))}function on(t){return new rn(t)}function sn(t,e,n){t.f=n?ln(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function un(t,e,n){t.c=n?ln(e,!0):e}function an(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function cn(t,e,n){e instanceof wn?(t.b=e,function(t,e){e&&!t.f&&(_n(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(In(this,e),On(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=pn(e,gn)),t.b=new wn(e,t.a))}function hn(t,e,n){t.b.set(e,n)}function fn(t){return hn(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^B()).toString(36)),t}function ln(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function pn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,dn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function dn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}rn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(pn(e,vn,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(pn(e,vn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(pn(n,"/"==n.charAt(0)?bn:yn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",pn(n,mn)),t.join("")};var vn=/[#\/\?@]/g,yn=/[#\?:]/g,bn=/[#\?]/g,gn=/[#\?@]/g,mn=/#/g;function wn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function _n(t){t.a||(t.a=new $e,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function In(t,e){_n(t),e=Tn(t,e),en(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,en((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&tn(t)))}function En(t,e){return _n(t),e=Tn(t,e),en(t.a.b,e)}function On(t,e,n){In(t,e),0<n.length&&(t.c=null,t.a.set(Tn(t,e),J(n)),t.b+=n.length)}function Tn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(D=wn.prototype).add=function(t,e){_n(this),this.c=null,t=Tn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},D.forEach=function(t,e){_n(this),this.a.forEach((function(n,r){X(n,(function(n){t.call(e,n,r,this)}),this)}),this)},D.L=function(){_n(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},D.K=function(t){_n(this);var e=[];if("string"==typeof t)En(this,t)&&(e=W(e,this.a.get(Tn(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=W(e,t[n])}return e},D.set=function(t,e){return _n(this),this.c=null,En(this,t=Tn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},D.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},D.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var jn=function(){return function(t,e){this.b=t,this.a=e}}();function xn(t){this.g=t||Nn,t=R.PerformanceNavigationTiming?0<(t=R.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(R.ia&&R.ia.ya&&R.ia.ya()&&R.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Nn=10;function An(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Sn(t){return t.b?1:t.a?t.a.size:0}function Pn(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Dn(t,e){t.a?t.a.add(e):t.b=e}function kn(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Cn(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=P(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return J(t.c)}function Rn(){}function Mn(){this.a=new Rn}function Vn(t,e,n){var r=n||"";try{Ze(t,(function(t,n){var i=t;L(t)&&(i=Zt(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(qp){throw e.push(r+"type="+encodeURIComponent("_badmap")),qp}}function Ln(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}xn.prototype.cancel=function(){var t,e;if(this.c=Cn(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=P(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Rn.prototype.stringify=function(t){return R.JSON.stringify(t,void 0)},Rn.prototype.parse=function(t){return R.JSON.parse(t,void 0)};var Un=R.JSON.parse;function Fn(t){Xt.call(this),this.headers=new $e,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=qn,this.D=this.F=!1}H(Fn,Xt);var qn="",zn=/^https?$/i,Qn=["POST","PUT"];function Gn(t){return"content-type"==t.toLowerCase()}function Bn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Hn(t),Kn(t)}function Hn(t){t.u||(t.u=!0,Wt(t,"complete"),Wt(t,"error"))}function Yn(t){if(t.b&&void 0!==C&&(!t.s[1]||4!=Wn(t)||2!=t.W()))if(t.l&&4==Wn(t))fe(t.za,0,t);else if(Wt(t,"readystatechange"),4==Wn(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(nn)[1]||null;if(!o&&R.self&&R.self.location){var s=R.self.location.protocol;o=s.substr(0,s.length-1)}i=!zn.test(o?o.toLowerCase():"")}e=i}if(e)Wt(t,"complete"),Wt(t,"success");else{t.h=6;try{var u=2<Wn(t)?t.a.statusText:""}catch(n){u=""}t.f=u+" ["+t.W()+"]",Hn(t)}}finally{Kn(t)}}}function Kn(t,e){if(t.a){Xn(t);var n=t.a,r=t.s[0]?M:null;t.a=null,t.s=null,e||Wt(t,"ready");try{n.onreadystatechange=r}catch(qp){}}}function Xn(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(R.clearTimeout(t.m),t.m=null)}function Wn(t){return t.a?t.a.readyState:0}function Jn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return ot(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):hn(t,e,n))}function Zn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function $n(t){this.pa=0,this.g=[],this.c=new ge,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Zn("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Zn("baseRetryDelayMs",5e3,t),this.Ra=Zn("retryDelaySeedMs",1e4,t),this.Ma=Zn("forwardChannelMaxRetries",2,t),this.ma=Zn("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new xn(t&&t.concurrentRequestLimit),this.ka=new Mn,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function tr(t){if(nr(t),3==t.v){var e=t.R++,n=on(t.B);hn(n,"SID",t.J),hn(n,"RID",e),hn(n,"TYPE","terminate"),sr(t,n),(e=new Le(t,t.c,e,void 0)).H=2,e.i=fn(on(n)),n=!1,R.navigator&&R.navigator.sendBeacon&&(n=R.navigator.sendBeacon(e.i.toString(),"")),!n&&R.Image&&((new Image).src=e.i,n=!0),n||(e.a=gr(e.g,null),e.a.ba(e.i)),e.u=B(),He(e)}yr(t)}function er(t){t.a&&(hr(t),t.a.cancel(),t.a=null)}function nr(t){er(t),t.j&&(R.clearTimeout(t.j),t.j=null),lr(t),t.b.cancel(),t.h&&("number"==typeof t.h&&R.clearTimeout(t.h),t.h=null)}function rr(t,e){t.g.push(new jn(t.Oa++,e)),3==t.v&&ir(t)}function ir(t){An(t.b)||t.h||(t.h=!0,oe(t.Ba,t),t.u=0)}function or(t,e){var n;n=e?e.f:t.R++;var r=on(t.B);hn(r,"SID",t.J),hn(r,"RID",n),hn(r,"AID",t.P),sr(t,r),t.i&&t.l&&Jn(r,t.i,t.l),n=new Le(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=ur(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Dn(t.b,n),ze(n,r,e)}function sr(t,e){t.f&&Ze({},(function(t,n){hn(e,n,t)}))}function ur(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Q(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var u=!0,a=0;a<n;a++){var c=i[a].b,h=i[a].a;if(0>(c-=o))o=Math.max(0,i[a].b-100),u=!1;else try{Vn(h,s,"req"+c+"_")}catch(ti){r&&r(h)}}if(u){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function ar(t){t.a||t.j||(t.T=1,oe(t.Aa,t),t.o=0)}function cr(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Ne(Q(t.Aa,t),dr(t,t.o)),t.o++,0))}function hr(t){null!=t.s&&(R.clearTimeout(t.s),t.s=null)}function fr(t){t.a=new Le(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=on(t.la);hn(e,"RID","rpc"),hn(e,"SID",t.J),hn(e,"CI",t.H?"0":"1"),hn(e,"AID",t.P),sr(t,e),hn(e,"TYPE","xmlhttp"),t.i&&t.l&&Jn(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=fn(on(e)),n.j=null,n.I=!0,Qe(n,t)}function lr(t){null!=t.m&&(R.clearTimeout(t.m),t.m=null)}function pr(t,e){var n=null;if(t.a==e){lr(t),hr(t),t.a=null;var r=2}else{if(!Pn(t.b,e))return;n=e.s,kn(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=B()-e.u;var i=t.u;Wt(r=Ie(),new xe(r,n,e,i)),ir(t)}else ar(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Sn(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Ne(Q(t.Ba,t,e),dr(t,t.u)),t.u++,0)))}(t,e)||2==r&&cr(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:vr(t,5);break;case 4:vr(t,10);break;case 3:vr(t,6);break;default:vr(t,2)}}function dr(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function vr(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Q(t.Ya,t);n||(n=new rn("//www.google.com/images/cleardot.gif"),R.location&&"http"==R.location.protocol||sn(n,"https"),fn(n)),function(t,e){var n=new ge;if(R.Image){var r=new Image;r.onload=G(Ln,n,r,"TestLoadImage: loaded",!0,e),r.onerror=G(Ln,n,r,"TestLoadImage: error",!1,e),r.onabort=G(Ln,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=G(Ln,n,r,"TestLoadImage: timeout",!1,e),R.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else je(2);t.v=0,t.f&&t.f.ra(e),yr(t),nr(t)}function yr(t){t.v=0,t.I=-1,t.f&&(0==Cn(t.b).length&&0==t.g.length||(t.b.c.length=0,J(t.g),t.g.length=0),t.f.qa())}function br(t,e,n){var r=function(t){return t instanceof rn?on(t):new rn(t,void 0)}(n);if(""!=r.c)e&&un(r,e+"."+r.c),an(r,r.h);else{var i=R.location;r=function(t,e,n,r){var i=new rn(null,void 0);return t&&sn(i,t),e&&un(i,e),n&&an(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&ot(t.V,(function(t,e){hn(r,e,t)})),n=t.na,(e=t.A)&&n&&hn(r,e,n),hn(r,"VER",t.ha),sr(t,r),r}function gr(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Fn(t.Na)).F=t.C,e}function mr(){}function wr(){if(pt&&!(10<=Number(Ot)))throw Error("Environmental error: no available transport.")}function _r(t,e){Xt.call(this),this.a=new $n(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Z(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Z(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Or(this)}function Ir(t){Re.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Er(){Me.call(this),this.status=1}function Or(t){this.a=t}(D=Fn.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:ke),this.a.onreadystatechange=Q(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void Bn(this,o)}t=n||"";var i=new $e(this.headers);r&&Ze(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Gn,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=R.FormData&&t instanceof R.FormData,!(0<=K(Qn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Xn(this),0<this.o&&((this.D=function(t){return pt&&Et(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Q(this.xa,this)):this.m=fe(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){Bn(this,o)}},D.xa=function(){void 0!==C&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Wt(this,"timeout"),this.abort(8))},D.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Wt(this,"complete"),Wt(this,"abort"),Kn(this))},D.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Kn(this,!0)),Fn.X.G.call(this)},D.za=function(){this.j||(this.A||this.l||this.g?Yn(this):this.Ua())},D.Ua=function(){Yn(this)},D.W=function(){try{return 2<Wn(this)?this.a.status:-1}catch(ft){return-1}},D.$=function(){try{return this.a?this.a.responseText:""}catch(ft){return""}},D.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Un(e)}},D.ua=function(){return this.h},D.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(D=$n.prototype).ha=8,D.v=1,D.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Le(this,this.c,t,void 0),r=this.l;if(this.O&&(r?at(r=st(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=ur(this,n,e),hn(i=on(this.B),"RID",t),hn(i,"CVER",22),this.A&&hn(i,"X-HTTP-Session-Id",this.A),sr(this,i),this.i&&r&&Jn(i,this.i,r),Dn(this.b,n),this.Ia&&hn(i,"TYPE","init"),this.da?(hn(i,"$req",e),hn(i,"SID","null"),n.U=!0,ze(n,i,null)):ze(n,i,e),this.v=2}}else 3==this.v&&(t?or(this,t):0==this.g.length||An(this.b)||or(this))},D.Aa=function(){if(this.j=null,fr(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Ne(Q(this.Ta,this),t)}},D.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,je(10),er(this),fr(this))},D.Sa=function(){null!=this.m&&(this.m=null,er(this),cr(this),je(19))},D.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),je(2)):(this.c.info("Failed to ping google.com"),je(1))},(D=mr.prototype).ta=function(){},D.sa=function(){},D.ra=function(){},D.qa=function(){},D.Ja=function(){},wr.prototype.a=function(t,e){return new _r(t,e)},H(_r,Xt),_r.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;je(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=br(t,null,t.fa),ir(t)},_r.prototype.close=function(){tr(this.a)},_r.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,rr(this.a,e)}else this.l?((e={}).__data__=Zt(t),rr(this.a,e)):rr(this.a,t)},_r.prototype.G=function(){this.a.f=null,delete this.f,tr(this.a),delete this.a,_r.X.G.call(this)},H(Ir,Re),H(Er,Me),H(Or,mr),Or.prototype.ta=function(){Wt(this.a,"a")},Or.prototype.sa=function(t){Wt(this.a,new Ir(t))},Or.prototype.ra=function(t){Wt(this.a,new Er(t))},Or.prototype.qa=function(){Wt(this.a,"b")},wr.prototype.createWebChannel=wr.prototype.a,_r.prototype.send=_r.prototype.h,_r.prototype.open=_r.prototype.g,_r.prototype.close=_r.prototype.close,Ae.NO_ERROR=0,Ae.TIMEOUT=8,Ae.HTTP_ERROR=6,Se.COMPLETE="complete",De.EventType=Ce,Ce.OPEN="a",Ce.CLOSE="b",Ce.ERROR="c",Ce.MESSAGE="d",Xt.prototype.listen=Xt.prototype.va,Fn.prototype.listenOnce=Fn.prototype.wa,Fn.prototype.getLastError=Fn.prototype.Qa,Fn.prototype.getLastErrorCode=Fn.prototype.ua,Fn.prototype.getStatus=Fn.prototype.W,Fn.prototype.getResponseJson=Fn.prototype.Pa,Fn.prototype.getResponseText=Fn.prototype.$,Fn.prototype.send=Fn.prototype.ba;var Tr=Ae,jr=Se,xr=we,Nr=De,Ar=Fn,Sr=n("mrSG"),Pr=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},Dr=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),kr=new N.b("@firebase/firestore");function Cr(){return kr.logLevel}function Rr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(kr.logLevel<=N.a.DEBUG){var r=e.map(Lr);kr.debug.apply(kr,Object(Sr.g)(["Firestore (8.2.9): "+t],r))}}function Mr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(kr.logLevel<=N.a.ERROR){var r=e.map(Lr);kr.error.apply(kr,Object(Sr.g)(["Firestore (8.2.9): "+t],r))}}function Vr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(kr.logLevel<=N.a.WARN){var r=e.map(Lr);kr.warn.apply(kr,Object(Sr.g)(["Firestore (8.2.9): "+t],r))}}function Lr(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(qp){return t}}function Ur(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.2.9) INTERNAL ASSERTION FAILED: "+t;throw Mr(e),new Error(e)}function Fr(t,e){t||Ur()}function qr(t,e){return t}function zr(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Qr=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=zr(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Gr(t,e){return t<e?-1:t>e?1:0}function Br(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Hr(t){return t+"\0"}var Yr=function(){function t(t){this.h=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.h)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.h)},t.prototype.l=function(){return 2*this.h.length},t.prototype._=function(t){return Gr(this.h,t.h)},t.prototype.isEqual=function(t){return this.h===t.h},t}();Yr.T=new Yr("");var Kr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Xr=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(Sr.c)(e,t),e}(Error),Wr=function(){function t(t){this.I=t}return t.fromBase64String=function(e){try{return new t(Yr.fromBase64String(e))}catch(e){throw new Xr(Kr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Yr.fromUint8Array(e))},t.prototype.toBase64=function(){return this.I.toBase64()},t.prototype.toUint8Array=function(){return this.I.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.I.isEqual(t.I)},t}(),Jr=function(){function t(t){this.uid=t}return t.prototype.m=function(){return null!=this.uid},t.prototype.A=function(){return this.m()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();Jr.UNAUTHENTICATED=new Jr(null),Jr.R=new Jr("google-credentials-uid"),Jr.P=new Jr("first-party-uid");var Zr=function(t,e){this.user=e,this.type="OAuth",this.g={},this.g.Authorization="Bearer "+t},$r=function(){function t(){this.V=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.p=function(){},t.prototype.v=function(t){this.V=t,t(Jr.UNAUTHENTICATED)},t.prototype.S=function(){this.V=null},t}(),ti=function(){function t(t){var e=this;this.D=null,this.currentUser=Jr.UNAUTHENTICATED,this.C=!1,this.N=0,this.V=null,this.forceRefresh=!1,this.D=function(){e.N++,e.currentUser=e.$(),e.C=!0,e.V&&e.V(e.currentUser)},this.N=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.D):(this.D(null),t.get().then((function(t){e.auth=t,e.D&&e.auth.addAuthTokenListener(e.D)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.N,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.N!==e?(Rr("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Fr("string"==typeof n.accessToken),new Zr(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.p=function(){this.forceRefresh=!0},t.prototype.v=function(t){this.V=t,this.C&&t(this.currentUser)},t.prototype.S=function(){this.auth&&this.auth.removeAuthTokenListener(this.D),this.D=null,this.V=null},t.prototype.$=function(){var t=this.auth&&this.auth.getUid();return Fr(null===t||"string"==typeof t),new Jr(t)},t}(),ei=function(){function t(t,e){this.F=t,this.O=e,this.type="FirstParty",this.user=Jr.P}return Object.defineProperty(t.prototype,"g",{get:function(){var t={"X-Goog-AuthUser":this.O},e=this.F.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),ni=function(){function t(t,e){this.F=t,this.O=e}return t.prototype.getToken=function(){return Promise.resolve(new ei(this.F,this.O))},t.prototype.v=function(t){t(Jr.P)},t.prototype.S=function(){},t.prototype.p=function(){},t}(),ri=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.k=function(t){return n.M(t)},this.L=function(t){return e.B(t)})}return t.prototype.M=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.L&&this.L(t),t},t}();ri.q=-1;var ii=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Xr(Kr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Xr(Kr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Xr(Kr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Xr(Kr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.U=function(t){return this.seconds===t.seconds?Gr(this.nanoseconds,t.nanoseconds):Gr(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),oi=function(){function t(t){this.timestamp=t}return t.K=function(e){return new t(e)},t.min=function(){return new t(new ii(0,0))},t.prototype._=function(t){return this.timestamp.U(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.W=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.j=function(){return this.timestamp},t}(),si=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Ur(),void 0===n?n=t.length-e:n>t.length-e&&Ur(),this.segments=t,this.offset=e,this.G=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.G},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.H(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.J(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.Y=function(t){return this.J(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.X=function(){return this.J(this.segments,this.offset,this.length-1)},t.prototype.Z=function(){return this.segments[this.offset]},t.prototype.tt=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.et=function(){return 0===this.length},t.prototype.nt=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.st=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.it=function(){return this.segments.slice(this.offset,this.limit())},t.H=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),ui=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Sr.c)(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.prototype.rt=function(){return this.it().join("/")},e.prototype.toString=function(){return this.rt()},e.ot=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Xr(Kr.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.ct=function(){return new e([])},e}(si),ai=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ci=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Sr.c)(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.at=function(t){return ai.test(t)},e.prototype.rt=function(){return this.it().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.at(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.rt()},e.prototype.ut=function(){return 1===this.length&&"__name__"===this.get(0)},e.ht=function(){return new e(["__name__"])},e.lt=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Xr(Kr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var u=t[i];if("\\"===u){if(i+1===t.length)throw new Xr(Kr.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[i+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new Xr(Kr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=a,i+=2}else"`"===u?(s=!s,i++):"."!==u||s?(r+=u,i++):(o(),i++)}if(o(),s)throw new Xr(Kr.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.ct=function(){return new e([])},e}(si),hi=function(){function t(t){this.path=t}return t._t=function(e){return new t(ui.ot(e))},t.ft=function(e){return new t(ui.ot(e).Y(5))},t.prototype.dt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===ui.H(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.H=function(t,e){return ui.H(t.path,e.path)},t.wt=function(t){return t.length%2==0},t.Et=function(e){return new t(new ui(e.slice()))},t}();function fi(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function li(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function pi(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var di=function(){function t(t){this.fields=t,t.sort(ci.H)}return t.prototype.Tt=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].nt(t))return!0;return!1},t.prototype.isEqual=function(t){return Br(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),vi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yi(t){if(Fr(!!t),"string"==typeof t){var e=0,n=vi.exec(t);if(Fr(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:bi(t.seconds),nanos:bi(t.nanos)}}function bi(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function gi(t){return"string"==typeof t?Yr.fromBase64String(t):Yr.fromUint8Array(t)}function mi(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function wi(t){var e=yi(t.mapValue.fields.__local_write_time__.timestampValue);return new ii(e.seconds,e.nanos)}function _i(t){return null==t}function Ii(t){return 0===t&&1/t==-1/0}function Ei(t){return"number"==typeof t&&Number.isInteger(t)&&!Ii(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Oi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?mi(t)?4:10:Ur()}function Ti(t,e){var n=Oi(t);if(n!==Oi(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return wi(t).isEqual(wi(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=yi(t.timestampValue),r=yi(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return gi(t.bytesValue).isEqual(gi(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return bi(t.geoPointValue.latitude)===bi(e.geoPointValue.latitude)&&bi(t.geoPointValue.longitude)===bi(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return bi(t.integerValue)===bi(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=bi(t.doubleValue),r=bi(e.doubleValue);return n===r?Ii(n)===Ii(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Br(t.arrayValue.values||[],e.arrayValue.values||[],Ti);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(fi(n)!==fi(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ti(n[i],r[i])))return!1;return!0}(t,e);default:return Ur()}}function ji(t,e){return void 0!==(t.values||[]).find((function(t){return Ti(t,e)}))}function xi(t,e){var n=Oi(t),r=Oi(e);if(n!==r)return Gr(n,r);switch(n){case 0:return 0;case 1:return Gr(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=bi(t.integerValue||t.doubleValue),r=bi(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Ni(t.timestampValue,e.timestampValue);case 4:return Ni(wi(t),wi(e));case 5:return Gr(t.stringValue,e.stringValue);case 6:return function(t,e){var n=gi(t),r=gi(e);return n._(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Gr(n[i],r[i]);if(0!==o)return o}return Gr(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Gr(bi(t.latitude),bi(e.latitude));return 0!==n?n:Gr(bi(t.longitude),bi(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=xi(n[i],r[i]);if(o)return o}return Gr(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var u=Gr(r[s],o[s]);if(0!==u)return u;var a=xi(n[r[s]],i[o[s]]);if(0!==a)return a}return Gr(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Ur()}}function Ni(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Gr(t,e);var n=yi(t),r=yi(e),i=Gr(n.seconds,r.seconds);return 0!==i?i:Gr(n.nanos,r.nanos)}function Ai(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=yi(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?gi(e.bytesValue).toBase64():"referenceValue"in e?hi.ft(e.referenceValue).toString():"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++)r?r=!1:n+=",",n+=t(o[i]);return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=s+":"+t(e.fields[s])}return n+"}"}(e.mapValue):Ur();var n}(t)}function Si(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.rt()}}function Pi(t){return!!t&&"integerValue"in t}function Di(t){return!!t&&"arrayValue"in t}function ki(t){return!!t&&"nullValue"in t}function Ci(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ri(t){return!!t&&"mapValue"in t}var Mi=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.et())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Ri(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.tt()])||null},t.prototype.isEqual=function(t){return Ti(this.proto,t.proto)},t}(),Vi=function(){function t(t){void 0===t&&(t=Mi.empty()),this.It=t,this.At=new Map}return t.prototype.set=function(t,e){return this.Rt(t,e),this},t.prototype.delete=function(t){return this.Rt(t,null),this},t.prototype.Rt=function(t,e){for(var n=this.At,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Oi(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.tt(),e)},t.prototype.Pt=function(){var t=this.yt(ci.ct(),this.At);return null!=t?new Mi(t):this.It},t.prototype.yt=function(t,e){var n=this,r=!1,i=this.It.field(t),o=Ri(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.yt(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function Li(t){var e=[];return li(t.fields||{},(function(t,n){var r=new ci([t]);if(Ri(n)){var i=Li(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)})),new di(e)}var Ui=function(t,e){this.key=t,this.version=e},Fi=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).gt=r,o.Vt=!!i.Vt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(Sr.c)(e,t),e.prototype.field=function(t){return this.gt.field(t)},e.prototype.data=function(){return this.gt},e.prototype.bt=function(){return this.gt.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Vt===t.Vt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.gt.isEqual(t.gt)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.gt.toString()+", {hasLocalMutations: "+this.Vt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Vt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(Ui),qi=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(Sr.c)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Ui),zi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Sr.c)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Ui),Qi=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.vt=null};function Gi(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Qi(t,e,n,r,i,o,s)}function Bi(t){var e=qr(t);if(null===e.vt){var n=e.path.rt();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.rt()+t.op.toString()+Ai(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.rt()+t.dir}(t)})).join(","),_i(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=io(e.startAt)),e.endAt&&(n+="|ub:",n+=io(e.endAt)),e.vt=n}return e.vt}function Hi(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!so(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Ti(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ao(t.startAt,e.startAt)&&ao(t.endAt,e.endAt)}function Yi(t){return hi.wt(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Ki=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(Sr.c)(e,t),e.create=function(t,n,r){return t.ut()?"in"===n||"not-in"===n?this.St(t,n,r):new Xi(t,n,r):"array-contains"===n?new $i(t,r):"in"===n?new to(t,r):"not-in"===n?new eo(t,r):"array-contains-any"===n?new no(t,r):new e(t,n,r)},e.St=function(t,e,n){return"in"===e?new Wi(t,n):new Ji(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Dt(xi(e,this.value)):null!==e&&Oi(this.value)===Oi(e)&&this.Dt(xi(e,this.value))},e.prototype.Dt=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Ur()}},e.prototype.Ct=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Xi=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=hi.ft(r.referenceValue),i}return Object(Sr.c)(e,t),e.prototype.matches=function(t){var e=hi.H(t.key,this.key);return this.Dt(e)},e}(Ki),Wi=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Zi(0,n),r}return Object(Sr.c)(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Ki),Ji=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Zi(0,n),r}return Object(Sr.c)(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Ki);function Zi(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return hi.ft(t.referenceValue)}))}var $i=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(Sr.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return Di(e)&&ji(e.arrayValue,this.value)},e}(Ki),to=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(Sr.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&ji(this.value.arrayValue,e)},e}(Ki),eo=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(Sr.c)(e,t),e.prototype.matches=function(t){if(ji(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!ji(this.value.arrayValue,e)},e}(Ki),no=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(Sr.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Di(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return ji(e.value.arrayValue,t)}))},e}(Ki),ro=function(t,e){this.position=t,this.before=e};function io(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Ai(t)})).join(",")}var oo=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function so(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function uo(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.ut()?hi.H(hi.ft(s.referenceValue),n.key):xi(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function ao(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Ti(t.position[n],e.position[n]))return!1;return!0}var co=function(t,e,n,r,i,o,s,u){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===u&&(u=null),this.path=t,this.collectionGroup=e,this.xt=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=u,this.Nt=null,this.$t=null};function ho(t,e,n,r,i,o,s,u){return new co(t,e,n,r,i,o,s,u)}function fo(t){return new co(t)}function lo(t){return!_i(t.limit)&&"F"===t.limitType}function po(t){return!_i(t.limit)&&"L"===t.limitType}function vo(t){return t.xt.length>0?t.xt[0].field:null}function yo(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.Ct())return r.field}return null}function bo(t){return null!==t.collectionGroup}function go(t){var e=qr(t);if(null===e.Nt){e.Nt=[];var n=yo(e),r=vo(e);if(null!==n&&null===r)n.ut()||e.Nt.push(new oo(n)),e.Nt.push(new oo(ci.ht(),"asc"));else{for(var i=!1,o=0,s=e.xt;o<s.length;o++){var u=s[o];e.Nt.push(u),u.field.ut()&&(i=!0)}if(!i){var a=e.xt.length>0?e.xt[e.xt.length-1].dir:"asc";e.Nt.push(new oo(ci.ht(),a))}}}return e.Nt}function mo(t){var e=qr(t);if(!e.$t)if("F"===e.limitType)e.$t=Gi(e.path,e.collectionGroup,go(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=go(e);r<i.length;r++){var o=i[r];n.push(new oo(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new ro(e.endAt.position,!e.endAt.before):null,u=e.startAt?new ro(e.startAt.position,!e.startAt.before):null;e.$t=Gi(e.path,e.collectionGroup,n,e.filters,e.limit,s,u)}return e.$t}function wo(t,e,n){return new co(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function _o(t,e){return Hi(mo(t),mo(e))&&t.limitType===e.limitType}function Io(t){return Bi(mo(t))+"|lt:"+t.limitType}function Eo(t){return"Query(target="+function(t){var e=t.path.rt();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.rt()+" "+e.op+" "+Ai(e.value);var e})).join(", ")+"]"),_i(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.rt()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+io(t.startAt)),t.endAt&&(e+=", endAt: "+io(t.endAt)),"Target("+e+")"}(mo(t))+"; limitType="+t.limitType+")"}function Oo(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.dt(t.collectionGroup)&&t.path.nt(n):hi.wt(t.path)?t.path.isEqual(n):t.path.st(n)}(t,e)&&function(t,e){for(var n=0,r=t.xt;n<r.length;n++){var i=r[n];if(!i.field.ut()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!uo(t.startAt,go(t),e)||t.endAt&&uo(t.endAt,go(t),e))}(t,e)}function To(t){return function(e,n){for(var r=!1,i=0,o=go(t);i<o.length;i++){var s=o[i],u=jo(s,e,n);if(0!==u)return u;r=r||s.field.ut()}return 0}}function jo(t,e,n){var r=t.field.ut()?hi.H(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?xi(r,i):Ur()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ur()}}var xo=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=oi.min()),void 0===o&&(o=oi.min()),void 0===s&&(s=Yr.T),this.target=t,this.targetId=e,this.Ft=n,this.sequenceNumber=r,this.Ot=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.kt=function(e){return new t(this.target,this.targetId,this.Ft,e,this.Ot,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.Mt=function(e,n){return new t(this.target,this.targetId,this.Ft,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Lt=function(e){return new t(this.target,this.targetId,this.Ft,this.sequenceNumber,this.Ot,e,this.resumeToken)},t}();function No(t,e){if(t.Bt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ii(e)?"-0":e}}function Ao(t){return{integerValue:""+t}}function So(t,e){return Ei(e)?Ao(e):No(t,e)}var Po=function(){this.qt=void 0};function Do(t,e,n){return t instanceof Ro?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Mo?Vo(t,e):t instanceof Lo?Uo(t,e):function(t,e){var n=Co(t,e),r=qo(n)+qo(t.Ut);return Pi(n)&&Pi(t.Ut)?Ao(r):No(t.Qt,r)}(t,e)}function ko(t,e,n){return t instanceof Mo?Vo(t,e):t instanceof Lo?Uo(t,e):n}function Co(t,e){return t instanceof Fo?Pi(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Ro=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Sr.c)(e,t),e}(Po),Mo=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Sr.c)(e,t),e}(Po);function Vo(t,e){for(var n=zo(e),r=function(t){n.some((function(e){return Ti(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Lo=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Sr.c)(e,t),e}(Po);function Uo(t,e){for(var n=zo(e),r=function(t){n=n.filter((function(e){return!Ti(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Fo=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qt=e,r.Ut=n,r}return Object(Sr.c)(e,t),e}(Po);function qo(t){return bi(t.integerValue||t.doubleValue)}function zo(t){return Di(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Qo=function(t,e){this.field=t,this.transform=e},Go=function(t,e){this.version=t,this.transformResults=e},Bo=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Kt=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"Wt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Ho(t,e){return void 0!==t.updateTime?e instanceof Fi&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Fi}var Yo=function(){};function Ko(t,e,n){return t instanceof $o?function(t,e,n){var r=t.value;if(n.transformResults){var i=ns(t.fieldTransforms,e,n.transformResults);r=is(t.fieldTransforms,r,i)}return new Fi(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof ts?function(t,e,n){if(!Ho(t.jt,e))return new zi(t.key,n.version);var r=es(t,e,n.transformResults?ns(t.fieldTransforms,e,n.transformResults):[]);return new Fi(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new qi(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function Xo(t,e,n){return t instanceof $o?function(t,e,n){if(!Ho(t.jt,e))return e;var r=t.value,i=rs(t.fieldTransforms,n,e);r=is(t.fieldTransforms,r,i);var o=Zo(e);return new Fi(t.key,o,r,{Vt:!0})}(t,e,n):t instanceof ts?function(t,e,n){if(!Ho(t.jt,e))return e;var r=Zo(e),i=es(t,e,rs(t.fieldTransforms,n,e));return new Fi(t.key,r,i,{Vt:!0})}(t,e,n):function(t,e){return Ho(t.jt,e)?new qi(t.key,oi.min()):e}(t,e)}function Wo(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof Fi?e.field(o.field):void 0,u=Co(o.transform,s||null);null!=u&&(n=null==n?(new Vi).set(o.field,u):n.set(o.field,u))}return n?n.Pt():null}(t.fieldTransforms,e)}function Jo(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.jt.isEqual(e.jt)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Br(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Mo&&e instanceof Mo||t instanceof Lo&&e instanceof Lo?Br(t.elements,e.elements,Ti):t instanceof Fo&&e instanceof Fo?Ti(t.Ut,e.Ut):t instanceof Ro&&e instanceof Ro}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.Gt.isEqual(e.Gt))}function Zo(t){return t instanceof Fi?t.version:oi.min()}var $o=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.jt=r,o.fieldTransforms=i,o.type=0,o}return Object(Sr.c)(e,t),e}(Yo),ts=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.Gt=r,s.jt=i,s.fieldTransforms=o,s.type=1,s}return Object(Sr.c)(e,t),e}(Yo);function es(t,e,n){var r;return r=function(t,e){var n=new Vi(e);return t.Gt.fields.forEach((function(e){if(!e.et()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.Pt()}(t,r=e instanceof Fi?e.data():Mi.empty()),is(t.fieldTransforms,r,n)}function ns(t,e,n){var r=[];Fr(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,u=null;e instanceof Fi&&(u=e.field(o.field)),r.push(ko(s,u,n[i]))}return r}function rs(t,e,n){for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i],u=s.transform,a=null;n instanceof Fi&&(a=n.field(s.field)),r.push(Do(u,a,e))}return r}function is(t,e,n){for(var r=new Vi(e),i=0;i<t.length;i++)r.set(t[i].field,n[i]);return r.Pt()}var os,ss,us=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=2,r.fieldTransforms=[],r}return Object(Sr.c)(e,t),e}(Yo),as=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=3,r.fieldTransforms=[],r}return Object(Sr.c)(e,t),e}(Yo),cs=function(t){this.count=t};function hs(t){switch(t){case Kr.OK:return Ur();case Kr.CANCELLED:case Kr.UNKNOWN:case Kr.DEADLINE_EXCEEDED:case Kr.RESOURCE_EXHAUSTED:case Kr.INTERNAL:case Kr.UNAVAILABLE:case Kr.UNAUTHENTICATED:return!1;case Kr.INVALID_ARGUMENT:case Kr.NOT_FOUND:case Kr.ALREADY_EXISTS:case Kr.PERMISSION_DENIED:case Kr.FAILED_PRECONDITION:case Kr.ABORTED:case Kr.OUT_OF_RANGE:case Kr.UNIMPLEMENTED:case Kr.DATA_LOSS:return!0;default:return Ur()}}function fs(t){if(void 0===t)return Mr("GRPC error has no .code"),Kr.UNKNOWN;switch(t){case os.OK:return Kr.OK;case os.CANCELLED:return Kr.CANCELLED;case os.UNKNOWN:return Kr.UNKNOWN;case os.DEADLINE_EXCEEDED:return Kr.DEADLINE_EXCEEDED;case os.RESOURCE_EXHAUSTED:return Kr.RESOURCE_EXHAUSTED;case os.INTERNAL:return Kr.INTERNAL;case os.UNAVAILABLE:return Kr.UNAVAILABLE;case os.UNAUTHENTICATED:return Kr.UNAUTHENTICATED;case os.INVALID_ARGUMENT:return Kr.INVALID_ARGUMENT;case os.NOT_FOUND:return Kr.NOT_FOUND;case os.ALREADY_EXISTS:return Kr.ALREADY_EXISTS;case os.PERMISSION_DENIED:return Kr.PERMISSION_DENIED;case os.FAILED_PRECONDITION:return Kr.FAILED_PRECONDITION;case os.ABORTED:return Kr.ABORTED;case os.OUT_OF_RANGE:return Kr.OUT_OF_RANGE;case os.UNIMPLEMENTED:return Kr.UNIMPLEMENTED;case os.DATA_LOSS:return Kr.DATA_LOSS;default:return Ur()}}(ss=os||(os={}))[ss.OK=0]="OK",ss[ss.CANCELLED=1]="CANCELLED",ss[ss.UNKNOWN=2]="UNKNOWN",ss[ss.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ss[ss.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ss[ss.NOT_FOUND=5]="NOT_FOUND",ss[ss.ALREADY_EXISTS=6]="ALREADY_EXISTS",ss[ss.PERMISSION_DENIED=7]="PERMISSION_DENIED",ss[ss.UNAUTHENTICATED=16]="UNAUTHENTICATED",ss[ss.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ss[ss.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ss[ss.ABORTED=10]="ABORTED",ss[ss.OUT_OF_RANGE=11]="OUT_OF_RANGE",ss[ss.UNIMPLEMENTED=12]="UNIMPLEMENTED",ss[ss.INTERNAL=13]="INTERNAL",ss[ss.UNAVAILABLE=14]="UNAVAILABLE",ss[ss.DATA_LOSS=15]="DATA_LOSS";var ls=function(){function t(t,e){this.H=t,this.root=e||ds.EMPTY}return t.prototype.zt=function(e,n){return new t(this.H,this.root.zt(e,n,this.H).copy(null,null,ds.Ht,null,null))},t.prototype.remove=function(e){return new t(this.H,this.root.remove(e,this.H).copy(null,null,ds.Ht,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.et();){var n=this.H(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.et();){var r=this.H(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.et=function(){return this.root.et()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Jt=function(){return this.root.Jt()},t.prototype.Yt=function(){return this.root.Yt()},t.prototype.Xt=function(t){return this.root.Xt(t)},t.prototype.forEach=function(t){this.Xt((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.Xt((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.Zt=function(t){return this.root.Zt(t)},t.prototype.te=function(){return new ps(this.root,null,this.H,!1)},t.prototype.ee=function(t){return new ps(this.root,t,this.H,!1)},t.prototype.ne=function(){return new ps(this.root,null,this.H,!0)},t.prototype.se=function(t){return new ps(this.root,t,this.H,!0)},t}(),ps=function(){function t(t,e,n,r){this.ie=r,this.re=[];for(var i=1;!t.et();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.ie?t.left:t.right;else{if(0===i){this.re.push(t);break}this.re.push(t),t=this.ie?t.right:t.left}}return t.prototype.oe=function(){var t=this.re.pop(),e={key:t.key,value:t.value};if(this.ie)for(t=t.left;!t.et();)this.re.push(t),t=t.right;else for(t=t.right;!t.et();)this.re.push(t),t=t.left;return e},t.prototype.ce=function(){return this.re.length>0},t.prototype.ae=function(){if(0===this.re.length)return null;var t=this.re[this.re.length-1];return{key:t.key,value:t.value}},t}(),ds=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.et=function(){return!1},t.prototype.Xt=function(t){return this.left.Xt(t)||t(this.key,this.value)||this.right.Xt(t)},t.prototype.Zt=function(t){return this.right.Zt(t)||t(this.key,this.value)||this.left.Zt(t)},t.prototype.min=function(){return this.left.et()?this:this.left.min()},t.prototype.Jt=function(){return this.min().key},t.prototype.Yt=function(){return this.right.et()?this.key:this.right.Yt()},t.prototype.zt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.zt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.zt(t,e,n))).ue()},t.prototype.he=function(){if(this.left.et())return t.EMPTY;var e=this;return e.left.le()||e.left.left.le()||(e=e._e()),(e=e.copy(null,null,null,e.left.he(),null)).ue()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.et()||i.left.le()||i.left.left.le()||(i=i._e()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.le()&&(i=i.fe()),i.right.et()||i.right.le()||i.right.left.le()||(i=i.de()),0===n(e,i.key)){if(i.right.et())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.he())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.ue()},t.prototype.le=function(){return this.color},t.prototype.ue=function(){var t=this;return t.right.le()&&!t.left.le()&&(t=t.we()),t.left.le()&&t.left.left.le()&&(t=t.fe()),t.left.le()&&t.right.le()&&(t=t.Ee()),t},t.prototype._e=function(){var t=this.Ee();return t.right.left.le()&&(t=(t=(t=t.copy(null,null,null,null,t.right.fe())).we()).Ee()),t},t.prototype.de=function(){var t=this.Ee();return t.left.left.le()&&(t=(t=t.fe()).Ee()),t},t.prototype.we=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.fe=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Ee=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Te=function(){var t=this.Ie();return Math.pow(2,t)<=this.size+1},t.prototype.Ie=function(){if(this.le()&&this.left.le())throw Ur();if(this.right.le())throw Ur();var t=this.left.Ie();if(t!==this.right.Ie())throw Ur();return t+(this.le()?0:1)},t}();ds.EMPTY=null,ds.RED=!0,ds.Ht=!1,ds.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Ur()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Ur()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Ur()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Ur()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Ur()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.zt=function(t,e,n){return new ds(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.et=function(){return!0},t.prototype.Xt=function(t){return!1},t.prototype.Zt=function(t){return!1},t.prototype.Jt=function(){return null},t.prototype.Yt=function(){return null},t.prototype.le=function(){return!1},t.prototype.Te=function(){return!0},t.prototype.Ie=function(){return 0},t}());var vs=function(){function t(t){this.H=t,this.data=new ls(this.H)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Jt()},t.prototype.last=function(){return this.data.Yt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Xt((function(e,n){return t(e),!1}))},t.prototype.me=function(t,e){for(var n=this.data.ee(t[0]);n.ce();){var r=n.oe();if(this.H(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Ae=function(t,e){var n;for(n=void 0!==e?this.data.ee(e):this.data.te();n.ce();)if(!t(n.oe().key))return},t.prototype.Re=function(t){var e=this.data.ee(t);return e.ce()?e.oe().key:null},t.prototype.te=function(){return new ys(this.data.te())},t.prototype.ee=function(t){return new ys(this.data.ee(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).zt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.et=function(){return this.data.et()},t.prototype.Pe=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.te(),r=e.data.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(0!==this.H(i,o))return!1}return!0},t.prototype.it=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.H);return n.data=e,n},t}(),ys=function(){function t(t){this.ye=t}return t.prototype.oe=function(){return this.ye.oe().key},t.prototype.ce=function(){return this.ye.ce()},t}(),bs=new ls(hi.H);function gs(){return bs}function ms(){return gs()}var ws=new ls(hi.H);function _s(){return ws}var Is=new ls(hi.H);function Es(){return Is}var Os=new vs(hi.H);function Ts(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Os,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var js=new vs(Gr);function xs(){return js}var Ns=function(){function t(t){this.H=t?function(e,n){return t(e,n)||hi.H(e.key,n.key)}:function(t,e){return hi.H(t.key,e.key)},this.ge=_s(),this.Ve=new ls(this.H)}return t.pe=function(e){return new t(e.H)},t.prototype.has=function(t){return null!=this.ge.get(t)},t.prototype.get=function(t){return this.ge.get(t)},t.prototype.first=function(){return this.Ve.Jt()},t.prototype.last=function(){return this.Ve.Yt()},t.prototype.et=function(){return this.Ve.et()},t.prototype.indexOf=function(t){var e=this.ge.get(t);return e?this.Ve.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Ve.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Ve.Xt((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.ge.zt(t.key,t),e.Ve.zt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.ge.remove(t),this.Ve.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Ve.te(),r=e.Ve.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.H=this.H,r.ge=e,r.Ve=n,r},t}(),As=function(){function t(){this.be=new ls(hi.H)}return t.prototype.track=function(t){var e=t.doc.key,n=this.be.get(e);n?0!==t.type&&3===n.type?this.be=this.be.zt(e,t):3===t.type&&1!==n.type?this.be=this.be.zt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.be=this.be.zt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.be=this.be.remove(e):1===t.type&&2===n.type?this.be=this.be.zt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):Ur():this.be=this.be.zt(e,t)},t.prototype.ve=function(){var t=[];return this.be.Xt((function(e,n){t.push(n)})),t},t}(),Ss=function(){function t(t,e,n,r,i,o,s,u){this.query=t,this.docs=e,this.Se=n,this.docChanges=r,this.De=i,this.fromCache=o,this.Ce=s,this.xe=u}return t.Ne=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Ns.pe(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.De.et()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Ce===t.Ce&&this.De.isEqual(t.De)&&_o(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Se.isEqual(t.Se)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Ps=function(){function t(t,e,n,r,i){this.Ot=t,this.$e=e,this.Fe=n,this.Oe=r,this.ke=i}return t.Me=function(e,n){var r=new Map;return r.set(e,Ds.Le(e,n)),new t(oi.min(),r,xs(),gs(),Ts())},t}(),Ds=function(){function t(t,e,n,r,i){this.resumeToken=t,this.Be=e,this.qe=n,this.Ue=r,this.Qe=i}return t.Le=function(e,n){return new t(Yr.T,n,Ts(),Ts(),Ts())},t}(),ks=function(t,e,n,r){this.Ke=t,this.removedTargetIds=e,this.key=n,this.We=r},Cs=function(t,e){this.targetId=t,this.je=e},Rs=function(t,e,n,r){void 0===n&&(n=Yr.T),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Ms=function(){function t(){this.Ge=0,this.ze=Us(),this.He=Yr.T,this.Je=!1,this.Ye=!0}return Object.defineProperty(t.prototype,"Be",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.He},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Xe",{get:function(){return 0!==this.Ge},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ze",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),t.prototype.tn=function(t){t.l()>0&&(this.Ye=!0,this.He=t)},t.prototype.en=function(){var t=Ts(),e=Ts(),n=Ts();return this.ze.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Ur()}})),new Ds(this.He,this.Je,t,e,n)},t.prototype.nn=function(){this.Ye=!1,this.ze=Us()},t.prototype.sn=function(t,e){this.Ye=!0,this.ze=this.ze.zt(t,e)},t.prototype.rn=function(t){this.Ye=!0,this.ze=this.ze.remove(t)},t.prototype.on=function(){this.Ge+=1},t.prototype.cn=function(){this.Ge-=1},t.prototype.an=function(){this.Ye=!0,this.Je=!0},t}(),Vs=function(){function t(t){this.un=t,this.hn=new Map,this.ln=gs(),this._n=Ls(),this.fn=new vs(Gr)}return t.prototype.dn=function(t){for(var e=0,n=t.Ke;e<n.length;e++){var r=n[e];t.We instanceof Fi?this.wn(r,t.We):t.We instanceof qi&&this.En(r,t.key,t.We)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.En(r=o[i],t.key,t.We)},t.prototype.Tn=function(t){var e=this;this.In(t,(function(n){var r=e.mn(n);switch(t.state){case 0:e.An(n)&&r.tn(t.resumeToken);break;case 1:r.cn(),r.Xe||r.nn(),r.tn(t.resumeToken);break;case 2:r.cn(),r.Xe||e.removeTarget(n);break;case 3:e.An(n)&&(r.an(),r.tn(t.resumeToken));break;case 4:e.An(n)&&(e.Rn(n),r.tn(t.resumeToken));break;default:Ur()}}))},t.prototype.In=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.hn.forEach((function(t,r){n.An(r)&&e(r)}))},t.prototype.Pn=function(t){var e=t.targetId,n=t.je.count,r=this.yn(e);if(r){var i=r.target;if(Yi(i))if(0===n){var o=new hi(i.path);this.En(e,o,new qi(o,oi.min()))}else Fr(1===n);else this.gn(e)!==n&&(this.Rn(e),this.fn=this.fn.add(e))}},t.prototype.Vn=function(t){var e=this,n=new Map;this.hn.forEach((function(r,i){var o=e.yn(i);if(o){if(r.Be&&Yi(o.target)){var s=new hi(o.target.path);null!==e.ln.get(s)||e.pn(i,s)||e.En(i,s,new qi(s,t))}r.Ze&&(n.set(i,r.en()),r.nn())}}));var r=Ts();this._n.forEach((function(t,n){var i=!0;n.Ae((function(t){var n=e.yn(t);return!n||2===n.Ft||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Ps(t,n,this.fn,this.ln,r);return this.ln=gs(),this._n=Ls(),this.fn=new vs(Gr),i},t.prototype.wn=function(t,e){if(this.An(t)){var n=this.pn(t,e.key)?2:0;this.mn(t).sn(e.key,n),this.ln=this.ln.zt(e.key,e),this._n=this._n.zt(e.key,this.bn(e.key).add(t))}},t.prototype.En=function(t,e,n){if(this.An(t)){var r=this.mn(t);this.pn(t,e)?r.sn(e,1):r.rn(e),this._n=this._n.zt(e,this.bn(e).delete(t)),n&&(this.ln=this.ln.zt(e,n))}},t.prototype.removeTarget=function(t){this.hn.delete(t)},t.prototype.gn=function(t){var e=this.mn(t).en();return this.un.vn(t).size+e.qe.size-e.Qe.size},t.prototype.on=function(t){this.mn(t).on()},t.prototype.mn=function(t){var e=this.hn.get(t);return e||(e=new Ms,this.hn.set(t,e)),e},t.prototype.bn=function(t){var e=this._n.get(t);return e||(e=new vs(Gr),this._n=this._n.zt(t,e)),e},t.prototype.An=function(t){var e=null!==this.yn(t);return e||Rr("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.yn=function(t){var e=this.hn.get(t);return e&&e.Xe?null:this.un.Sn(t)},t.prototype.Rn=function(t){var e=this;this.hn.set(t,new Ms),this.un.vn(t).forEach((function(n){e.En(t,n,null)}))},t.prototype.pn=function(t,e){return this.un.vn(t).has(e)},t}();function Ls(){return new ls(hi.H)}function Us(){return new ls(hi.H)}var Fs={asc:"ASCENDING",desc:"DESCENDING"},qs={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zs=function(t,e){this.t=t,this.Bt=e};function Qs(t,e){return t.Bt?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Gs(t,e){return t.Bt?e.toBase64():e.toUint8Array()}function Bs(t,e){return Qs(t,e.j())}function Hs(t){return Fr(!!t),oi.K(function(t){var e=yi(t);return new ii(e.seconds,e.nanos)}(t))}function Ys(t,e){return function(t){return new ui(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).rt()}function Ks(t){var e=ui.ot(t);return Fr(bu(e)),e}function Xs(t,e){return Ys(t.t,e.path)}function Ws(t,e){var n=Ks(e);if(n.get(1)!==t.t.projectId)throw new Xr(Kr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.t.projectId);if(n.get(3)!==t.t.database)throw new Xr(Kr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.t.database);return new hi(tu(n))}function Js(t,e){return Ys(t.t,e)}function Zs(t){var e=Ks(t);return 4===e.length?ui.ct():tu(e)}function $s(t){return new ui(["projects",t.t.projectId,"databases",t.t.database]).rt()}function tu(t){return Fr(t.length>4&&"documents"===t.get(4)),t.Y(5)}function eu(t,e,n){return{name:Xs(t,e),fields:n.proto.mapValue.fields}}function nu(t,e,n){var r=Ws(t,e.name),i=Hs(e.updateTime),o=new Mi({mapValue:{fields:e.fields}});return new Fi(r,i,o,{hasCommittedMutations:!!n})}function ru(t,e){var n;if(e instanceof $o)n={update:eu(t,e.key,e.value)};else if(e instanceof us)n={delete:Xs(t,e.key)};else if(e instanceof ts)n={update:eu(t,e.key,e.data),updateMask:yu(e.Gt)};else{if(!(e instanceof as))return Ur();n={verify:Xs(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Ro)return{fieldPath:e.field.rt(),setToServerValue:"REQUEST_TIME"};if(n instanceof Mo)return{fieldPath:e.field.rt(),appendMissingElements:{values:n.elements}};if(n instanceof Lo)return{fieldPath:e.field.rt(),removeAllFromArray:{values:n.elements}};if(n instanceof Fo)return{fieldPath:e.field.rt(),increment:n.Ut};throw Ur()}(0,t)}))),e.jt.Wt||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Bs(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Ur()}(t,e.jt)),n}function iu(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Bo.updateTime(Hs(t.updateTime)):void 0!==t.exists?Bo.exists(t.exists):Bo.Kt()}(e.currentDocument):Bo.Kt(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;"setToServerValue"in e?(Fr("REQUEST_TIME"===e.setToServerValue),n=new Ro):"appendMissingElements"in e?n=new Mo(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Lo(e.removeAllFromArray.values||[]):"increment"in e?n=new Fo(t,e.increment):Ur();var r=ci.lt(e.fieldPath);return new Qo(r,n)}(t,e)})):[];if(e.update){var i=Ws(t,e.update.name),o=new Mi({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new di((t.fieldPaths||[]).map((function(t){return ci.lt(t)})))}(e.updateMask);return new ts(i,o,s,n,r)}return new $o(i,o,n,r)}if(e.delete){var u=Ws(t,e.delete);return new us(u,n)}if(e.verify){var a=Ws(t,e.verify);return new as(a,n)}return Ur()}function ou(t,e){return{documents:[Js(t,e.path)]}}function su(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Js(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Js(t,r.X()),n.structuredQuery.from=[{collectionId:r.tt()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Ci(t.value))return{unaryFilter:{field:lu(t.field),op:"IS_NAN"}};if(ki(t.value))return{unaryFilter:{field:lu(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Ci(t.value))return{unaryFilter:{field:lu(t.field),op:"IS_NOT_NAN"}};if(ki(t.value))return{unaryFilter:{field:lu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:lu(t.field),op:fu(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:lu(t.field),direction:hu(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.Bt||_i(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=au(e.startAt)),e.endAt&&(n.structuredQuery.endAt=au(e.endAt)),n}function uu(t){var e=Zs(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Fr(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=function t(e){return e?void 0!==e.unaryFilter?[vu(e)]:void 0!==e.fieldFilter?[du(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):Ur():[]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(t){return function(t){return new oo(pu(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var a=null;n.limit&&(a=function(t){var e;return _i(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=cu(n.startAt));var h=null;return n.endAt&&(h=cu(n.endAt)),ho(e,i,u,s,a,"F",c,h)}function au(t){return{before:t.before,values:t.position}}function cu(t){return new ro(t.values||[],!!t.before)}function hu(t){return Fs[t]}function fu(t){return qs[t]}function lu(t){return{fieldPath:t.rt()}}function pu(t){return ci.lt(t.fieldPath)}function du(t){return Ki.create(pu(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Ur()}}(t.fieldFilter.op),t.fieldFilter.value)}function vu(t){switch(t.unaryFilter.op){case"IS_NAN":var e=pu(t.unaryFilter.field);return Ki.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=pu(t.unaryFilter.field);return Ki.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=pu(t.unaryFilter.field);return Ki.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=pu(t.unaryFilter.field);return Ki.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Ur()}}function yu(t){var e=[];return t.fields.forEach((function(t){return e.push(t.rt())})),{fieldPaths:e}}function bu(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var gu=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},mu=function(){function t(t){var e=this;this.Dn=null,this.Cn=null,this.result=void 0,this.error=void 0,this.xn=!1,this.Nn=!1,t((function(t){e.xn=!0,e.result=t,e.Dn&&e.Dn(t)}),(function(t){e.xn=!0,e.error=t,e.Cn&&e.Cn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Nn&&Ur(),this.Nn=!0,this.xn?this.error?this.$n(n,this.error):this.Fn(e,this.result):new t((function(t,i){r.Dn=function(n){r.Fn(e,n).next(t,i)},r.Cn=function(e){r.$n(n,e).next(t,i)}}))},t.prototype.On=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.kn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Fn=function(e,n){return e?this.kn((function(){return e(n)})):t.resolve(n)},t.prototype.$n=function(e,n){return e?this.kn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.Mn=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.Ln=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.Mn(r)},t}(),wu=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.Bn=new gu,this.transaction.oncomplete=function(){n.Bn.resolve()},this.transaction.onabort=function(){e.error?n.Bn.reject(new Eu(t,e.error)):n.Bn.resolve()},this.transaction.onerror=function(e){var r=Nu(e.target.error);n.Bn.reject(new Eu(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Eu(n,e)}},Object.defineProperty(t.prototype,"qn",{get:function(){return this.Bn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Bn.reject(t),this.aborted||(Rr("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Tu(e)},t}(),_u=function(){function t(e,n,r){this.name=e,this.version=n,this.Un=r,12.2===t.Qn(Object(A.m)())&&Mr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Rr("SimpleDb","Removing database:",t),ju(window.indexedDB.deleteDatabase(t)).On()},t.Kn=function(){if("undefined"==typeof indexedDB)return!1;if(t.Wn())return!0;var e=Object(A.m)(),n=t.Qn(e),r=0<n&&n<10,i=t.jn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Wn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Gn)},t.zn=function(t,e){return t.store(e)},t.Qn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.jn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Hn=function(t){return Object(Sr.b)(this,void 0,void 0,(function(){var e,n=this;return Object(Sr.d)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Rr("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Eu(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Xr(Kr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Eu(t,n))},i.onupgradeneeded=function(t){Rr("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Un.Jn(t.target.result,i.transaction,t.oldVersion,n.version).next((function(){Rr("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Yn&&(this.db.onversionchange=function(t){return n.Yn(t)}),this.db)]}}))}))},t.prototype.Xn=function(t){this.Yn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(Sr.b)(this,void 0,void 0,(function(){var i,o,s,u,a;return Object(Sr.d)(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,a,c,h;return Object(Sr.d)(this,(function(f){switch(f.label){case 0:++o,f.label=1;case 1:return f.trys.push([1,4,,5]),[4,u.Hn(t)];case 2:return u.db=f.sent(),e=wu.open(u.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),mu.reject(t)})).On(),a={},s.catch((function(){})),[4,e.qn];case 3:return[2,(a.value=(f.sent(),s),a)];case 4:return Rr("SimpleDb","Transaction failed with error:",(c=f.sent()).message,"Retrying:",h="FirebaseError"!==c.name&&o<3),u.close(),h?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},u=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(a=c.sent()))return[2,a.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Iu=function(){function t(t){this.Zn=t,this.ts=!1,this.es=null}return Object.defineProperty(t.prototype,"xn",{get:function(){return this.ts},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ns",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Zn=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.ts=!0},t.prototype.ss=function(t){this.es=t},t.prototype.delete=function(){return ju(this.Zn.delete())},t}(),Eu=function(t){function e(e,n){var r=this;return(r=t.call(this,Kr.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(Sr.c)(e,t),e}(Xr);function Ou(t){return"IndexedDbTransactionError"===t.name}var Tu=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Rr("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Rr("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),ju(n)},t.prototype.add=function(t){return Rr("SimpleDb","ADD",this.store.name,t,t),ju(this.store.add(t))},t.prototype.get=function(t){var e=this;return ju(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Rr("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return Rr("SimpleDb","DELETE",this.store.name,t),ju(this.store.delete(t))},t.prototype.count=function(){return Rr("SimpleDb","COUNT",this.store.name),ju(this.store.count())},t.prototype.rs=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.os(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.cs=function(t,e){Rr("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.us=!1;var r=this.cursor(n);return this.os(r,(function(t,e,n){return n.delete()}))},t.prototype.hs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.os(r,e)},t.prototype.ls=function(t){var e=this.cursor({});return new mu((function(n,r){e.onerror=function(t){var e=Nu(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.os=function(t,e){var n=[];return new mu((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Iu(i),s=e(i.primaryKey,i.value,o);if(s instanceof mu){var u=s.catch((function(t){return o.done(),mu.reject(t)}));n.push(u)}o.xn?r():null===o.ns?i.continue():i.continue(o.ns)}else r()}})).next((function(){return mu.Mn(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.us?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function ju(t){return new mu((function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Nu(t.target.error);n(e)}}))}var xu=!1;function Nu(t){var e=_u.Qn(Object(A.m)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Xr("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return xu||(xu=!0,setTimeout((function(){throw r}),0)),r}}return t}var Au=function(){function t(t,e,n,r,i){this._s=t,this.fs=e,this.ds=n,this.op=r,this.ws=i,this.Es=new gu,this.then=this.Es.promise.then.bind(this.Es.promise),this.Es.promise.catch((function(t){}))}return t.Ts=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.Is=setTimeout((function(){return e.As()}),t)},t.prototype.Rs=function(){return this.As()},t.prototype.cancel=function(t){null!==this.Is&&(this.clearTimeout(),this.Es.reject(new Xr(Kr.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.As=function(){var t=this;this._s.Ps((function(){return null!==t.Is?(t.clearTimeout(),t.op().then((function(e){return t.Es.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.Is&&(this.ws(this),clearTimeout(this.Is),this.Is=null)},t}();function Su(t,e){if(Mr("AsyncQueue",e+": "+t),Ou(t))return new Xr(Kr.UNAVAILABLE,e+": "+t);throw t}var Pu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Du=function(){function t(){this.ys=[]}return t.prototype.gs=function(t){this.ys.push(t)},t.prototype.Vs=function(){this.ys.forEach((function(t){return t()}))},t}();function ku(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Ru(e)),e=Cu(t.get(n),e);return Ru(e)}function Cu(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Ru(t){return t+"\x01\x01"}function Mu(t){var e=t.length;if(Fr(e>=2),2===e)return Fr("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),ui.ct();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&Ur(),t.charAt(s+1)){case"\x01":var u=t.substring(o,s),a=void 0;0===i.length?a=u:(a=i+=u,i=""),r.push(a);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Ur()}o=s+2}return new ui(r)}var Vu=function(t,e){this.seconds=t,this.nanoseconds=e},Lu=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Lu.store="owner",Lu.key="owner";var Uu=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Uu.store="mutationQueues",Uu.keyPath="userId";var Fu=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Fu.store="mutations",Fu.keyPath="batchId",Fu.userMutationsIndex="userMutationsIndex",Fu.userMutationsKeyPath=["userId","batchId"];var qu=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,ku(e)]},t.key=function(t,e,n){return[t,ku(e),n]},t}();qu.store="documentMutations",qu.PLACEHOLDER=new qu;var zu=function(t,e){this.path=t,this.readTime=e},Qu=function(t,e){this.path=t,this.version=e},Gu=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Gu.store="remoteDocuments",Gu.readTimeIndex="readTimeIndex",Gu.readTimeIndexPath="readTime",Gu.collectionReadTimeIndex="collectionReadTimeIndex",Gu.collectionReadTimeIndexPath=["parentPath","readTime"];var Bu=function(t){this.byteSize=t};Bu.store="remoteDocumentGlobal",Bu.key="remoteDocumentGlobalKey";var Hu=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Hu.store="targets",Hu.keyPath="targetId",Hu.queryTargetsIndexName="queryTargetsIndex",Hu.queryTargetsKeyPath=["canonicalId","targetId"];var Yu=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Yu.store="targetDocuments",Yu.keyPath=["targetId","path"],Yu.documentTargetsIndex="documentTargetsIndex",Yu.documentTargetsKeyPath=["path","targetId"];var Ku=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Ku.key="targetGlobalKey",Ku.store="targetGlobal";var Xu=function(t,e){this.collectionId=t,this.parent=e};Xu.store="collectionParents",Xu.keyPath=["collectionId","parent"];var Wu=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Wu.store="clientMetadata",Wu.keyPath="clientId";var Ju=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Ju.store="bundles",Ju.keyPath="bundleId";var Zu=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Zu.store="namedQueries",Zu.keyPath="name";var $u=Object(Sr.g)(Object(Sr.g)(Object(Sr.g)(Object(Sr.g)([Uu.store,Fu.store,qu.store,Gu.store,Hu.store,Lu.store,Ku.store,Yu.store],[Wu.store]),[Bu.store]),[Xu.store]),[Ju.store,Zu.store]),ta=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ps=e,r.bs=n,r}return Object(Sr.c)(e,t),e}(Du);function ea(t,e){var n=qr(t);return _u.zn(n.ps,e)}var na=function(){function t(t,e,n,r){this.batchId=t,this.vs=e,this.baseMutations=n,this.mutations=r}return t.prototype.Ss=function(t,e,n){for(var r=n.Ds,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Ko(o,e,r[i]))}return e},t.prototype.Cs=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=Xo(s,e,this.vs));for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t)&&(e=Xo(s,e,this.vs))}return e},t.prototype.xs=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.Cs(r.key,t.get(r.key));i&&(n=n.zt(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Ts())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Br(this.mutations,t.mutations,(function(t,e){return Jo(t,e)}))&&Br(this.baseMutations,t.baseMutations,(function(t,e){return Jo(t,e)}))},t}(),ra=function(){function t(t,e,n,r){this.batch=t,this.Ns=e,this.Ds=n,this.$s=r}return t.from=function(e,n,r){Fr(e.mutations.length===r.length);for(var i=Es(),o=e.mutations,s=0;s<o.length;s++)i=i.zt(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),ia=function(t){this.Fs=t};function oa(t,e){if(e.document)return nu(t.Fs,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=hi.Et(e.noDocument.path),r=ha(e.noDocument.readTime);return new qi(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=hi.Et(e.unknownDocument.path);return r=ha(e.unknownDocument.version),new zi(i,r)}return Ur()}function sa(t,e,n){var r=ua(n),i=e.key.path.X().it();if(e instanceof Fi){var o=function(t,e){return{name:Xs(t,e.key),fields:e.bt().mapValue.fields,updateTime:Qs(t,e.version.j())}}(t.Fs,e),s=e.hasCommittedMutations;return new Gu(null,null,o,s,r,i)}if(e instanceof qi){var u=e.key.path.it(),a=ca(e.version);return s=e.hasCommittedMutations,new Gu(null,new zu(u,a),null,s,r,i)}if(e instanceof zi){var c=e.key.path.it(),h=ca(e.version);return new Gu(new Qu(c,h),null,null,!0,r,i)}return Ur()}function ua(t){var e=t.j();return[e.seconds,e.nanoseconds]}function aa(t){var e=new ii(t[0],t[1]);return oi.K(e)}function ca(t){var e=t.j();return new Vu(e.seconds,e.nanoseconds)}function ha(t){var e=new ii(t.seconds,t.nanoseconds);return oi.K(e)}function fa(t,e){for(var n=(e.baseMutations||[]).map((function(e){return iu(t.Fs,e)})),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map((function(e){return iu(t.Fs,e)})),o=ii.fromMillis(e.localWriteTimeMs);return new na(e.batchId,o,n,i)}function la(t){var e,n,r=ha(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?ha(t.lastLimboFreeSnapshotVersion):oi.min();return void 0!==t.query.documents?(Fr(1===(n=t.query).documents.length),e=mo(fo(Zs(n.documents[0])))):e=function(t){return mo(uu(t))}(t.query),new xo(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Yr.fromBase64String(t.resumeToken))}function pa(t,e){var n,r=ca(e.Ot),i=ca(e.lastLimboFreeSnapshotVersion);n=Yi(e.target)?ou(t.Fs,e.target):su(t.Fs,e.target);var o=e.resumeToken.toBase64();return new Hu(e.targetId,Bi(e.target),r,o,e.sequenceNumber,i,n)}function da(t){var e=uu({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?wo(e,e.limit,"L"):e}var va=function(){function t(){}return t.prototype.Os=function(t,e){return ya(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:ha(e.createTime),version:e.version};var e}))},t.prototype.ks=function(t,e){return ya(t).put({bundleId:(n=e).id,createTime:ca(Hs(n.createTime)),version:n.version});var n},t.prototype.Ms=function(t,e){return ba(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:da(e.bundledQuery),readTime:ha(e.readTime)};var e}))},t.prototype.Ls=function(t,e){return ba(t).put(function(t){return{name:t.name,readTime:ca(Hs(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function ya(t){return ea(t,Ju.store)}function ba(t){return ea(t,Zu.store)}var ga=function(){function t(){this.Bs=new ma}return t.prototype.qs=function(t,e){return this.Bs.add(e),mu.resolve()},t.prototype.Us=function(t,e){return mu.resolve(this.Bs.getEntries(e))},t}(),ma=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.tt(),n=t.X(),r=this.index[e]||new vs(ui.H),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.tt(),n=t.X(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new vs(ui.H)).it()},t}(),wa=function(){function t(){this.Qs=new ma}return t.prototype.qs=function(t,e){var n=this;if(!this.Qs.has(e)){var r=e.tt(),i=e.X();t.gs((function(){n.Qs.add(e)}));var o={collectionId:r,parent:ku(i)};return _a(t).put(o)}return mu.resolve()},t.prototype.Us=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Hr(e),""],!1,!0);return _a(t).rs(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Mu(o.parent))}return n}))},t}();function _a(t){return ea(t,Xu.store)}var Ia={Ks:!1,Ws:0,js:0,Gs:0},Ea=function(){function t(t,e,n){this.zs=t,this.Hs=e,this.Js=n}return t.Ys=function(e){return new t(e,t.Xs,t.Zs)},t}();function Oa(t){return Object(Sr.b)(this,void 0,void 0,(function(){return Object(Sr.d)(this,(function(e){if(t.code!==Kr.FAILED_PRECONDITION||t.message!==Pu)throw t;return Rr("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}Ea.Xs=10,Ea.Zs=1e3,Ea.ti=new Ea(41943040,Ea.Xs,Ea.Zs),Ea.ei=new Ea(-1,0,0);var Ta=function(){function t(t,e){this.ni=t,this.si=e,this.ii={}}return t.prototype.get=function(t){var e=this.ni(t),n=this.ii[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.si(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.ni(t),r=this.ii[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.si(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.ii[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.ni(t),n=this.ii[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.si(n[r][0],t))return 1===n.length?delete this.ii[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){li(this.ii,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}}))},t.prototype.et=function(){return pi(this.ii)},t}(),ja=function(){function t(){this.ri=new Ta((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.oi=!1}return t.prototype.ci=function(t){var e=this.ri.get(t);return e?e.readTime:oi.min()},t.prototype.ai=function(t,e){this.ui(),this.ri.set(t.key,{hi:t,readTime:e})},t.prototype.li=function(t,e){void 0===e&&(e=null),this.ui(),this.ri.set(t,{hi:null,readTime:e})},t.prototype._i=function(t,e){this.ui();var n=this.ri.get(e);return void 0!==n?mu.resolve(n.hi):this.fi(t,e)},t.prototype.getEntries=function(t,e){return this.di(t,e)},t.prototype.apply=function(t){return this.ui(),this.oi=!0,this.wi(t)},t.prototype.ui=function(){},t}();function xa(t,e,n){var r=t.store(Fu.store),i=t.store(qu.store),o=[],s=IDBKeyRange.only(n.batchId),u=0,a=r.hs({range:s},(function(t,e,n){return u++,n.delete()}));o.push(a.next((function(){Fr(1===u)})));for(var c=[],h=0,f=n.mutations;h<f.length;h++){var l=f[h],p=qu.key(e,l.key.path,n.batchId);o.push(i.delete(p)),c.push(l.key)}return mu.Mn(o).next((function(){return c}))}function Na(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ur();e=t.noDocument}return JSON.stringify(e).length}var Aa=function(){function t(t,e,n,r){this.userId=t,this.Qt=e,this.Ei=n,this.Ti=r,this.Ii={}}return t.mi=function(e,n,r,i){return Fr(""!==e.uid),new t(e.m()?e.uid:"",n,r,i)},t.prototype.Ai=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Pa(t).hs({index:Fu.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Ri=function(t,e,n,r){var i=this,o=Da(t),s=Pa(t);return s.add({}).next((function(u){Fr("number"==typeof u);for(var a=new na(u,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return ru(t.Fs,e)})),i=n.mutations.map((function(e){return ru(t.Fs,e)}));return new Fu(e,n.batchId,n.vs.toMillis(),r,i)}(i.Qt,i.userId,a),h=[],f=new vs((function(t,e){return Gr(t.rt(),e.rt())})),l=0,p=r;l<p.length;l++){var d=p[l],v=qu.key(i.userId,d.key.path,u);f=f.add(d.key.path.X()),h.push(s.put(c)),h.push(o.put(v,qu.PLACEHOLDER))}return f.forEach((function(e){h.push(i.Ei.qs(t,e))})),t.gs((function(){i.Ii[u]=a.keys()})),mu.Mn(h).next((function(){return a}))}))},t.prototype.Pi=function(t,e){var n=this;return Pa(t).get(e).next((function(t){return t?(Fr(t.userId===n.userId),fa(n.Qt,t)):null}))},t.prototype.yi=function(t,e){var n=this;return this.Ii[e]?mu.resolve(this.Ii[e]):this.Pi(t,e).next((function(t){if(t){var r=t.keys();return n.Ii[e]=r,r}return null}))},t.prototype.gi=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Pa(t).hs({index:Fu.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Fr(e.batchId>=r),o=fa(n.Qt,e)),i.done()})).next((function(){return o}))},t.prototype.Vi=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Pa(t).hs({index:Fu.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.pi=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Pa(t).rs(Fu.userMutationsIndex,n).next((function(t){return t.map((function(t){return fa(e.Qt,t)}))}))},t.prototype.bi=function(t,e){var n=this,r=qu.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Da(t).hs({range:i},(function(r,i,s){var u=r[0],a=r[2],c=Mu(r[1]);if(u===n.userId&&e.path.isEqual(c))return Pa(t).get(a).next((function(t){if(!t)throw Ur();Fr(t.userId===n.userId),o.push(fa(n.Qt,t))}));s.done()})).next((function(){return o}))},t.prototype.vi=function(t,e){var n=this,r=new vs(Gr),i=[];return e.forEach((function(e){var o=qu.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),u=Da(t).hs({range:s},(function(t,i,o){var s=t[0],u=t[2],a=Mu(t[1]);s===n.userId&&e.path.isEqual(a)?r=r.add(u):o.done()}));i.push(u)})),mu.Mn(i).next((function(){return n.Si(t,r)}))},t.prototype.Di=function(t,e){var n=this,r=e.path,i=r.length+1,o=qu.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),u=new vs(Gr);return Da(t).hs({range:s},(function(t,e,o){var s=t[0],a=t[2],c=Mu(t[1]);s===n.userId&&r.nt(c)?c.length===i&&(u=u.add(a)):o.done()})).next((function(){return n.Si(t,u)}))},t.prototype.Si=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Pa(t).get(e).next((function(t){if(null===t)throw Ur();Fr(t.userId===n.userId),r.push(fa(n.Qt,t))})))})),mu.Mn(i).next((function(){return r}))},t.prototype.Ci=function(t,e){var n=this;return xa(t.ps,this.userId,e).next((function(r){return t.gs((function(){n.xi(e.batchId)})),mu.forEach(r,(function(e){return n.Ti.Ni(t,e)}))}))},t.prototype.xi=function(t){delete this.Ii[t]},t.prototype.$i=function(t){var e=this;return this.Ai(t).next((function(n){if(!n)return mu.resolve();var r=IDBKeyRange.lowerBound(qu.prefixForUser(e.userId)),i=[];return Da(t).hs({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Mu(t[1]);i.push(o)}else r.done()})).next((function(){Fr(0===i.length)}))}))},t.prototype.Fi=function(t,e){return Sa(t,this.userId,e)},t.prototype.Oi=function(t){var e=this;return ka(t).get(this.userId).next((function(t){return t||new Uu(e.userId,-1,"")}))},t}();function Sa(t,e,n){var r=qu.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Da(t).hs({range:o,us:!0},(function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()})).next((function(){return s}))}function Pa(t){return ea(t,Fu.store)}function Da(t){return ea(t,qu.store)}function ka(t){return ea(t,Uu.store)}var Ca=function(){function t(t){this.ki=t}return t.prototype.next=function(){return this.ki+=2,this.ki},t.Mi=function(){return new t(0)},t.Li=function(){return new t(-1)},t}(),Ra=function(){function t(t,e){this.Ti=t,this.Qt=e}return t.prototype.Bi=function(t){var e=this;return this.qi(t).next((function(n){var r=new Ca(n.highestTargetId);return n.highestTargetId=r.next(),e.Ui(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Qi=function(t){return this.qi(t).next((function(t){return oi.K(new ii(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Ki=function(t){return this.qi(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Wi=function(t,e,n){var r=this;return this.qi(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.j()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ui(t,i)}))},t.prototype.ji=function(t,e){var n=this;return this.Gi(t,e).next((function(){return n.qi(t).next((function(r){return r.targetCount+=1,n.zi(e,r),n.Ui(t,r)}))}))},t.prototype.Hi=function(t,e){return this.Gi(t,e)},t.prototype.Ji=function(t,e){var n=this;return this.Yi(t,e.targetId).next((function(){return Ma(t).delete(e.targetId)})).next((function(){return n.qi(t)})).next((function(e){return Fr(e.targetCount>0),e.targetCount-=1,n.Ui(t,e)}))},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return Ma(t).hs((function(s,u){var a=la(u);a.sequenceNumber<=e&&null===n.get(a.targetId)&&(i++,o.push(r.Ji(t,a)))})).next((function(){return mu.Mn(o)})).next((function(){return i}))},t.prototype.In=function(t,e){return Ma(t).hs((function(t,n){var r=la(n);e(r)}))},t.prototype.qi=function(t){return Va(t).get(Ku.key).next((function(t){return Fr(null!==t),t}))},t.prototype.Ui=function(t,e){return Va(t).put(Ku.key,e)},t.prototype.Gi=function(t,e){return Ma(t).put(pa(this.Qt,e))},t.prototype.zi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.Zi=function(t){return this.qi(t).next((function(t){return t.targetCount}))},t.prototype.tr=function(t,e){var n=Bi(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Ma(t).hs({range:r,index:Hu.queryTargetsIndexName},(function(t,n,r){var o=la(n);Hi(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.er=function(t,e,n){var r=this,i=[],o=La(t);return e.forEach((function(e){var s=ku(e.path);i.push(o.put(new Yu(n,s))),i.push(r.Ti.nr(t,n,e))})),mu.Mn(i)},t.prototype.sr=function(t,e,n){var r=this,i=La(t);return mu.forEach(e,(function(e){var o=ku(e.path);return mu.Mn([i.delete([n,o]),r.Ti.ir(t,n,e)])}))},t.prototype.Yi=function(t,e){var n=La(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.rr=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=La(t),i=Ts();return r.hs({range:n,us:!0},(function(t,e,n){var r=Mu(t[1]),o=new hi(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Fi=function(t,e){var n=ku(e.path),r=IDBKeyRange.bound([n],[Hr(n)],!1,!0),i=0;return La(t).hs({index:Yu.documentTargetsIndex,us:!0,range:r},(function(t,e,n){0!==t[0]&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Sn=function(t,e){return Ma(t).get(e).next((function(t){return t?la(t):null}))},t}();function Ma(t){return ea(t,Hu.store)}function Va(t){return ea(t,Ku.store)}function La(t){return ea(t,Yu.store)}function Ua(t,e){var n=t[1],r=e[1],i=Gr(t[0],e[0]);return 0===i?Gr(n,r):i}var Fa=function(){function t(t){this.cr=t,this.buffer=new vs(Ua),this.ar=0}return t.prototype.ur=function(){return++this.ar},t.prototype.hr=function(t){var e=[t,this.ur()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Ua(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),qa=function(){function t(t,e){this.lr=t,this._s=e,this._r=!1,this.dr=null}return t.prototype.start=function(t){-1!==this.lr.params.zs&&this.wr(t)},t.prototype.stop=function(){this.dr&&(this.dr.cancel(),this.dr=null)},Object.defineProperty(t.prototype,"Er",{get:function(){return null!==this.dr},enumerable:!1,configurable:!0}),t.prototype.wr=function(t){var e=this,n=this._r?3e5:6e4;Rr("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.dr=this._s.Tr("lru_garbage_collection",n,(function(){return Object(Sr.b)(e,void 0,void 0,(function(){var e;return Object(Sr.d)(this,(function(n){switch(n.label){case 0:this.dr=null,this._r=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Ir(this.lr)];case 2:return n.sent(),[3,7];case 3:return Ou(e=n.sent())?(Rr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Oa(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.wr(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),za=function(){function t(t,e){this.mr=t,this.params=e}return t.prototype.Ar=function(t,e){return this.mr.Rr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Pr=function(t,e){var n=this;if(0===e)return mu.resolve(ri.q);var r=new Fa(e);return this.mr.In(t,(function(t){return r.hr(t.sequenceNumber)})).next((function(){return n.mr.yr(t,(function(t){return r.hr(t)}))})).next((function(){return r.maxValue}))},t.prototype.Xi=function(t,e,n){return this.mr.Xi(t,e,n)},t.prototype.gr=function(t,e){return this.mr.gr(t,e)},t.prototype.Vr=function(t,e){var n=this;return-1===this.params.zs?(Rr("LruGarbageCollector","Garbage collection skipped; disabled"),mu.resolve(Ia)):this.pr(t).next((function(r){return r<n.params.zs?(Rr("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.zs),Ia):n.br(t,e)}))},t.prototype.pr=function(t){return this.mr.pr(t)},t.prototype.br=function(t,e){var n,r,i,o,s,u,a,c=this,h=Date.now();return this.Ar(t,this.params.Hs).next((function(e){return e>c.params.Js?(Rr("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.Js+" from "+e),r=c.params.Js):r=e,o=Date.now(),c.Pr(t,r)})).next((function(r){return n=r,s=Date.now(),c.Xi(t,n,e)})).next((function(e){return i=e,u=Date.now(),c.gr(t,n)})).next((function(t){return a=Date.now(),Cr()<=N.a.DEBUG&&Rr("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(u-s)+"ms\n\tRemoved "+t+" documents in "+(a-u)+"ms\nTotal Duration: "+(a-h)+"ms"),mu.resolve({Ks:!0,Ws:r,js:i,Gs:t})}))},t}(),Qa=function(){function t(t,e){this.db=t,this.lr=function(t,e){return new za(t,e)}(this,e)}return t.prototype.Rr=function(t){var e=this.vr(t);return this.db.Sr().Zi(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.vr=function(t){var e=0;return this.yr(t,(function(t){e++})).next((function(){return e}))},t.prototype.In=function(t,e){return this.db.Sr().In(t,e)},t.prototype.yr=function(t,e){return this.Dr(t,(function(t,n){return e(n)}))},t.prototype.nr=function(t,e,n){return Ga(t,n)},t.prototype.ir=function(t,e,n){return Ga(t,n)},t.prototype.Xi=function(t,e,n){return this.db.Sr().Xi(t,e,n)},t.prototype.Ni=function(t,e){return Ga(t,e)},t.prototype.Cr=function(t,e){return function(t,e){var n=!1;return ka(t).ls((function(r){return Sa(t,r,e).next((function(t){return t&&(n=!0),mu.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.gr=function(t,e){var n=this,r=this.db.$r().Nr(),i=[],o=0;return this.Dr(t,(function(s,u){if(u<=e){var a=n.Cr(t,s).next((function(e){if(!e)return o++,r._i(t,s).next((function(){return r.li(s),La(t).delete([0,ku(s.path)])}))}));i.push(a)}})).next((function(){return mu.Mn(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.kt(t.bs);return this.db.Sr().Hi(t,n)},t.prototype.Fr=function(t,e){return Ga(t,e)},t.prototype.Dr=function(t,e){var n,r=La(t),i=ri.q;return r.hs({index:Yu.documentTargetsIndex},(function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==ri.q&&e(new hi(Mu(n)),i),i=s,n=o):i=ri.q})).next((function(){i!==ri.q&&e(new hi(Mu(n)),i)}))},t.prototype.pr=function(t){return this.db.$r().Or(t)},t}();function Ga(t,e){return La(t).put(function(t,e){return new Yu(0,ku(t.path),e)}(e,t.bs))}var Ba=function(){function t(t,e){this.Qt=t,this.Ei=e}return t.prototype.ai=function(t,e,n){return Ka(t).put(Xa(e),n)},t.prototype.li=function(t,e){var n=Ka(t),r=Xa(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.kr(t,r)}))},t.prototype._i=function(t,e){var n=this;return Ka(t).get(Xa(e)).next((function(t){return n.Mr(t)}))},t.prototype.Lr=function(t,e){var n=this;return Ka(t).get(Xa(e)).next((function(t){var e=n.Mr(t);return e?{hi:e,size:Na(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=ms();return this.Br(t,e,(function(t,e){var i=n.Mr(e);r=r.zt(t,i)})).next((function(){return r}))},t.prototype.qr=function(t,e){var n=this,r=ms(),i=new ls(hi.H);return this.Br(t,e,(function(t,e){var o=n.Mr(e);o?(r=r.zt(t,o),i=i.zt(t,Na(e))):(r=r.zt(t,null),i=i.zt(t,0))})).next((function(){return{Ur:r,Qr:i}}))},t.prototype.Br=function(t,e,n){if(e.et())return mu.resolve();var r=IDBKeyRange.bound(e.first().path.it(),e.last().path.it()),i=e.te(),o=i.oe();return Ka(t).hs({range:r},(function(t,e,r){for(var s=hi.Et(t);o&&hi.H(o,s)<0;)n(o,null),o=i.oe();o&&o.isEqual(s)&&(n(o,e),o=i.ce()?i.oe():null),o?r.ss(o.path.it()):r.done()})).next((function(){for(;o;)n(o,null),o=i.ce()?i.oe():null}))},t.prototype.Kr=function(t,e,n){var r=this,i=_s(),o=e.path.length+1,s={};if(n.isEqual(oi.min())){var u=e.path.it();s.range=IDBKeyRange.lowerBound(u)}else{var a=e.path.it(),c=ua(n);s.range=IDBKeyRange.lowerBound([a,c],!0),s.index=Gu.collectionReadTimeIndex}return Ka(t).hs(s,(function(t,n,s){if(t.length===o){var u=oa(r.Qt,n);e.path.nt(u.key.path)?u instanceof Fi&&Oo(e,u)&&(i=i.zt(u.key,u)):s.done()}})).next((function(){return i}))},t.prototype.Nr=function(t){return new Ha(this,!!t&&t.Wr)},t.prototype.Or=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Ya(t).get(Bu.key).next((function(t){return Fr(!!t),t}))},t.prototype.kr=function(t,e){return Ya(t).put(Bu.key,e)},t.prototype.Mr=function(t){if(t){var e=oa(this.Qt,t);return e instanceof qi&&e.version.isEqual(oi.min())?null:e}return null},t}(),Ha=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jr=e,r.Wr=n,r.Gr=new Ta((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Object(Sr.c)(e,t),e.prototype.wi=function(t){var e=this,n=[],r=0,i=new vs((function(t,e){return Gr(t.rt(),e.rt())}));return this.ri.forEach((function(o,s){var u=e.Gr.get(o);if(s.hi){var a=sa(e.jr.Qt,s.hi,e.ci(o));i=i.add(o.path.X());var c=Na(a);r+=c-u,n.push(e.jr.ai(t,o,a))}else if(r-=u,e.Wr){var h=sa(e.jr.Qt,new qi(o,oi.min()),e.ci(o));n.push(e.jr.ai(t,o,h))}else n.push(e.jr.li(t,o))})),i.forEach((function(r){n.push(e.jr.Ei.qs(t,r))})),n.push(this.jr.updateMetadata(t,r)),mu.Mn(n)},e.prototype.fi=function(t,e){var n=this;return this.jr.Lr(t,e).next((function(t){return null===t?(n.Gr.set(e,0),null):(n.Gr.set(e,t.size),t.hi)}))},e.prototype.di=function(t,e){var n=this;return this.jr.qr(t,e).next((function(t){var e=t.Ur;return t.Qr.forEach((function(t,e){n.Gr.set(t,e)})),e}))},e}(ja);function Ya(t){return ea(t,Bu.store)}function Ka(t){return ea(t,Gu.store)}function Xa(t){return t.path.it()}var Wa=function(){function t(t){this.Qt=t}return t.prototype.Jn=function(t,e,n,r){var i=this;Fr(n<r&&n>=0&&r<=11);var o=new wu("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Lu.store)}(t),function(t){t.createObjectStore(Uu.store,{keyPath:Uu.keyPath}),t.createObjectStore(Fu.store,{keyPath:Fu.keyPath,autoIncrement:!0}).createIndex(Fu.userMutationsIndex,Fu.userMutationsKeyPath,{unique:!0}),t.createObjectStore(qu.store)}(t),Ja(t),function(t){t.createObjectStore(Gu.store)}(t));var s=mu.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Yu.store),t.deleteObjectStore(Hu.store),t.deleteObjectStore(Ku.store)}(t),Ja(t)),s=s.next((function(){return function(t){var e=t.store(Ku.store),n=new Ku(0,0,oi.min().j(),0);return e.put(Ku.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(Fu.store).rs().next((function(n){t.deleteObjectStore(Fu.store),t.createObjectStore(Fu.store,{keyPath:Fu.keyPath,autoIncrement:!0}).createIndex(Fu.userMutationsIndex,Fu.userMutationsKeyPath,{unique:!0});var r=e.store(Fu.store),i=n.map((function(t){return r.put(t)}));return mu.Mn(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(Wu.store,{keyPath:Wu.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.zr(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(Bu.store)}(t),i.Hr(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.Jr(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Yr(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Gu.store);e.createIndex(Gu.readTimeIndex,Gu.readTimeIndexPath,{unique:!1}),e.createIndex(Gu.collectionReadTimeIndex,Gu.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Xr(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(Ju.store,{keyPath:Ju.keyPath})}(t),function(t){t.createObjectStore(Zu.store,{keyPath:Zu.keyPath})}(t)}))),s},t.prototype.Hr=function(t){var e=0;return t.store(Gu.store).hs((function(t,n){e+=Na(n)})).next((function(){var n=new Bu(e);return t.store(Bu.store).put(Bu.key,n)}))},t.prototype.zr=function(t){var e=this,n=t.store(Uu.store),r=t.store(Fu.store);return n.rs().next((function(n){return mu.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.rs(Fu.userMutationsIndex,i).next((function(r){return mu.forEach(r,(function(r){Fr(r.userId===n.userId);var i=fa(e.Qt,r);return xa(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.Jr=function(t){var e=t.store(Yu.store),n=t.store(Gu.store);return t.store(Ku.store).get(Ku.key).next((function(t){var r=[];return n.hs((function(n,i){var o=new ui(n),s=function(t){return[0,ku(t)]}(o);r.push(e.get(s).next((function(n){return n?mu.resolve():function(n){return e.put(new Yu(0,ku(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return mu.Mn(r)}))}))},t.prototype.Yr=function(t,e){t.createObjectStore(Xu.store,{keyPath:Xu.keyPath});var n=e.store(Xu.store),r=new ma,i=function(t){if(r.add(t)){var e=t.tt(),i=t.X();return n.put({collectionId:e,parent:ku(i)})}};return e.store(Gu.store).hs({us:!0},(function(t,e){var n=new ui(t);return i(n.X())})).next((function(){return e.store(qu.store).hs({us:!0},(function(t,e){var n=Mu(t[1]);return i(n.X())}))}))},t.prototype.Xr=function(t){var e=this,n=t.store(Hu.store);return n.hs((function(t,r){var i=la(r),o=pa(e.Qt,i);return n.put(o)}))},t}();function Ja(t){t.createObjectStore(Yu.store,{keyPath:Yu.keyPath}).createIndex(Yu.documentTargetsIndex,Yu.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Hu.store,{keyPath:Hu.keyPath}).createIndex(Hu.queryTargetsIndexName,Hu.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Ku.store)}var Za="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",$a=function(){function t(e,n,r,i,o,s,u,a,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Zr=o,this.window=s,this.document=u,this.eo=c,this.no=h,this.so=null,this.io=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ro=null,this.inForeground=!1,this.oo=null,this.co=null,this.ao=Number.NEGATIVE_INFINITY,this.uo=function(t){return Promise.resolve()},!t.Kn())throw new Xr(Kr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Ti=new Qa(this,i),this.ho=n+"main",this.Qt=new ia(a),this.lo=new _u(this.ho,11,new Wa(this.Qt)),this._o=new Ra(this.Ti,this.Qt),this.Ei=new wa,this.fo=function(t,e){return new Ba(t,e)}(this.Qt,this.Ei),this.wo=new va,this.window&&this.window.localStorage?this.Eo=this.window.localStorage:(this.Eo=null,!1===h&&Mr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.To().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Xr(Kr.FAILED_PRECONDITION,Za);return t.Io(),t.mo(),t.Ao(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t._o.Ki(e)}))})).then((function(e){t.so=new ri(e,t.eo)})).then((function(){t.io=!0})).catch((function(e){return t.lo&&t.lo.close(),Promise.reject(e)}))},t.prototype.Ro=function(t){var e=this;return this.uo=function(n){return Object(Sr.b)(e,void 0,void 0,(function(){return Object(Sr.d)(this,(function(e){return this.Er?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.Po=function(t){var e=this;this.lo.Xn((function(n){return Object(Sr.b)(e,void 0,void 0,(function(){return Object(Sr.d)(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.yo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Zr.Ps((function(){return Object(Sr.b)(e,void 0,void 0,(function(){return Object(Sr.d)(this,(function(t){switch(t.label){case 0:return this.Er?[4,this.To()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.To=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return ec(e).put(new Wu(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Vo(e).next((function(e){e||(t.isPrimary=!1,t.Zr.po((function(){return t.uo(!1)})))}))})).next((function(){return t.bo(e)})).next((function(n){return t.isPrimary&&!n?t.vo(e).next((function(){return!1})):!!n&&t.So(e).next((function(){return!0}))}))})).catch((function(e){if(Ou(e))return Rr("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Rr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Zr.po((function(){return t.uo(e)})),t.isPrimary=e}))},t.prototype.Vo=function(t){var e=this;return tc(t).get(Lu.key).next((function(t){return mu.resolve(e.Do(t))}))},t.prototype.Co=function(t){return ec(t).delete(this.clientId)},t.prototype.xo=function(){return Object(Sr.b)(this,void 0,void 0,(function(){var t,e,n,r=this;return Object(Sr.d)(this,(function(i){switch(i.label){case 0:return!this.isPrimary||this.No(this.ao,18e5)?[3,2]:(this.ao=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=ea(t,Wu.store);return e.rs().next((function(t){var n=r.$o(t,18e5),i=t.filter((function(t){return-1===n.indexOf(t)}));return mu.forEach(i,(function(t){return e.delete(t.clientId)})).next((function(){return i}))}))})).catch((function(){return[]}))]);case 1:if(t=i.sent(),this.Eo)for(e=0,n=t;e<n.length;e++)this.Eo.removeItem(this.Fo(n[e].clientId));i.label=2;case 2:return[2]}}))}))},t.prototype.Ao=function(){var t=this;this.co=this.Zr.Tr("client_metadata_refresh",4e3,(function(){return t.To().then((function(){return t.xo()})).then((function(){return t.Ao()}))}))},t.prototype.Do=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.bo=function(t){var e=this;return this.no?mu.resolve(!0):tc(t).get(Lu.key).next((function(n){if(null!==n&&e.No(n.leaseTimestampMs,5e3)&&!e.Oo(n.ownerId)){if(e.Do(n)&&e.networkEnabled)return!0;if(!e.Do(n)){if(!n.allowTabSynchronization)throw new Xr(Kr.FAILED_PRECONDITION,Za);return!1}}return!(!e.networkEnabled||!e.inForeground)||ec(t).rs().next((function(t){return void 0===e.$o(t,5e3).find((function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))}))}))})).next((function(t){return e.isPrimary!==t&&Rr("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.ko=function(){return Object(Sr.b)(this,void 0,void 0,(function(){var t=this;return Object(Sr.d)(this,(function(e){switch(e.label){case 0:return this.io=!1,this.Mo(),this.co&&(this.co.cancel(),this.co=null),this.Lo(),this.Bo(),[4,this.lo.runTransaction("shutdown","readwrite",[Lu.store,Wu.store],(function(e){var n=new ta(e,ri.q);return t.vo(n).next((function(){return t.Co(n)}))}))];case 1:return e.sent(),this.lo.close(),this.qo(),[2]}}))}))},t.prototype.$o=function(t,e){var n=this;return t.filter((function(t){return n.No(t.updateTimeMs,e)&&!n.Oo(t.clientId)}))},t.prototype.Uo=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return ec(e).rs().next((function(e){return t.$o(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Qo=function(t){return Aa.mi(t,this.Qt,this.Ei,this.Ti)},t.prototype.Sr=function(){return this._o},t.prototype.$r=function(){return this.fo},t.prototype.Ko=function(){return this.Ei},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Rr("IndexedDbPersistence","Starting transaction:",t),this.lo.runTransaction(t,"readonly"===e?"readonly":"readwrite",$u,(function(o){return r=new ta(o,i.so?i.so.next():ri.q),"readwrite-primary"===e?i.Vo(r).next((function(t){return!!t||i.bo(r)})).next((function(e){if(!e)throw Mr("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Zr.po((function(){return i.uo(!1)})),new Xr(Kr.FAILED_PRECONDITION,Pu);return n(r)})).next((function(t){return i.So(r).next((function(){return t}))})):i.jo(r).next((function(){return n(r)}))})).then((function(t){return r.Vs(),t}))},t.prototype.jo=function(t){var e=this;return tc(t).get(Lu.key).next((function(t){if(null!==t&&e.No(t.leaseTimestampMs,5e3)&&!e.Oo(t.ownerId)&&!e.Do(t)&&!(e.no||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Xr(Kr.FAILED_PRECONDITION,Za)}))},t.prototype.So=function(t){var e=new Lu(this.clientId,this.allowTabSynchronization,Date.now());return tc(t).put(Lu.key,e)},t.Kn=function(){return _u.Kn()},t.prototype.vo=function(t){var e=this,n=tc(t);return n.get(Lu.key).next((function(t){return e.Do(t)?(Rr("IndexedDbPersistence","Releasing primary lease."),n.delete(Lu.key)):mu.resolve()}))},t.prototype.No=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Mr("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Io=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.oo=function(){t.Zr.Ps((function(){return t.inForeground="visible"===t.document.visibilityState,t.To()}))},this.document.addEventListener("visibilitychange",this.oo),this.inForeground="visible"===this.document.visibilityState)},t.prototype.Lo=function(){this.oo&&(this.document.removeEventListener("visibilitychange",this.oo),this.oo=null)},t.prototype.mo=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ro=function(){e.Mo(),e.Zr.Ps((function(){return e.ko()}))},this.window.addEventListener("unload",this.ro))},t.prototype.Bo=function(){this.ro&&(this.window.removeEventListener("unload",this.ro),this.ro=null)},t.prototype.Oo=function(t){var e;try{var n=null!==(null===(e=this.Eo)||void 0===e?void 0:e.getItem(this.Fo(t)));return Rr("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Mr("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.Mo=function(){if(this.Eo)try{this.Eo.setItem(this.Fo(this.clientId),String(Date.now()))}catch(t){Mr("Failed to set zombie client id.",t)}},t.prototype.qo=function(){if(this.Eo)try{this.Eo.removeItem(this.Fo(this.clientId))}catch(t){}},t.prototype.Fo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function tc(t){return ea(t,Lu.store)}function ec(t){return ea(t,Wu.store)}function nc(t,e){var n=t.projectId;return t.o||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var rc=function(t,e){this.progress=t,this.Go=e},ic=function(){function t(t,e,n){this.fo=t,this.zo=e,this.Ei=n}return t.prototype.Ho=function(t,e){var n=this;return this.zo.bi(t,e).next((function(r){return n.Jo(t,e,r)}))},t.prototype.Jo=function(t,e,n){return this.fo._i(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].Cs(e,t);return t}))},t.prototype.Yo=function(t,e,n){var r=ms();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].Cs(t,e);r=r.zt(t,e)})),r},t.prototype.Xo=function(t,e){var n=this;return this.fo.getEntries(t,e).next((function(e){return n.Zo(t,e)}))},t.prototype.Zo=function(t,e){var n=this;return this.zo.vi(t,e).next((function(r){var i=n.Yo(t,e,r),o=gs();return i.forEach((function(t,e){e||(e=new qi(t,oi.min())),o=o.zt(t,e)})),o}))},t.prototype.Kr=function(t,e,n){return function(t){return hi.wt(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.tc(t,e.path):bo(e)?this.ec(t,e,n):this.nc(t,e,n)},t.prototype.tc=function(t,e){return this.Ho(t,new hi(e)).next((function(t){var e=_s();return t instanceof Fi&&(e=e.zt(t.key,t)),e}))},t.prototype.ec=function(t,e,n){var r=this,i=e.collectionGroup,o=_s();return this.Ei.Us(t,i).next((function(s){return mu.forEach(s,(function(s){var u=function(t,e){return new co(e,null,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.nc(t,u,n).next((function(t){t.forEach((function(t,e){o=o.zt(t,e)}))}))})).next((function(){return o}))}))},t.prototype.nc=function(t,e,n){var r,i,o=this;return this.fo.Kr(t,e,n).next((function(n){return r=n,o.zo.Di(t,e)})).next((function(e){return o.sc(t,i=e,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,u=o.mutations;s<u.length;s++){var a=u[s],c=a.key,h=Xo(a,r.get(c),o.vs);r=h instanceof Fi?r.zt(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){Oo(e,n)||(r=r.remove(t))})),r}))},t.prototype.sc=function(t,e,n){for(var r=Ts(),i=0,o=e;i<o.length;i++)for(var s=0,u=o[i].mutations;s<u.length;s++){var a=u[s];a instanceof ts&&null===n.get(a.key)&&(r=r.add(a.key))}var c=n;return this.fo.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof Fi&&(c=c.zt(t,e))})),c}))},t}(),oc=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.ic=n,this.rc=r}return t.oc=function(e,n){for(var r=Ts(),i=Ts(),o=0,s=n.docChanges;o<s.length;o++){var u=s[o];switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),sc=function(){function t(){}return t.prototype.cc=function(t){this.ac=t},t.prototype.Kr=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.xt.length||1===t.xt.length&&t.xt[0].field.ut())}(e)||n.isEqual(oi.min())?this.uc(t,e):this.ac.Xo(t,r).next((function(o){var s=i.hc(e,o);return(lo(e)||po(e))&&i.lc(e.limitType,s,r,n)?i.uc(t,e):(Cr()<=N.a.DEBUG&&Rr("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Eo(e)),i.ac.Kr(t,e,n).next((function(t){return s.forEach((function(e){t=t.zt(e.key,e)})),t})))}))},t.prototype.hc=function(t,e){var n=new vs(To(t));return e.forEach((function(e,r){r instanceof Fi&&Oo(t,r)&&(n=n.add(r))})),n},t.prototype.lc=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version._(r)>0)},t.prototype.uc=function(t,e){return Cr()<=N.a.DEBUG&&Rr("QueryEngine","Using full collection scan to execute query:",Eo(e)),this.ac.Kr(t,e,oi.min())},t}(),uc=function(){function t(t,e,n,r){this.persistence=t,this._c=e,this.Qt=r,this.fc=new ls(Gr),this.dc=new Ta((function(t){return Bi(t)}),Hi),this.wc=oi.min(),this.zo=t.Qo(n),this.Ec=t.$r(),this._o=t.Sr(),this.Tc=new ic(this.Ec,this.zo,this.persistence.Ko()),this.wo=t.Wo(),this._c.cc(this.Tc)}return t.prototype.Ir=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.Vr(n,e.fc)}))},t}();function ac(t,e,n,r){return new uc(t,e,n,r)}function cc(t,e){return Object(Sr.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object(Sr.d)(this,(function(s){switch(s.label){case 0:return n=qr(t),r=n.zo,i=n.Tc,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.zo.pi(t).next((function(s){return o=s,r=n.persistence.Qo(e),i=new ic(n.Ec,r,n.persistence.Ko()),r.pi(t)})).next((function(e){for(var n=[],r=[],s=Ts(),u=0,a=o;u<a.length;u++){var c=a[u];n.push(c.batchId);for(var h=0,f=c.mutations;h<f.length;h++)s=s.add(f[h].key)}for(var l=0,p=e;l<p.length;l++){var d=p[l];r.push(d.batchId);for(var v=0,y=d.mutations;v<y.length;v++)s=s.add(y[v].key)}return i.Xo(t,s).next((function(t){return{Ic:t,mc:n,Ac:r}}))}))}))];case 1:return o=s.sent(),[2,(n.zo=r,n.Tc=i,n._c.cc(n.Tc),o)]}}))}))}function hc(t,e){var n=qr(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Ec.Nr({Wr:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=mu.resolve();return o.forEach((function(t){s=s.next((function(){return r._i(e,t)})).next((function(e){var o=e,s=n.$s.get(t);Fr(null!==s),(!o||o.version._(s)<0)&&(o=i.Ss(t,o,n))&&r.ai(o,n.Ns)}))})),s.next((function(){return t.zo.Ci(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.zo.$i(t)})).next((function(){return n.Tc.Xo(t,r)}))}))}function fc(t){var e=qr(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e._o.Qi(t)}))}function lc(t,e){var n=qr(t),r=e.Ot,i=n.fc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Ec.Nr({Wr:!0});i=n.fc;var s=[];e.$e.forEach((function(e,o){var u=i.get(o);if(u){s.push(n._o.sr(t,e.Qe,o).next((function(){return n._o.er(t,e.qe,o)})));var a=e.resumeToken;if(a.l()>0){var c=u.Mt(a,r).kt(t.bs);i=i.zt(o,c),function(t,e,n){return Fr(e.resumeToken.l()>0),0===t.resumeToken.l()||e.Ot.W()-t.Ot.W()>=3e8||n.qe.size+n.Ue.size+n.Qe.size>0}(u,c,e)&&s.push(n._o.Hi(t,c))}}}));var u=gs();if(e.Oe.forEach((function(r,i){e.ke.has(r)&&s.push(n.persistence.Ti.Fr(t,r))})),s.push(pc(t,o,e.Oe,r,void 0).next((function(t){u=t}))),!r.isEqual(oi.min())){var a=n._o.Qi(t).next((function(e){return n._o.Wi(t,t.bs,r)}));s.push(a)}return mu.Mn(s).next((function(){return o.apply(t)})).next((function(){return n.Tc.Zo(t,u)}))})).then((function(t){return n.fc=i,t}))}function pc(t,e,n,r,i){var o=Ts();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=gs();return n.forEach((function(n,s){var u=t.get(n),a=(null==i?void 0:i.get(n))||r;s instanceof qi&&s.version.isEqual(oi.min())?(e.li(n,a),o=o.zt(n,s)):null==u||s.version._(u.version)>0||0===s.version._(u.version)&&u.hasPendingWrites?(e.ai(s,a),o=o.zt(n,s)):Rr("LocalStore","Ignoring outdated watch update for ",n,". Current version:",u.version," Watch version:",s.version)})),o}))}function dc(t,e){var n=qr(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.zo.gi(t,e)}))}function vc(t,e){var n=qr(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n._o.tr(t,e).next((function(i){return i?mu.resolve(r=i):n._o.Bi(t).next((function(i){return r=new xo(e,i,0,t.bs),n._o.ji(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.fc.get(t.targetId);return(null===r||t.Ot._(r.Ot)>0)&&(n.fc=n.fc.zt(t.targetId,t),n.dc.set(e,t.targetId)),t}))}function yc(t,e,n){return Object(Sr.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(Sr.d)(this,(function(u){switch(u.label){case 0:r=qr(t),i=r.fc.get(e),o=n?"readwrite":"readwrite-primary",u.label=1;case 1:return u.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.Ti.removeTarget(t,i)}))];case 2:u.sent(),u.label=3;case 3:return[3,5];case 4:if(!Ou(s=u.sent()))throw s;return Rr("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.fc=r.fc.remove(e),r.dc.delete(i.target),[2]}}))}))}function bc(t,e,n){var r=qr(t),i=oi.min(),o=Ts();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=qr(t),i=r.dc.get(n);return void 0!==i?mu.resolve(r.fc.get(i)):r._o.tr(e,n)}(r,t,mo(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r._o.rr(t,e.targetId).next((function(t){o=t}))})).next((function(){return r._c.Kr(t,e,n?i:oi.min(),n?o:Ts())})).next((function(t){return{documents:t,Rc:o}}))}))}function gc(t,e){var n=qr(t),r=qr(n._o),i=n.fc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Sn(t,e).next((function(t){return t?t.target:null}))}))}function mc(t){var e=qr(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=qr(t),i=gs(),o=ua(n),s=Ka(e),u=IDBKeyRange.lowerBound(o,!0);return s.hs({index:Gu.readTimeIndex,range:u},(function(t,e){var n=oa(r.Qt,e);i=i.zt(n.key,n),o=e.readTime})).next((function(){return{Go:i,readTime:aa(o)}}))}(e.Ec,t,e.wc)})).then((function(t){var n=t.Go;return e.wc=t.readTime,n}))}function wc(t){return Object(Sr.b)(this,void 0,void 0,(function(){var e;return Object(Sr.d)(this,(function(n){return[2,(e=qr(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Ka(t),n=oi.min();return e.hs({index:Gu.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=aa(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.wc=t}))]}))}))}function _c(t,e,n,r){return Object(Sr.b)(this,void 0,void 0,(function(){var i,o,s,u,a,c,h,f,l,p;return Object(Sr.d)(this,(function(d){switch(d.label){case 0:for(i=qr(t),o=Ts(),s=gs(),u=Es(),a=0,c=n;a<c.length;a++)f=e.Pc((h=c[a]).metadata.name),h.document&&(o=o.add(f)),s=s.zt(f,e.yc(h)),u=u.zt(f,e.gc(h.metadata.readTime));return l=i.Ec.Nr({Wr:!0}),[4,vc(i,function(t){return mo(fo(ui.ot("__bundle__/docs/"+t)))}(r))];case 1:return p=d.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return pc(t,l,s,oi.min(),u).next((function(e){return l.apply(t),e})).next((function(e){return i._o.Yi(t,p.targetId).next((function(){return i._o.er(t,o,p.targetId)})).next((function(){return i.Tc.Zo(t,e)}))}))}))]}}))}))}function Ic(t,e,n){return void 0===n&&(n=Ts()),Object(Sr.b)(this,void 0,void 0,(function(){var r,i;return Object(Sr.d)(this,(function(o){switch(o.label){case 0:return[4,vc(t,mo(da(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=qr(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=Hs(e.readTime);if(r.Ot._(o)>=0)return i.wo.Ls(t,e);var s=r.Mt(Yr.T,o);return i.fc=i.fc.zt(s.targetId,s),i._o.Hi(t,s).next((function(){return i._o.Yi(t,r.targetId)})).next((function(){return i._o.er(t,n,r.targetId)})).next((function(){return i.wo.Ls(t,e)}))}))]}}))}))}var Ec=function(){function t(t){this.Qt=t,this.Vc=new Map,this.bc=new Map}return t.prototype.Os=function(t,e){return mu.resolve(this.Vc.get(e))},t.prototype.ks=function(t,e){var n;return this.Vc.set(e.id,{id:(n=e).id,version:n.version,createTime:Hs(n.createTime)}),mu.resolve()},t.prototype.Ms=function(t,e){return mu.resolve(this.bc.get(e))},t.prototype.Ls=function(t,e){return this.bc.set(e.name,function(t){return{name:t.name,query:da(t.bundledQuery),readTime:Hs(t.readTime)}}(e)),mu.resolve()},t}(),Oc=function(){function t(){this.vc=new vs(Tc.Sc),this.Dc=new vs(Tc.Cc)}return t.prototype.et=function(){return this.vc.et()},t.prototype.nr=function(t,e){var n=new Tc(t,e);this.vc=this.vc.add(n),this.Dc=this.Dc.add(n)},t.prototype.xc=function(t,e){var n=this;t.forEach((function(t){return n.nr(t,e)}))},t.prototype.ir=function(t,e){this.Nc(new Tc(t,e))},t.prototype.$c=function(t,e){var n=this;t.forEach((function(t){return n.ir(t,e)}))},t.prototype.Fc=function(t){var e=this,n=new hi(new ui([])),r=new Tc(n,t),i=new Tc(n,t+1),o=[];return this.Dc.me([r,i],(function(t){e.Nc(t),o.push(t.key)})),o},t.prototype.Oc=function(){var t=this;this.vc.forEach((function(e){return t.Nc(e)}))},t.prototype.Nc=function(t){this.vc=this.vc.delete(t),this.Dc=this.Dc.delete(t)},t.prototype.kc=function(t){var e=new hi(new ui([])),n=new Tc(e,t),r=new Tc(e,t+1),i=Ts();return this.Dc.me([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Fi=function(t){var e=new Tc(t,0),n=this.vc.Re(e);return null!==n&&t.isEqual(n.key)},t}(),Tc=function(){function t(t,e){this.key=t,this.Mc=e}return t.Sc=function(t,e){return hi.H(t.key,e.key)||Gr(t.Mc,e.Mc)},t.Cc=function(t,e){return Gr(t.Mc,e.Mc)||hi.H(t.key,e.key)},t}(),jc=function(){function t(t,e){this.Ei=t,this.Ti=e,this.zo=[],this.Lc=1,this.Bc=new vs(Tc.Sc)}return t.prototype.Ai=function(t){return mu.resolve(0===this.zo.length)},t.prototype.Ri=function(t,e,n,r){var i=this.Lc;this.Lc++;var o=new na(i,e,n,r);this.zo.push(o);for(var s=0,u=r;s<u.length;s++){var a=u[s];this.Bc=this.Bc.add(new Tc(a.key,i)),this.Ei.qs(t,a.key.path.X())}return mu.resolve(o)},t.prototype.Pi=function(t,e){return mu.resolve(this.qc(e))},t.prototype.gi=function(t,e){var n=this.Uc(e+1),r=n<0?0:n;return mu.resolve(this.zo.length>r?this.zo[r]:null)},t.prototype.Vi=function(){return mu.resolve(0===this.zo.length?-1:this.Lc-1)},t.prototype.pi=function(t){return mu.resolve(this.zo.slice())},t.prototype.bi=function(t,e){var n=this,r=new Tc(e,0),i=new Tc(e,Number.POSITIVE_INFINITY),o=[];return this.Bc.me([r,i],(function(t){var e=n.qc(t.Mc);o.push(e)})),mu.resolve(o)},t.prototype.vi=function(t,e){var n=this,r=new vs(Gr);return e.forEach((function(t){var e=new Tc(t,0),i=new Tc(t,Number.POSITIVE_INFINITY);n.Bc.me([e,i],(function(t){r=r.add(t.Mc)}))})),mu.resolve(this.Qc(r))},t.prototype.Di=function(t,e){var n=e.path,r=n.length+1,i=n;hi.wt(i)||(i=i.child(""));var o=new Tc(new hi(i),0),s=new vs(Gr);return this.Bc.Ae((function(t){var e=t.key.path;return!!n.nt(e)&&(e.length===r&&(s=s.add(t.Mc)),!0)}),o),mu.resolve(this.Qc(s))},t.prototype.Qc=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.qc(t);null!==r&&n.push(r)})),n},t.prototype.Ci=function(t,e){var n=this;Fr(0===this.Kc(e.batchId,"removed")),this.zo.shift();var r=this.Bc;return mu.forEach(e.mutations,(function(i){var o=new Tc(i.key,e.batchId);return r=r.delete(o),n.Ti.Ni(t,i.key)})).next((function(){n.Bc=r}))},t.prototype.xi=function(t){},t.prototype.Fi=function(t,e){var n=new Tc(e,0),r=this.Bc.Re(n);return mu.resolve(e.isEqual(r&&r.key))},t.prototype.$i=function(t){return mu.resolve()},t.prototype.Kc=function(t,e){return this.Uc(t)},t.prototype.Uc=function(t){return 0===this.zo.length?0:t-this.zo[0].batchId},t.prototype.qc=function(t){var e=this.Uc(t);return e<0||e>=this.zo.length?null:this.zo[e]},t}(),xc=function(){function t(t,e){this.Ei=t,this.Wc=e,this.docs=new ls(hi.H),this.size=0}return t.prototype.ai=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.Wc(e);return this.docs=this.docs.zt(r,{hi:e,size:s,readTime:n}),this.size+=s-o,this.Ei.qs(t,r.path.X())},t.prototype.li=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype._i=function(t,e){var n=this.docs.get(e);return mu.resolve(n?n.hi:null)},t.prototype.getEntries=function(t,e){var n=this,r=ms();return e.forEach((function(t){var e=n.docs.get(t);r=r.zt(t,e?e.hi:null)})),mu.resolve(r)},t.prototype.Kr=function(t,e,n){for(var r=_s(),i=new hi(e.path.child("")),o=this.docs.ee(i);o.ce();){var s=o.oe(),u=s.value,a=u.hi,c=u.readTime;if(!e.path.nt(s.key.path))break;c._(n)<=0||a instanceof Fi&&Oo(e,a)&&(r=r.zt(a.key,a))}return mu.resolve(r)},t.prototype.jc=function(t,e){return mu.forEach(this.docs,(function(t){return e(t)}))},t.prototype.Nr=function(t){return new Nc(this)},t.prototype.Or=function(t){return mu.resolve(this.size)},t}(),Nc=function(t){function e(e){var n=this;return(n=t.call(this)||this).jr=e,n}return Object(Sr.c)(e,t),e.prototype.wi=function(t){var e=this,n=[];return this.ri.forEach((function(r,i){i&&i.hi?n.push(e.jr.ai(t,i.hi,e.ci(r))):e.jr.li(r)})),mu.Mn(n)},e.prototype.fi=function(t,e){return this.jr._i(t,e)},e.prototype.di=function(t,e){return this.jr.getEntries(t,e)},e}(ja),Ac=function(){function t(t){this.persistence=t,this.Gc=new Ta((function(t){return Bi(t)}),Hi),this.lastRemoteSnapshotVersion=oi.min(),this.highestTargetId=0,this.zc=0,this.Hc=new Oc,this.targetCount=0,this.Jc=Ca.Mi()}return t.prototype.In=function(t,e){return this.Gc.forEach((function(t,n){return e(n)})),mu.resolve()},t.prototype.Qi=function(t){return mu.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Ki=function(t){return mu.resolve(this.zc)},t.prototype.Bi=function(t){return this.highestTargetId=this.Jc.next(),mu.resolve(this.highestTargetId)},t.prototype.Wi=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.zc&&(this.zc=e),mu.resolve()},t.prototype.Gi=function(t){this.Gc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Jc=new Ca(e),this.highestTargetId=e),t.sequenceNumber>this.zc&&(this.zc=t.sequenceNumber)},t.prototype.ji=function(t,e){return this.Gi(e),this.targetCount+=1,mu.resolve()},t.prototype.Hi=function(t,e){return this.Gi(e),mu.resolve()},t.prototype.Ji=function(t,e){return this.Gc.delete(e.target),this.Hc.Fc(e.targetId),this.targetCount-=1,mu.resolve()},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return this.Gc.forEach((function(s,u){u.sequenceNumber<=e&&null===n.get(u.targetId)&&(r.Gc.delete(s),o.push(r.Yi(t,u.targetId)),i++)})),mu.Mn(o).next((function(){return i}))},t.prototype.Zi=function(t){return mu.resolve(this.targetCount)},t.prototype.tr=function(t,e){var n=this.Gc.get(e)||null;return mu.resolve(n)},t.prototype.er=function(t,e,n){return this.Hc.xc(e,n),mu.resolve()},t.prototype.sr=function(t,e,n){this.Hc.$c(e,n);var r=this.persistence.Ti,i=[];return r&&e.forEach((function(e){i.push(r.Ni(t,e))})),mu.Mn(i)},t.prototype.Yi=function(t,e){return this.Hc.Fc(e),mu.resolve()},t.prototype.rr=function(t,e){var n=this.Hc.kc(e);return mu.resolve(n)},t.prototype.Fi=function(t,e){return mu.resolve(this.Hc.Fi(e))},t}(),Sc=function(){function t(t,e){var n=this;this.Yc={},this.so=new ri(0),this.io=!1,this.io=!0,this.Ti=t(this),this._o=new Ac(this),this.Ei=new ga,this.fo=function(t,e){return new xc(t,(function(t){return n.Ti.Xc(t)}))}(this.Ei),this.Qt=new ia(e),this.wo=new Ec(this.Qt)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.ko=function(){return this.io=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Po=function(){},t.prototype.yo=function(){},t.prototype.Ko=function(){return this.Ei},t.prototype.Qo=function(t){var e=this.Yc[t.A()];return e||(e=new jc(this.Ei,this.Ti),this.Yc[t.A()]=e),e},t.prototype.Sr=function(){return this._o},t.prototype.$r=function(){return this.fo},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r=this;Rr("MemoryPersistence","Starting transaction:",t);var i=new Pc(this.so.next());return this.Ti.Zc(),n(i).next((function(t){return r.Ti.ta(i).next((function(){return t}))})).On().then((function(t){return i.Vs(),t}))},t.prototype.ea=function(t,e){return mu.Ln(Object.values(this.Yc).map((function(n){return function(){return n.Fi(t,e)}})))},t}(),Pc=function(t){function e(e){var n=this;return(n=t.call(this)||this).bs=e,n}return Object(Sr.c)(e,t),e}(Du),Dc=function(){function t(t){this.persistence=t,this.na=new Oc,this.sa=null}return t.ia=function(e){return new t(e)},Object.defineProperty(t.prototype,"ra",{get:function(){if(this.sa)return this.sa;throw Ur()},enumerable:!1,configurable:!0}),t.prototype.nr=function(t,e,n){return this.na.nr(n,e),this.ra.delete(n.toString()),mu.resolve()},t.prototype.ir=function(t,e,n){return this.na.ir(n,e),this.ra.add(n.toString()),mu.resolve()},t.prototype.Ni=function(t,e){return this.ra.add(e.toString()),mu.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.na.Fc(e.targetId).forEach((function(t){return n.ra.add(t.toString())}));var r=this.persistence.Sr();return r.rr(t,e.targetId).next((function(t){t.forEach((function(t){return n.ra.add(t.toString())}))})).next((function(){return r.Ji(t,e)}))},t.prototype.Zc=function(){this.sa=new Set},t.prototype.ta=function(t){var e=this,n=this.persistence.$r().Nr();return mu.forEach(this.ra,(function(r){var i=hi._t(r);return e.oa(t,i).next((function(t){t||n.li(i)}))})).next((function(){return e.sa=null,n.apply(t)}))},t.prototype.Fr=function(t,e){var n=this;return this.oa(t,e).next((function(t){t?n.ra.delete(e.toString()):n.ra.add(e.toString())}))},t.prototype.Xc=function(t){return 0},t.prototype.oa=function(t,e){var n=this;return mu.Ln([function(){return mu.resolve(n.na.Fi(e))},function(){return n.persistence.Sr().Fi(t,e)},function(){return n.persistence.ea(t,e)}])},t}();function kc(t,e){return"firestore_clients_"+t+"_"+e}function Cc(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.m()&&(r+="_"+e.uid),r}function Rc(t,e){return"firestore_targets_"+t+"_"+e}var Mc=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.ca=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Xr(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Mr("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Vc=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.ca=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Xr(i.error.code,i.error.message)),o?new t(e,i.state,r):(Mr("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Lc=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.ca=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=xs(),s=0;i&&s<r.activeTargetIds.length;++s)i=Ei(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Mr("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Uc=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.ca=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Mr("SharedClientState","Failed to parse online state: "+e),null)},t}(),Fc=function(){function t(){this.activeTargetIds=xs()}return t.prototype.ua=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.aa=function(){var t={activeTargetIds:this.activeTargetIds.it(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),qc=function(){function t(t,e,n,r,i){this.window=t,this.Zr=e,this.persistenceKey=n,this.la=r,this._a=null,this.fa=null,this.k=null,this.da=this.wa.bind(this),this.Ea=new ls(Gr),this.Er=!1,this.Ta=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ia=kc(this.persistenceKey,this.la),this.ma=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ea=this.Ea.zt(this.la,new Fc),this.Aa=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Ra=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Pa=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.ya=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.ga=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.da)}return t.Kn=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(Sr.b)(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,u,a,c,h=this;return Object(Sr.d)(this,(function(f){switch(f.label){case 0:return[4,this._a.Uo()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.la&&(i=this.getItem(kc(this.persistenceKey,r)))&&(o=Lc.ca(r,i))&&(this.Ea=this.Ea.zt(o.clientId,o));for(this.Va(),(s=this.storage.getItem(this.ya))&&(u=this.pa(s))&&this.ba(u),a=0,c=this.Ta;a<c.length;a++)this.wa(c[a]);return this.Ta=[],this.window.addEventListener("unload",(function(){return h.ko()})),this.Er=!0,[2]}}))}))},t.prototype.B=function(t){this.setItem(this.ma,JSON.stringify(t))},t.prototype.va=function(){return this.Sa(this.Ea)},t.prototype.Da=function(t){var e=!1;return this.Ea.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.Ca=function(t){this.xa(t,"pending")},t.prototype.Na=function(t,e,n){this.xa(t,e,n),this.$a(t)},t.prototype.Fa=function(t){var e="not-current";if(this.Da(t)){var n=this.storage.getItem(Rc(this.persistenceKey,t));if(n){var r=Vc.ca(t,n);r&&(e=r.state)}}return this.Oa.ua(t),this.Va(),e},t.prototype.ka=function(t){this.Oa.ha(t),this.Va()},t.prototype.Ma=function(t){return this.Oa.activeTargetIds.has(t)},t.prototype.La=function(t){this.removeItem(Rc(this.persistenceKey,t))},t.prototype.Ba=function(t,e,n){this.qa(t,e,n)},t.prototype.Ua=function(t,e,n){var r=this;e.forEach((function(t){r.$a(t)})),this.currentUser=t,n.forEach((function(t){r.Ca(t)}))},t.prototype.Qa=function(t){this.Ka(t)},t.prototype.Wa=function(){this.ja()},t.prototype.ko=function(){this.Er&&(this.window.removeEventListener("storage",this.da),this.removeItem(this.Ia),this.Er=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Rr("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Rr("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Rr("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.wa=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Rr("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ia)return void Mr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Zr.po((function(){return Object(Sr.b)(e,void 0,void 0,(function(){var t,e,r,i,o,s;return Object(Sr.d)(this,(function(u){if(this.Er){if(null!==n.key)if(this.Aa.test(n.key)){if(null==n.newValue)return t=this.Ga(n.key),[2,this.za(t,null)];if(e=this.Ha(n.key,n.newValue))return[2,this.za(e.clientId,e)]}else if(this.Ra.test(n.key)){if(null!==n.newValue&&(r=this.Ja(n.key,n.newValue)))return[2,this.Ya(r)]}else if(this.Pa.test(n.key)){if(null!==n.newValue&&(i=this.Xa(n.key,n.newValue)))return[2,this.Za(i)]}else if(n.key===this.ya){if(null!==n.newValue&&(o=this.pa(n.newValue)))return[2,this.ba(o)]}else if(n.key===this.ma)(s=function(t){var e=ri.q;if(null!=t)try{var n=JSON.parse(t);Fr("number"==typeof n),e=n}catch(t){Mr("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==ri.q&&this.k(s);else if(n.key===this.ga)return[2,this._a.tu()]}else this.Ta.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Oa",{get:function(){return this.Ea.get(this.la)},enumerable:!1,configurable:!0}),t.prototype.Va=function(){this.setItem(this.Ia,this.Oa.aa())},t.prototype.xa=function(t,e,n){var r=new Mc(this.currentUser,t,e,n),i=Cc(this.persistenceKey,this.currentUser,t);this.setItem(i,r.aa())},t.prototype.$a=function(t){var e=Cc(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Ka=function(t){this.storage.setItem(this.ya,JSON.stringify({clientId:this.la,onlineState:t}))},t.prototype.qa=function(t,e,n){var r=Rc(this.persistenceKey,t),i=new Vc(t,e,n);this.setItem(r,i.aa())},t.prototype.ja=function(){this.setItem(this.ga,"value-not-used")},t.prototype.Ga=function(t){var e=this.Aa.exec(t);return e?e[1]:null},t.prototype.Ha=function(t,e){var n=this.Ga(t);return Lc.ca(n,e)},t.prototype.Ja=function(t,e){var n=this.Ra.exec(t),r=Number(n[1]);return Mc.ca(new Jr(void 0!==n[2]?n[2]:null),r,e)},t.prototype.Xa=function(t,e){var n=this.Pa.exec(t),r=Number(n[1]);return Vc.ca(r,e)},t.prototype.pa=function(t){return Uc.ca(t)},t.prototype.Ya=function(t){return Object(Sr.b)(this,void 0,void 0,(function(){return Object(Sr.d)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this._a.eu(t.batchId,t.state,t.error)]:(Rr("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.Za=function(t){return this._a.nu(t.targetId,t.state,t.error)},t.prototype.za=function(t,e){var n=this,r=e?this.Ea.zt(t,e):this.Ea.remove(t),i=this.Sa(this.Ea),o=this.Sa(r),s=[],u=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||u.push(t)})),this._a.su(s,u).then((function(){n.Ea=r}))},t.prototype.ba=function(t){this.Ea.get(t.clientId)&&this.fa(t.onlineState)},t.prototype.Sa=function(t){var e=xs();return t.forEach((function(t,n){e=e.Pe(n.activeTargetIds)})),e},t}(),zc=function(){function t(){this.iu=new Fc,this.ru={},this.fa=null,this.k=null}return t.prototype.Ca=function(t){},t.prototype.Na=function(t,e,n){},t.prototype.Fa=function(t){return this.iu.ua(t),this.ru[t]||"not-current"},t.prototype.Ba=function(t,e,n){this.ru[t]=e},t.prototype.ka=function(t){this.iu.ha(t)},t.prototype.Ma=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.La=function(t){delete this.ru[t]},t.prototype.va=function(){return this.iu.activeTargetIds},t.prototype.Da=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.start=function(){return this.iu=new Fc,Promise.resolve()},t.prototype.Ua=function(t,e,n){},t.prototype.Qa=function(t){},t.prototype.ko=function(){},t.prototype.B=function(t){},t.prototype.Wa=function(){},t}(),Qc=function(){function t(){}return t.prototype.ou=function(t){},t.prototype.ko=function(){},t}(),Gc=function(){function t(){var t=this;this.cu=function(){return t.au()},this.uu=function(){return t.hu()},this.lu=[],this._u()}return t.prototype.ou=function(t){this.lu.push(t)},t.prototype.ko=function(){window.removeEventListener("online",this.cu),window.removeEventListener("offline",this.uu)},t.prototype._u=function(){window.addEventListener("online",this.cu),window.addEventListener("offline",this.uu)},t.prototype.au=function(){Rr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(0)},t.prototype.hu=function(){Rr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(1)},t.Kn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Bc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Hc=function(){function t(t){this.fu=t.fu,this.du=t.du}return t.prototype.wu=function(t){this.Eu=t},t.prototype.Tu=function(t){this.Iu=t},t.prototype.onMessage=function(t){this.mu=t},t.prototype.close=function(){this.du()},t.prototype.send=function(t){this.fu(t)},t.prototype.Au=function(){this.Eu()},t.prototype.Ru=function(t){this.Iu(t)},t.prototype.Pu=function(t){this.mu(t)},t}(),Yc=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.i=e.i,n}return Object(Sr.c)(e,t),e.prototype.Su=function(t,e,n,r){return new Promise((function(i,o){var s=new Ar;s.listenOnce(jr.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case Tr.NO_ERROR:var e=s.getResponseJson();Rr("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Tr.TIMEOUT:Rr("Connection",'RPC "'+t+'" timed out'),o(new Xr(Kr.DEADLINE_EXCEEDED,"Request time out"));break;case Tr.HTTP_ERROR:var n=s.getStatus();if(Rr("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var u=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Kr).indexOf(e)>=0?e:Kr.UNKNOWN}(r.status);o(new Xr(u,r.message))}else o(new Xr(Kr.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Xr(Kr.UNAVAILABLE,"Connection failed."));break;default:Ur()}}finally{Rr("Connection",'RPC "'+t+'" completed.')}}));var u=JSON.stringify(r);s.send(e,"POST",u,n,15)}))},e.prototype.Cu=function(t,e){var n=[this.gu,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new wr,i=Ie(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.vu(o.initMessageHeaders,e),Object(A.t)()||Object(A.w)()||Object(A.q)()||Object(A.s)()||Object(A.x)()||Object(A.p)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Rr("Connection","Creating WebChannel: "+s,o);var u=r.createWebChannel(s,o),a=!1,c=!1,h=new Hc({fu:function(t){c?Rr("Connection","Not sending because WebChannel is closed:",t):(a||(Rr("Connection","Opening WebChannel transport."),u.open(),a=!0),Rr("Connection","WebChannel sending:",t),u.send(t))},du:function(){return u.close()}}),f=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(u,Nr.EventType.OPEN,(function(){c||Rr("Connection","WebChannel transport opened.")})),f(u,Nr.EventType.CLOSE,(function(){c||(c=!0,Rr("Connection","WebChannel transport closed"),h.Ru())})),f(u,Nr.EventType.ERROR,(function(t){c||(c=!0,Vr("Connection","WebChannel transport errored:",t),h.Ru(new Xr(Kr.UNAVAILABLE,"The operation could not be completed")))})),f(u,Nr.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];Fr(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Rr("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=os[t];if(void 0!==e)return fs(e)}(i),s=r.message;void 0===o&&(o=Kr.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,h.Ru(new Xr(o,s)),u.close()}else Rr("Connection","WebChannel received:",n),h.Pu(n)}})),f(i,xr.STAT_EVENT,(function(t){10===t.stat?Rr("Connection","Detected buffering proxy"):11===t.stat&&Rr("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Au()}),0),h},e}(function(){function t(t){this.yu=t,this.t=t.t,this.gu=(t.ssl?"https":"http")+"://"+t.host,this.Vu="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}return t.prototype.pu=function(t,e,n,r){var i=this.bu(t,e);Rr("RestConnection","Sending: ",i,n);var o={};return this.vu(o,r),this.Su(t,i,o,n).then((function(t){return Rr("RestConnection","Received: ",t),t}),(function(e){throw Vr("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Du=function(t,e,n,r){return this.pu(t,e,n,r)},t.prototype.vu=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.9",t["Content-Type"]="text/plain",e)for(var n in e.g)e.g.hasOwnProperty(n)&&(t[n]=e.g[n])},t.prototype.bu=function(t,e){return this.gu+"/v1/"+e+":"+Bc[t]},t}());function Kc(){return"undefined"!=typeof window?window:null}function Xc(){return"undefined"!=typeof document?document:null}function Wc(t){return new zs(t,!0)}var Jc=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Zr=t,this.fs=e,this.xu=n,this.Nu=r,this.$u=i,this.Fu=0,this.Ou=null,this.ku=Date.now(),this.reset()}return t.prototype.reset=function(){this.Fu=0},t.prototype.Mu=function(){this.Fu=this.$u},t.prototype.Lu=function(t){var e=this;this.cancel();var n=Math.floor(this.Fu+this.Bu()),r=Math.max(0,Date.now()-this.ku),i=Math.max(0,n-r);i>0&&Rr("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Fu+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ou=this.Zr.Tr(this.fs,i,(function(){return e.ku=Date.now(),t()})),this.Fu*=this.Nu,this.Fu<this.xu&&(this.Fu=this.xu),this.Fu>this.$u&&(this.Fu=this.$u)},t.prototype.qu=function(){null!==this.Ou&&(this.Ou.Rs(),this.Ou=null)},t.prototype.cancel=function(){null!==this.Ou&&(this.Ou.cancel(),this.Ou=null)},t.prototype.Bu=function(){return(Math.random()-.5)*this.Fu},t}(),Zc=function(){function t(t,e,n,r,i,o){this.Zr=t,this.Uu=n,this.Qu=r,this.Ku=i,this.listener=o,this.state=0,this.Wu=0,this.ju=null,this.stream=null,this.Gu=new Jc(t,e)}return t.prototype.zu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Hu=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Ju()},t.prototype.stop=function(){return Object(Sr.b)(this,void 0,void 0,(function(){return Object(Sr.d)(this,(function(t){switch(t.label){case 0:return this.zu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.Yu=function(){this.state=0,this.Gu.reset()},t.prototype.Xu=function(){var t=this;this.Hu()&&null===this.ju&&(this.ju=this.Zr.Tr(this.Uu,6e4,(function(){return t.Zu()})))},t.prototype.th=function(t){this.eh(),this.stream.send(t)},t.prototype.Zu=function(){return Object(Sr.b)(this,void 0,void 0,(function(){return Object(Sr.d)(this,(function(t){return this.Hu()?[2,this.close(0)]:[2]}))}))},t.prototype.eh=function(){this.ju&&(this.ju.cancel(),this.ju=null)},t.prototype.close=function(t,e){return Object(Sr.b)(this,void 0,void 0,(function(){return Object(Sr.d)(this,(function(n){switch(n.label){case 0:return this.eh(),this.Gu.cancel(),this.Wu++,3!==t?this.Gu.reset():e&&e.code===Kr.RESOURCE_EXHAUSTED?(Mr(e.toString()),Mr("Using maximum backoff delay to prevent overloading the backend."),this.Gu.Mu()):e&&e.code===Kr.UNAUTHENTICATED&&this.Ku.p(),null!==this.stream&&(this.nh(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Tu(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.nh=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.sh(this.Wu),n=this.Wu;this.Ku.getToken().then((function(e){t.Wu===n&&t.ih(e)}),(function(n){e((function(){var e=new Xr(Kr.UNKNOWN,"Fetching auth token failed: "+n.message);return t.rh(e)}))}))},t.prototype.ih=function(t){var e=this,n=this.sh(this.Wu);this.stream=this.oh(t),this.stream.wu((function(){n((function(){return e.state=2,e.listener.wu()}))})),this.stream.Tu((function(t){n((function(){return e.rh(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.Ju=function(){var t=this;this.state=4,this.Gu.Lu((function(){return Object(Sr.b)(t,void 0,void 0,(function(){return Object(Sr.d)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.rh=function(t){return Rr("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.sh=function(t){var e=this;return function(n){e.Zr.Ps((function(){return e.Wu===t?n():(Rr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),$c=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).Qt=i,s}return Object(Sr.c)(e,t),e.prototype.oh=function(t){return this.Qu.Cu("Listen",t)},e.prototype.onMessage=function(t){this.Gu.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Ur()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Bt?(Fr(void 0===e||"string"==typeof e),Yr.fromBase64String(e||"")):(Fr(void 0===e||e instanceof Uint8Array),Yr.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(u=e.targetChange.cause)&&function(t){var e=void 0===t.code?Kr.UNKNOWN:fs(t.code);return new Xr(e,t.message||"")}(u);n=new Rs(r,i,o,s||null)}else if("documentChange"in e){i=Ws(t,(r=e.documentChange).document.name),o=Hs(r.document.updateTime);var u=new Mi({mapValue:{fields:r.document.fields}}),a=(s=new Fi(i,o,u,{}),r.targetIds||[]);n=new ks(a,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=Ws(t,(r=e.documentDelete).document),o=r.readTime?Hs(r.readTime):oi.min(),u=new qi(i,o),n=new ks([],s=r.removedTargetIds||[],u.key,u);else if("documentRemove"in e)i=Ws(t,(r=e.documentRemove).document),n=new ks([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Ur();var c=e.filter;i=new cs(r=c.count||0),n=new Cs(o=c.targetId,i)}return n}(this.Qt,t),n=function(t){if(!("targetChange"in t))return oi.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?oi.min():e.readTime?Hs(e.readTime):oi.min()}(t);return this.listener.ah(e,n)},e.prototype.uh=function(t){var e={};e.database=$s(this.Qt),e.addTarget=function(t,e){var n,r=e.target;return(n=Yi(r)?{documents:ou(t,r)}:{query:su(t,r)}).targetId=e.targetId,e.resumeToken.l()>0?n.resumeToken=Gs(t,e.resumeToken):e.Ot._(oi.min())>0&&(n.readTime=Qs(t,e.Ot.j())),n}(this.Qt,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ur()}}(0,e.Ft);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.th(e)},e.prototype.hh=function(t){var e={};e.database=$s(this.Qt),e.removeTarget=t,this.th(e)},e}(Zc),th=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).Qt=i,s.lh=!1,s}return Object(Sr.c)(e,t),Object.defineProperty(e.prototype,"_h",{get:function(){return this.lh},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.lh=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.nh=function(){this.lh&&this.fh([])},e.prototype.oh=function(t){return this.Qu.Cu("Write",t)},e.prototype.onMessage=function(t){if(Fr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.lh){this.Gu.reset();var e=function(t,e){return t&&t.length>0?(Fr(void 0!==e),t.map((function(t){return function(t,e){var n=Hs(t.updateTime?t.updateTime:e);n.isEqual(oi.min())&&(n=Hs(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new Go(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=Hs(t.commitTime);return this.listener.dh(n,e)}return Fr(!t.writeResults||0===t.writeResults.length),this.lh=!0,this.listener.wh()},e.prototype.Eh=function(){var t={};t.database=$s(this.Qt),this.th(t)},e.prototype.fh=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return ru(e.Qt,t)}))};this.th(n)},e}(Zc),eh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Qu=n,i.Qt=r,i.Th=!1,i}return Object(Sr.c)(e,t),e.prototype.Ih=function(){if(this.Th)throw new Xr(Kr.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.pu=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then((function(i){return r.Qu.pu(t,e,n,i)})).catch((function(t){throw t.code===Kr.UNAUTHENTICATED&&r.credentials.p(),t}))},e.prototype.Du=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then((function(i){return r.Qu.Du(t,e,n,i)})).catch((function(t){throw t.code===Kr.UNAUTHENTICATED&&r.credentials.p(),t}))},e.prototype.terminate=function(){this.Th=!1},e}((function(){})),nh=function(){function t(t,e){this._s=t,this.fa=e,this.state="Unknown",this.mh=0,this.Ah=null,this.Rh=!0}return t.prototype.Ph=function(){var t=this;0===this.mh&&(this.yh("Unknown"),this.Ah=this._s.Tr("online_state_timeout",1e4,(function(){return t.Ah=null,t.gh("Backend didn't respond within 10 seconds."),t.yh("Offline"),Promise.resolve()})))},t.prototype.Vh=function(t){"Online"===this.state?this.yh("Unknown"):(this.mh++,this.mh>=1&&(this.ph(),this.gh("Connection failed 1 times. Most recent error: "+t.toString()),this.yh("Offline")))},t.prototype.set=function(t){this.ph(),this.mh=0,"Online"===t&&(this.Rh=!1),this.yh(t)},t.prototype.yh=function(t){t!==this.state&&(this.state=t,this.fa(t))},t.prototype.gh=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Rh?(Mr(e),this.Rh=!1):Rr("OnlineStateTracker",e)},t.prototype.ph=function(){null!==this.Ah&&(this.Ah.cancel(),this.Ah=null)},t}(),rh=function(t,e,n,r,i){var o=this;this.bh=t,this.Sh=e,this._s=n,this.Dh={},this.Ch=[],this.xh=new Map,this.Nh=new Set,this.$h=[],this.Fh=i,this.Fh.ou((function(t){n.Ps((function(){return Object(Sr.b)(o,void 0,void 0,(function(){return Object(Sr.d)(this,(function(t){switch(t.label){case 0:return lh(this)?(Rr("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(Sr.b)(this,void 0,void 0,(function(){var e;return Object(Sr.d)(this,(function(n){switch(n.label){case 0:return(e=qr(t)).Nh.add(4),[4,oh(e)];case 1:return n.sent(),e.Oh.set("Unknown"),e.Nh.delete(4),[4,ih(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Oh=new nh(n,r)};function ih(t){return Object(Sr.b)(this,void 0,void 0,(function(){var e,n;return Object(Sr.d)(this,(function(r){switch(r.label){case 0:if(!lh(t))return[3,4];e=0,n=t.$h,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function oh(t){return Object(Sr.b)(this,void 0,void 0,(function(){var e,n;return Object(Sr.d)(this,(function(r){switch(r.label){case 0:e=0,n=t.$h,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function sh(t,e){var n=qr(t);n.xh.has(e.targetId)||(n.xh.set(e.targetId,e),fh(n)?hh(n):xh(n).Hu()&&ah(n,e))}function uh(t,e){var n=qr(t),r=xh(n);n.xh.delete(e),r.Hu()&&ch(n,e),0===n.xh.size&&(r.Hu()?r.Xu():lh(n)&&n.Oh.set("Unknown"))}function ah(t,e){t.kh.on(e.targetId),xh(t).uh(e)}function ch(t,e){t.kh.on(e),xh(t).hh(e)}function hh(t){t.kh=new Vs({vn:function(e){return t.Dh.vn(e)},Sn:function(e){return t.xh.get(e)||null}}),xh(t).start(),t.Oh.Ph()}function fh(t){return lh(t)&&!xh(t).zu()&&t.xh.size>0}function lh(t){return 0===qr(t).Nh.size}function ph(t){t.kh=void 0}function dh(t){return Object(Sr.b)(this,void 0,void 0,(function(){return Object(Sr.d)(this,(function(e){return t.xh.forEach((function(e,n){ah(t,e)})),[2]}))}))}function vh(t,e){return Object(Sr.b)(this,void 0,void 0,(function(){return Object(Sr.d)(this,(function(n){return ph(t),fh(t)?(t.Oh.Vh(e),hh(t)):t.Oh.set("Unknown"),[2]}))}))}function yh(t,e,n){return Object(Sr.b)(this,void 0,void 0,(function(){var r,i,o;return Object(Sr.d)(this,(function(s){switch(s.label){case 0:if(t.Oh.set("Online"),!(e instanceof Rs&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(Sr.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object(Sr.d)(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.xh.has(o=i[r])?[4,t.Dh.Mh(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.xh.delete(o),t.kh.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Rr("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,bh(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof ks?t.kh.dn(e):e instanceof Cs?t.kh.Pn(e):t.kh.Tn(e),n.isEqual(oi.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,fc(t.bh)];case 8:return i=s.sent(),n._(i)>=0?[4,function(t,e){var n=t.kh.Vn(e);return n.$e.forEach((function(n,r){if(n.resumeToken.l()>0){var i=t.xh.get(r);i&&t.xh.set(r,i.Mt(n.resumeToken,e))}})),n.Fe.forEach((function(e){var n=t.xh.get(e);if(n){t.xh.set(e,n.Mt(Yr.T,n.Ot)),ch(t,e);var r=new xo(n.target,e,1,n.sequenceNumber);ah(t,r)}})),t.Dh.Lh(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Rr("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,bh(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function bh(t,e,n){return Object(Sr.b)(this,void 0,void 0,(function(){var r=this;return Object(Sr.d)(this,(function(i){switch(i.label){case 0:if(!Ou(e))throw e;return t.Nh.add(1),[4,oh(t)];case 1:return i.sent(),t.Oh.set("Offline"),n||(n=function(){return fc(t.bh)}),t._s.po((function(){return Object(Sr.b)(r,void 0,void 0,(function(){return Object(Sr.d)(this,(function(e){switch(e.label){case 0:return Rr("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Nh.delete(1),[4,ih(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function gh(t,e){return e().catch((function(n){return bh(t,n,e)}))}function mh(t){return Object(Sr.b)(this,void 0,void 0,(function(){var e,n,r,i,o;return Object(Sr.d)(this,(function(s){switch(s.label){case 0:e=qr(t),n=Nh(e),r=e.Ch.length>0?e.Ch[e.Ch.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return lh(t)&&t.Ch.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,dc(e.bh,r)];case 3:return null===(i=s.sent())?(0===e.Ch.length&&n.Xu(),[3,7]):(r=i.batchId,function(t,e){t.Ch.push(e);var n=Nh(t);n.Hu()&&n._h&&n.fh(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,bh(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return wh(e)&&_h(e),[2]}}))}))}function wh(t){return lh(t)&&!Nh(t).zu()&&t.Ch.length>0}function _h(t){Nh(t).start()}function Ih(t){return Object(Sr.b)(this,void 0,void 0,(function(){return Object(Sr.d)(this,(function(e){return Nh(t).Eh(),[2]}))}))}function Eh(t){return Object(Sr.b)(this,void 0,void 0,(function(){var e,n,r;return Object(Sr.d)(this,(function(i){for(e=Nh(t),n=0,r=t.Ch;n<r.length;n++)e.fh(r[n].mutations);return[2]}))}))}function Oh(t,e,n){return Object(Sr.b)(this,void 0,void 0,(function(){var r,i;return Object(Sr.d)(this,(function(o){switch(o.label){case 0:return r=t.Ch.shift(),i=ra.from(r,e,n),[4,gh(t,(function(){return t.Dh.Bh(i)}))];case 1:return o.sent(),[4,mh(t)];case 2:return o.sent(),[2]}}))}))}function Th(t,e){return Object(Sr.b)(this,void 0,void 0,(function(){return Object(Sr.d)(this,(function(n){switch(n.label){case 0:return e&&Nh(t)._h?[4,function(t,e){return Object(Sr.b)(this,void 0,void 0,(function(){var n,r;return Object(Sr.d)(this,(function(i){switch(i.label){case 0:return hs(r=e.code)&&r!==Kr.ABORTED?(n=t.Ch.shift(),Nh(t).Yu(),[4,gh(t,(function(){return t.Dh.qh(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,mh(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return wh(t)&&_h(t),[2]}}))}))}function jh(t,e){return Object(Sr.b)(this,void 0,void 0,(function(){var n;return Object(Sr.d)(this,(function(r){switch(r.label){case 0:return n=qr(t),e?(n.Nh.delete(2),[4,ih(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Nh.add(2),[4,oh(n)]);case 3:r.sent(),n.Oh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function xh(t){var e=this;return t.Uh||(t.Uh=function(t,e,n){var r=qr(t);return r.Ih(),new $c(e,r.Qu,r.credentials,r.Qt,n)}(t.Sh,t._s,{wu:dh.bind(null,t),Tu:vh.bind(null,t),ah:yh.bind(null,t)}),t.$h.push((function(n){return Object(Sr.b)(e,void 0,void 0,(function(){return Object(Sr.d)(this,(function(e){switch(e.label){case 0:return n?(t.Uh.Yu(),fh(t)?hh(t):t.Oh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Uh.stop()];case 2:e.sent(),ph(t),e.label=3;case 3:return[2]}}))}))}))),t.Uh}function Nh(t){var e=this;return t.Qh||(t.Qh=function(t,e,n){var r=qr(t);return r.Ih(),new th(e,r.Qu,r.credentials,r.Qt,n)}(t.Sh,t._s,{wu:Ih.bind(null,t),Tu:Th.bind(null,t),wh:Eh.bind(null,t),dh:Oh.bind(null,t)}),t.$h.push((function(n){return Object(Sr.b)(e,void 0,void 0,(function(){return Object(Sr.d)(this,(function(e){switch(e.label){case 0:return n?(t.Qh.Yu(),[4,mh(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qh.stop()];case 3:e.sent(),t.Ch.length>0&&(Rr("RemoteStore","Stopping write stream with "+t.Ch.length+" pending writes"),t.Ch=[]),e.label=4;case 4:return[2]}}))}))}))),t.Qh}var Ah=function(){this.Kh=void 0,this.listeners=[]},Sh=function(){this.queries=new Ta((function(t){return Io(t)}),_o),this.onlineState="Unknown",this.Wh=new Set};function Ph(t,e){return Object(Sr.b)(this,void 0,void 0,(function(){var n,r,i,o,s,u,a;return Object(Sr.d)(this,(function(c){switch(c.label){case 0:if(n=qr(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new Ah),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.jh(r)];case 2:return s.Kh=c.sent(),[3,4];case 3:return u=c.sent(),a=Su(u,"Initialization of query '"+Eo(e.query)+"' failed"),[2,void e.onError(a)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.Gh(n.onlineState),o.Kh&&e.zh(o.Kh)&&Rh(n),[2]}}))}))}function Dh(t,e){return Object(Sr.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(Sr.d)(this,(function(u){return n=qr(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.Hh(r))]:[2]}))}))}function kh(t,e){for(var n=qr(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],u=n.queries.get(s.query);if(u){for(var a=0,c=u.listeners;a<c.length;a++)c[a].zh(s)&&(r=!0);u.Kh=s}}r&&Rh(n)}function Ch(t,e,n){var r=qr(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Rh(t){t.Wh.forEach((function(t){t.next()}))}var Mh=function(){function t(t,e,n){this.query=t,this.Jh=e,this.Yh=!1,this.Xh=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.zh=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Ss(t.query,t.docs,t.Se,e,t.De,t.fromCache,t.Ce,!0)}var o=!1;return this.Yh?this.Zh(t)&&(this.Jh.next(t),o=!0):this.tl(t,this.onlineState)&&(this.el(t),o=!0),this.Xh=t,o},t.prototype.onError=function(t){this.Jh.error(t)},t.prototype.Gh=function(t){this.onlineState=t;var e=!1;return this.Xh&&!this.Yh&&this.tl(this.Xh,t)&&(this.el(this.Xh),e=!0),e},t.prototype.tl=function(t,e){return!t.fromCache||!(this.options.nl&&"Offline"!==e||t.docs.et()&&"Offline"!==e)},t.prototype.Zh=function(t){return t.docChanges.length>0||!!(t.Ce||this.Xh&&this.Xh.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.el=function(t){t=Ss.Ne(t.query,t.docs,t.De,t.fromCache),this.Yh=!0,this.Jh.next(t)},t}(),Vh=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.sl=function(){return"metadata"in this.payload},t}(),Lh=function(){function t(t){this.Qt=t}return t.prototype.Pc=function(t){return Ws(this.Qt,t)},t.prototype.yc=function(t){return t.metadata.exists?nu(this.Qt,t.document,!1):new qi(this.Pc(t.metadata.name),this.gc(t.metadata.readTime))},t.prototype.gc=function(t){return Hs(t)},t}();!function(){function t(t,e,n){this.il=t,this.bh=e,this.Qt=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.rl=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.ol=function(t){for(var e=new Map,n=new Lh(this.Qt),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.Pc(o.metadata.name),u=0,a=o.metadata.queries;u<a.length;u++){var c=a[u],h=(e.get(c)||Ts()).add(s);e.set(c,h)}}return e},t.prototype.complete=function(){return Object(Sr.b)(this,void 0,void 0,(function(){var t,e,n,r,i;return Object(Sr.d)(this,(function(o){switch(o.label){case 0:return[4,_c(this.bh,new Lh(this.Qt),this.documents,this.il.id)];case 1:t=o.sent(),e=this.ol(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,Ic(this.bh,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new rc(Object.assign({},this.progress),t))]}}))}))}}();var Uh=function(t){this.key=t},Fh=function(t){this.key=t},qh=function(){function t(t,e){this.query=t,this.cl=e,this.al=null,this.Be=!1,this.ul=Ts(),this.De=Ts(),this.hl=To(t),this.ll=new Ns(this.hl)}return Object.defineProperty(t.prototype,"_l",{get:function(){return this.cl},enumerable:!1,configurable:!0}),t.prototype.fl=function(t,e){var n=this,r=e?e.dl:new As,i=e?e.ll:this.ll,o=e?e.De:this.De,s=i,u=!1,a=lo(this.query)&&i.size===this.query.limit?i.last():null,c=po(this.query)&&i.size===this.query.limit?i.first():null;if(t.Xt((function(t,e){var h=i.get(t),f=e instanceof Fi?e:null;f&&(f=Oo(n.query,f)?f:null);var l=!!h&&n.De.has(h.key),p=!!f&&(f.Vt||n.De.has(f.key)&&f.hasCommittedMutations),d=!1;h&&f?h.data().isEqual(f.data())?l!==p&&(r.track({type:3,doc:f}),d=!0):n.wl(h,f)||(r.track({type:2,doc:f}),d=!0,(a&&n.hl(f,a)>0||c&&n.hl(f,c)<0)&&(u=!0)):!h&&f?(r.track({type:0,doc:f}),d=!0):h&&!f&&(r.track({type:1,doc:h}),d=!0,(a||c)&&(u=!0)),d&&(f?(s=s.add(f),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),lo(this.query)||po(this.query))for(;s.size>this.query.limit;){var h=lo(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{ll:s,dl:r,lc:u,De:o}},t.prototype.wl=function(t,e){return t.Vt&&e.hasCommittedMutations&&!e.Vt},t.prototype.wi=function(t,e,n){var r=this,i=this.ll;this.ll=t.ll,this.De=t.De;var o=t.dl.ve();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ur()}};return n(t)-n(e)}(t.type,e.type)||r.hl(t.doc,e.doc)})),this.El(n);var s=e?this.Tl():[],u=0===this.ul.size&&this.Be?1:0,a=u!==this.al;return this.al=u,0!==o.length||a?{snapshot:new Ss(this.query,t.ll,i,o,t.De,0===u,a,!1),Il:s}:{Il:s}},t.prototype.Gh=function(t){return this.Be&&"Offline"===t?(this.Be=!1,this.wi({ll:this.ll,dl:new As,De:this.De,lc:!1},!1)):{Il:[]}},t.prototype.ml=function(t){return!this.cl.has(t)&&!!this.ll.has(t)&&!this.ll.get(t).Vt},t.prototype.El=function(t){var e=this;t&&(t.qe.forEach((function(t){return e.cl=e.cl.add(t)})),t.Ue.forEach((function(t){})),t.Qe.forEach((function(t){return e.cl=e.cl.delete(t)})),this.Be=t.Be)},t.prototype.Tl=function(){var t=this;if(!this.Be)return[];var e=this.ul;this.ul=Ts(),this.ll.forEach((function(e){t.ml(e.key)&&(t.ul=t.ul.add(e.key))}));var n=[];return e.forEach((function(e){t.ul.has(e)||n.push(new Fh(e))})),this.ul.forEach((function(t){e.has(t)||n.push(new Uh(t))})),n},t.prototype.Al=function(t){this.cl=t.Rc,this.ul=Ts();var e=this.fl(t.documents);return this.wi(e,!0)},t.prototype.Rl=function(){return Ss.Ne(this.query,this.ll,this.De,0===this.al)},t}(),zh=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Qh=function(t){this.key=t,this.Pl=!1},Gh=function(){function t(t,e,n,r,i,o){this.bh=t,this.yl=e,this.gl=n,this.Vl=r,this.currentUser=i,this.pl=o,this.bl={},this.vl=new Ta((function(t){return Io(t)}),_o),this.Sl=new Map,this.Dl=new Set,this.Cl=new ls(hi.H),this.xl=new Map,this.Nl=new Oc,this.$l={},this.Fl=new Map,this.Ol=Ca.Li(),this.onlineState="Unknown",this.kl=void 0}return Object.defineProperty(t.prototype,"Ml",{get:function(){return!0===this.kl},enumerable:!1,configurable:!0}),t}();function Bh(t,e){return Object(Sr.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(Sr.d)(this,(function(u){switch(u.label){case 0:return n=_f(t),(i=n.vl.get(e))?(n.Vl.Fa(i.targetId),r=i.view.Rl(),[3,4]):[3,1];case 1:return[4,vc(n.bh,mo(e))];case 2:return o=u.sent(),s=n.Vl.Fa(o.targetId),[4,Hh(n,e,o.targetId,"current"===s)];case 3:r=u.sent(),n.Ml&&sh(n.yl,o),u.label=4;case 4:return[2,r]}}))}))}function Hh(t,e,n,r){return Object(Sr.b)(this,void 0,void 0,(function(){var i,o,s,u,a,c;return Object(Sr.d)(this,(function(h){switch(h.label){case 0:return t.Ll=function(e,n,r){return function(t,e,n,r){return Object(Sr.b)(this,void 0,void 0,(function(){var i,o,s;return Object(Sr.d)(this,(function(u){switch(u.label){case 0:return(i=e.view.fl(n)).lc?[4,bc(t.bh,e.query,!1).then((function(t){return e.view.fl(t.documents,i)}))]:[3,2];case 1:i=u.sent(),u.label=2;case 2:return o=r&&r.$e.get(e.targetId),s=e.view.wi(i,t.Ml,o),[2,(sf(t,e.targetId,s.Il),s.snapshot)]}}))}))}(t,e,n,r)},[4,bc(t.bh,e,!0)];case 1:return i=h.sent(),o=new qh(e,i.Rc),s=o.fl(i.documents),u=Ds.Le(n,r&&"Offline"!==t.onlineState),a=o.wi(s,t.Ml,u),sf(t,n,a.Il),c=new zh(e,n,o),[2,(t.vl.set(e,c),t.Sl.has(n)?t.Sl.get(n).push(e):t.Sl.set(n,[e]),a.snapshot)]}}))}))}function Yh(t,e){return Object(Sr.b)(this,void 0,void 0,(function(){var n,r,i;return Object(Sr.d)(this,(function(o){switch(o.label){case 0:return n=qr(t),r=n.vl.get(e),(i=n.Sl.get(r.targetId)).length>1?[2,(n.Sl.set(r.targetId,i.filter((function(t){return!_o(t,e)}))),void n.vl.delete(e))]:n.Ml?(n.Vl.ka(r.targetId),n.Vl.Da(r.targetId)?[3,2]:[4,yc(n.bh,r.targetId,!1).then((function(){n.Vl.La(r.targetId),uh(n.yl,r.targetId),rf(n,r.targetId)})).catch(Oa)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return rf(n,r.targetId),[4,yc(n.bh,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Kh(t,e,n){return Object(Sr.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(Sr.d)(this,(function(u){switch(u.label){case 0:r=If(t),u.label=1;case 1:return u.trys.push([1,5,,6]),[4,function(t,e){var n,r=qr(t),i=ii.now(),o=e.reduce((function(t,e){return t.add(e.key)}),Ts());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Tc.Xo(t,o).next((function(o){n=o;for(var s=[],u=0,a=e;u<a.length;u++){var c=a[u],h=Wo(c,n.get(c.key));null!=h&&s.push(new ts(c.key,h,Li(h.proto.mapValue),Bo.exists(!0)))}return r.zo.Ri(t,i,s,e)}))})).then((function(t){var e=t.xs(n);return{batchId:t.batchId,ri:e}}))}(r.bh,e)];case 2:return i=u.sent(),r.Vl.Ca(i.batchId),function(t,e,n){var r=t.$l[t.currentUser.A()];r||(r=new ls(Gr)),r=r.zt(e,n),t.$l[t.currentUser.A()]=r}(r,i.batchId,n),[4,cf(r,i.ri)];case 3:return u.sent(),[4,mh(r.yl)];case 4:return u.sent(),[3,6];case 5:return o=u.sent(),s=Su(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function Xh(t,e){return Object(Sr.b)(this,void 0,void 0,(function(){var n,r;return Object(Sr.d)(this,(function(i){switch(i.label){case 0:n=qr(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,lc(n.bh,e)];case 2:return r=i.sent(),e.$e.forEach((function(t,e){var r=n.xl.get(e);r&&(Fr(t.qe.size+t.Ue.size+t.Qe.size<=1),t.qe.size>0?r.Pl=!0:t.Ue.size>0?Fr(r.Pl):t.Qe.size>0&&(Fr(r.Pl),r.Pl=!1))})),[4,cf(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Oa(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Wh(t,e,n){var r=qr(t);if(r.Ml&&0===n||!r.Ml&&1===n){var i=[];r.vl.forEach((function(t,n){var r=n.view.Gh(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=qr(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Gh(e)&&(r=!0)})),r&&Rh(n)}(r.gl,e),i.length&&r.bl.ah(i),r.onlineState=e,r.Ml&&r.Vl.Qa(e)}}function Jh(t,e,n){return Object(Sr.b)(this,void 0,void 0,(function(){var r,i,o,s,u,a;return Object(Sr.d)(this,(function(c){switch(c.label){case 0:return(r=qr(t)).Vl.Ba(e,"rejected",n),i=r.xl.get(e),(o=i&&i.key)?(s=(s=new ls(hi.H)).zt(o,new qi(o,oi.min())),u=Ts().add(o),a=new Ps(oi.min(),new Map,new vs(Gr),s,u),[4,Xh(r,a)]):[3,2];case 1:return c.sent(),r.Cl=r.Cl.remove(o),r.xl.delete(e),af(r),[3,4];case 2:return[4,yc(r.bh,e,!1).then((function(){return rf(r,e,n)})).catch(Oa)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function Zh(t,e){return Object(Sr.b)(this,void 0,void 0,(function(){var n,r,i;return Object(Sr.d)(this,(function(o){switch(o.label){case 0:n=qr(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,hc(n.bh,e)];case 2:return i=o.sent(),nf(n,r,null),ef(n,r),n.Vl.Na(r,"acknowledged"),[4,cf(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Oa(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function $h(t,e,n){return Object(Sr.b)(this,void 0,void 0,(function(){var r,i;return Object(Sr.d)(this,(function(o){switch(o.label){case 0:r=qr(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=qr(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.zo.Pi(t,e).next((function(e){return Fr(null!==e),r=e.keys(),n.zo.Ci(t,e)})).next((function(){return n.zo.$i(t)})).next((function(){return n.Tc.Xo(t,r)}))}))}(r.bh,e)];case 2:return i=o.sent(),nf(r,e,n),ef(r,e),r.Vl.Na(e,"rejected",n),[4,cf(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Oa(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function tf(t,e){return Object(Sr.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(Sr.d)(this,(function(u){switch(u.label){case 0:lh((n=qr(t)).yl)||Rr("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,function(t){var e=qr(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.zo.Vi(t)}))}(n.bh)];case 2:return-1===(r=u.sent())?[2,void e.resolve()]:((i=n.Fl.get(r)||[]).push(e),n.Fl.set(r,i),[3,4]);case 3:return o=u.sent(),s=Su(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function ef(t,e){(t.Fl.get(e)||[]).forEach((function(t){t.resolve()})),t.Fl.delete(e)}function nf(t,e,n){var r=qr(t),i=r.$l[r.currentUser.A()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.$l[r.currentUser.A()]=i}}function rf(t,e,n){void 0===n&&(n=null),t.Vl.ka(e);for(var r=0,i=t.Sl.get(e);r<i.length;r++){var o=i[r];t.vl.delete(o),n&&t.bl.Bl(o,n)}t.Sl.delete(e),t.Ml&&t.Nl.Fc(e).forEach((function(e){t.Nl.Fi(e)||of(t,e)}))}function of(t,e){t.Dl.delete(e.path.rt());var n=t.Cl.get(e);null!==n&&(uh(t.yl,n),t.Cl=t.Cl.remove(e),t.xl.delete(n),af(t))}function sf(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Uh?(t.Nl.nr(o.key,e),uf(t,o)):o instanceof Fh?(Rr("SyncEngine","Document no longer in limbo: "+o.key),t.Nl.ir(o.key,e),t.Nl.Fi(o.key)||of(t,o.key)):Ur()}}function uf(t,e){var n=e.key,r=n.path.rt();t.Cl.get(n)||t.Dl.has(r)||(Rr("SyncEngine","New document in limbo: "+n),t.Dl.add(r),af(t))}function af(t){for(;t.Dl.size>0&&t.Cl.size<t.pl;){var e=t.Dl.values().next().value;t.Dl.delete(e);var n=new hi(ui.ot(e)),r=t.Ol.next();t.xl.set(r,new Qh(n)),t.Cl=t.Cl.zt(n,r),sh(t.yl,new xo(mo(fo(n.path)),r,2,ri.q))}}function cf(t,e,n){return Object(Sr.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(Sr.d)(this,(function(u){switch(u.label){case 0:return r=qr(t),i=[],o=[],s=[],r.vl.et()?[3,3]:(r.vl.forEach((function(t,u){s.push(r.Ll(u,e,n).then((function(t){if(t){r.Ml&&r.Vl.Ba(u.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=oc.oc(u.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return u.sent(),r.bl.ah(i),[4,function(t,e){return Object(Sr.b)(this,void 0,void 0,(function(){var n,r,i,o,s,u,a,c;return Object(Sr.d)(this,(function(h){switch(h.label){case 0:n=qr(t),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return mu.forEach(e,(function(e){return mu.forEach(e.ic,(function(r){return n.persistence.Ti.nr(t,e.targetId,r)})).next((function(){return mu.forEach(e.rc,(function(r){return n.persistence.Ti.ir(t,e.targetId,r)}))}))}))}))];case 2:return h.sent(),[3,4];case 3:if(!Ou(r=h.sent()))throw r;return Rr("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)u=(s=o[i]).targetId,s.fromCache||(a=n.fc.get(u),c=a.Lt(a.Ot),n.fc=n.fc.zt(u,c));return[2]}}))}))}(r.bh,o)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function hf(t,e){return Object(Sr.b)(this,void 0,void 0,(function(){var n,r;return Object(Sr.d)(this,(function(i){switch(i.label){case 0:return(n=qr(t)).currentUser.isEqual(e)?[3,3]:(Rr("SyncEngine","User change. New user:",e.A()),[4,cc(n.bh,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fl.forEach((function(t){t.forEach((function(t){t.reject(new Xr(Kr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Fl.clear()}(n),n.Vl.Ua(e,r.mc,r.Ac),[4,cf(n,r.Ic)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function ff(t,e){var n=qr(t),r=n.xl.get(e);if(r&&r.Pl)return Ts().add(r.key);var i=Ts(),o=n.Sl.get(e);if(!o)return i;for(var s=0,u=o;s<u.length;s++){var a=n.vl.get(u[s]);i=i.Pe(a.view._l)}return i}function lf(t,e){return Object(Sr.b)(this,void 0,void 0,(function(){var n,r,i;return Object(Sr.d)(this,(function(o){switch(o.label){case 0:return[4,bc((n=qr(t)).bh,e.query,!0)];case 1:return r=o.sent(),i=e.view.Al(r),[2,(n.Ml&&sf(n,e.targetId,i.Il),i)]}}))}))}function pf(t){return Object(Sr.b)(this,void 0,void 0,(function(){var e;return Object(Sr.d)(this,(function(n){return[2,mc((e=qr(t)).bh).then((function(t){return cf(e,t)}))]}))}))}function df(t,e,n,r){return Object(Sr.b)(this,void 0,void 0,(function(){var i,o;return Object(Sr.d)(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=qr(t),r=qr(n.zo);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.yi(t,e).next((function(e){return e?n.Tc.Xo(t,e):mu.resolve(null)}))}))}((i=qr(t)).bh,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,mh(i.yl)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(nf(i,e,r||null),ef(i,e),function(t,e){qr(qr(t).zo).xi(e)}(i.bh,e)):Ur(),s.label=4;case 4:return[4,cf(i,o)];case 5:return s.sent(),[3,7];case 6:Rr("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function vf(t,e){return Object(Sr.b)(this,void 0,void 0,(function(){var n,r,i,o,s,u,a;return Object(Sr.d)(this,(function(c){switch(c.label){case 0:return _f(n=qr(t)),If(n),!0!==e||!0===n.kl?[3,3]:(r=n.Vl.va(),[4,yf(n,r.it())]);case 1:return i=c.sent(),n.kl=!0,[4,jh(n.yl,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)sh(n.yl,s[o]);return[3,7];case 3:return!1!==e||!1===n.kl?[3,7]:(u=[],a=Promise.resolve(),n.Sl.forEach((function(t,e){n.Vl.Ma(e)?u.push(e):a=a.then((function(){return rf(n,e),yc(n.bh,e,!0)})),uh(n.yl,e)})),[4,a]);case 4:return c.sent(),[4,yf(n,u)];case 5:return c.sent(),function(t){var e=qr(t);e.xl.forEach((function(t,n){uh(e.yl,n)})),e.Nl.Oc(),e.xl=new Map,e.Cl=new ls(hi.H)}(n),n.kl=!1,[4,jh(n.yl,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}}))}))}function yf(t,e,n){return Object(Sr.b)(this,void 0,void 0,(function(){var n,r,i,o,s,u,a,c,h,f,l,p,d;return Object(Sr.d)(this,(function(v){switch(v.label){case 0:n=qr(t),r=[],i=[],o=0,s=e,v.label=1;case 1:return o<s.length?(a=void 0,(c=n.Sl.get(u=s[o]))&&0!==c.length?[4,vc(n.bh,mo(c[0]))]:[3,7]):[3,13];case 2:a=v.sent(),h=0,f=c,v.label=3;case 3:return h<f.length?(l=n.vl.get(f[h]),[4,lf(n,l)]):[3,6];case 4:(p=v.sent()).snapshot&&i.push(p.snapshot),v.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,gc(n.bh,u)];case 8:return d=v.sent(),[4,vc(n.bh,d)];case 9:return a=v.sent(),[4,Hh(n,bf(d),u,!1)];case 10:v.sent(),v.label=11;case 11:r.push(a),v.label=12;case 12:return o++,[3,1];case 13:return[2,(n.bl.ah(i),r)]}}))}))}function bf(t){return ho(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function gf(t){var e=qr(t);return qr(qr(e.bh).persistence).Uo()}function mf(t,e,n,r){return Object(Sr.b)(this,void 0,void 0,(function(){var i,o,s;return Object(Sr.d)(this,(function(u){switch(u.label){case 0:return(i=qr(t)).kl?(Rr("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Sl.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,mc(i.bh)];case 3:return o=u.sent(),s=Ps.Me(e,"current"===n),[4,cf(i,o,s)];case 4:return u.sent(),[3,8];case 5:return[4,yc(i.bh,e,!0)];case 6:return u.sent(),rf(i,e,r),[3,8];case 7:Ur(),u.label=8;case 8:return[2]}}))}))}function wf(t,e,n){return Object(Sr.b)(this,void 0,void 0,(function(){var r,i,o,s,u,a,c,h,f;return Object(Sr.d)(this,(function(l){switch(l.label){case 0:if(!(r=_f(t)).kl)return[3,10];i=0,o=e,l.label=1;case 1:return i<o.length?r.Sl.has(s=o[i])?(Rr("SyncEngine","Adding an already active target "+s),[3,5]):[4,gc(r.bh,s)]:[3,6];case 2:return u=l.sent(),[4,vc(r.bh,u)];case 3:return a=l.sent(),[4,Hh(r,bf(u),a.targetId,!1)];case 4:l.sent(),sh(r.yl,a),l.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(Sr.d)(this,(function(e){switch(e.label){case 0:return r.Sl.has(t)?[4,yc(r.bh,t,!1).then((function(){uh(r.yl,t),rf(r,t)})).catch(Oa)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,f=n,l.label=7;case 7:return h<f.length?[5,c(f[h])]:[3,10];case 8:l.sent(),l.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function _f(t){var e=qr(t);return e.yl.Dh.Lh=Xh.bind(null,e),e.yl.Dh.vn=ff.bind(null,e),e.yl.Dh.Mh=Jh.bind(null,e),e.bl.ah=kh.bind(null,e.gl),e.bl.Bl=Ch.bind(null,e.gl),e}function If(t){var e=qr(t);return e.yl.Dh.Bh=Zh.bind(null,e),e.yl.Dh.qh=$h.bind(null,e),e}var Ef=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(Sr.b)(this,void 0,void 0,(function(){return Object(Sr.d)(this,(function(e){switch(e.label){case 0:return this.Qt=Wc(t.yu.t),this.Vl=this.Wl(t),this.persistence=this.jl(t),[4,this.persistence.start()];case 1:return e.sent(),this.Gl=this.zl(t),this.bh=this.Hl(t),[2]}}))}))},t.prototype.zl=function(t){return null},t.prototype.Hl=function(t){return ac(this.persistence,new sc,t.Jl,this.Qt)},t.prototype.jl=function(t){return new Sc(Dc.ia,this.Qt)},t.prototype.Wl=function(t){return new zc},t.prototype.terminate=function(){return Object(Sr.b)(this,void 0,void 0,(function(){return Object(Sr.d)(this,(function(t){switch(t.label){case 0:return this.Gl&&this.Gl.stop(),[4,this.Vl.ko()];case 1:return t.sent(),[4,this.persistence.ko()];case 2:return t.sent(),[2]}}))}))},t}(),Of=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Yl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(Sr.c)(e,t),e.prototype.initialize=function(e){return Object(Sr.b)(this,void 0,void 0,(function(){return Object(Sr.d)(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,wc(this.bh)];case 2:return n.sent(),[4,this.Yl.initialize(this,e)];case 3:return n.sent(),[4,If(this.Yl._a)];case 4:return n.sent(),[4,mh(this.Yl.yl)];case 5:return n.sent(),[2]}}))}))},e.prototype.Hl=function(t){return ac(this.persistence,new sc,t.Jl,this.Qt)},e.prototype.zl=function(t){return new qa(this.persistence.Ti.lr,t._s)},e.prototype.jl=function(t){var e=nc(t.yu.t,t.yu.persistenceKey),n=void 0!==this.cacheSizeBytes?Ea.Ys(this.cacheSizeBytes):Ea.ti;return new $a(this.synchronizeTabs,e,t.clientId,n,t._s,Kc(),Xc(),this.Qt,this.Vl,!!this.forceOwnership)},e.prototype.Wl=function(t){return new zc},e}(Ef),Tf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Yl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(Sr.c)(e,t),e.prototype.initialize=function(e){return Object(Sr.b)(this,void 0,void 0,(function(){var n,r=this;return Object(Sr.d)(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Yl._a,this.Vl instanceof qc?(this.Vl._a={eu:df.bind(null,n),nu:mf.bind(null,n),su:wf.bind(null,n),Uo:gf.bind(null,n),tu:pf.bind(null,n)},[4,this.Vl.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.Ro((function(t){return Object(Sr.b)(r,void 0,void 0,(function(){return Object(Sr.d)(this,(function(e){switch(e.label){case 0:return[4,vf(this.Yl._a,t)];case 1:return e.sent(),this.Gl&&(t&&!this.Gl.Er?this.Gl.start(this.bh):t||this.Gl.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Wl=function(t){var e=Kc();if(!qc.Kn(e))throw new Xr(Kr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=nc(t.yu.t,t.yu.persistenceKey);return new qc(e,t._s,n,t.clientId,t.Jl)},e}(Of),jf=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(Sr.b)(this,void 0,void 0,(function(){var n=this;return Object(Sr.d)(this,(function(r){switch(r.label){case 0:return this.bh?[3,2]:(this.bh=t.bh,this.Vl=t.Vl,this.Sh=this.Xl(e),this.yl=this.Zl(e),this.gl=this.t_(e),this._a=this.e_(e,!t.synchronizeTabs),this.Vl.fa=function(t){return Wh(n._a,t,1)},this.yl.Dh.n_=hf.bind(null,this._a),[4,jh(this.yl,this._a.Ml)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.t_=function(t){return new Sh},t.prototype.Xl=function(t){var e=Wc(t.yu.t),n=new Yc(t.yu);return function(t,e,n){return new eh(t,e,n)}(t.credentials,n,e)},t.prototype.Zl=function(t){var e,n,r,i,o,s=this;return e=this.bh,n=this.Sh,r=t._s,i=function(t){return Wh(s._a,t,0)},o=Gc.Kn()?new Gc:new Qc,new rh(e,n,r,i,o)},t.prototype.e_=function(t,e){return function(t,e,n,r,i,o,s){var u=new Gh(t,e,n,r,i,o);return s&&(u.kl=!0),u}(this.bh,this.yl,this.gl,this.Vl,t.Jl,t.pl,e)},t.prototype.terminate=function(){return function(t){return Object(Sr.b)(this,void 0,void 0,(function(){var e;return Object(Sr.d)(this,(function(n){switch(n.label){case 0:return e=qr(t),Rr("RemoteStore","RemoteStore shutting down."),e.Nh.add(5),[4,oh(e)];case 1:return n.sent(),e.Fh.ko(),e.Oh.set("Unknown"),[2]}}))}))}(this.yl)},t}(),xf=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.s_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.s_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.i_=function(){this.muted=!0},t.prototype.s_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),Nf=(function(){function t(t,e){var n=this;this.r_=t,this.Qt=e,this.metadata=new gu,this.buffer=new Uint8Array,this.o_=new TextDecoder("utf-8"),this.c_().then((function(t){t&&t.sl()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}t.prototype.close=function(){return this.r_.cancel()},t.prototype.getMetadata=function(){return Object(Sr.b)(this,void 0,void 0,(function(){return Object(Sr.d)(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Ql=function(){return Object(Sr.b)(this,void 0,void 0,(function(){return Object(Sr.d)(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.c_())]}}))}))},t.prototype.c_=function(){return Object(Sr.b)(this,void 0,void 0,(function(){var t,e,n,r;return Object(Sr.d)(this,(function(i){switch(i.label){case 0:return[4,this.a_()];case 1:return null===(t=i.sent())?[2,null]:(e=this.o_.decode(t),n=Number(e),isNaN(n)&&this.u_("length string ("+e+") is not valid number"),[4,this.h_(n)]);case 2:return r=i.sent(),[2,new Vh(JSON.parse(r),t.length+n)]}}))}))},t.prototype.l_=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.a_=function(){return Object(Sr.b)(this,void 0,void 0,(function(){var t,e;return Object(Sr.d)(this,(function(n){switch(n.label){case 0:return this.l_()<0?[4,this.__()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.l_())<0&&this.u_("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.h_=function(t){return Object(Sr.b)(this,void 0,void 0,(function(){var e;return Object(Sr.d)(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.__()]:[3,3];case 1:n.sent()&&this.u_("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.o_.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.u_=function(t){throw this.r_.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.__=function(){return Object(Sr.b)(this,void 0,void 0,(function(){var t,e;return Object(Sr.d)(this,(function(n){switch(n.label){case 0:return[4,this.r_.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))}}(),function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Xr(Kr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.f_=new ci(t)}return t.prototype.isEqual=function(t){return this.f_.isEqual(t.f_)},t}()),Af=function(t){this._methodName=t},Sf=function(t){this.d_=t};function Pf(t,e,n){if(!n)throw new Xr(Kr.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Df(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Xr(Kr.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function kf(t,e,n,r){if(!0===e&&!0===r)throw new Xr(Kr.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Cf(t){if(!hi.wt(t))throw new Xr(Kr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Rf(t){if(hi.wt(t))throw new Xr(Kr.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Mf(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Ur()}function Vf(t,e){if("_delegate"in t&&(t=t.d_),!(t instanceof e)){if(e.name===t.constructor.name)throw new Xr(Kr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Mf(t);throw new Xr(Kr.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Lf(t,e){if(e<=0)throw new Xr(Kr.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Uf=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Xr(Kr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Xr(Kr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,kf("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Ff=new Map,qf=function(){function t(t,e){this.w_="(lite)",this.E_=new Uf({}),this.T_=!1,t instanceof Dr?(this.I_=t,this.m_=new $r):(this.A_=t,this.I_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Xr(Kr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Dr(t.options.projectId)}(t),this.m_=new ti(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.A_)throw new Xr(Kr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"P_",{get:function(){return void 0!==this.y_},enumerable:!1,configurable:!0}),t.prototype.g_=function(t){if(this.T_)throw new Xr(Kr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new Uf(t),void 0!==t.credentials&&(this.m_=function(t){if(!t)return new $r;switch(t.type){case"gapi":var e=t.client;return Fr(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new ni(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Xr(Kr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.V_=function(){return this.E_},t.prototype.p_=function(){return this.T_=!0,this.E_},t.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},t.prototype.toJSON=function(){return{app:this.A_,t:this.I_,settings:this.E_}},t.prototype.b_=function(){return(t=Ff.get(this))&&(Rr("ComponentProvider","Removing Datastore"),Ff.delete(this),t.terminate()),Promise.resolve();var t},t}(),zf=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Gf(this.firestore,this.v_,this.S_.path.X())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),Qf=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),Gf=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,fo(r))||this).firestore=e,i.D_=r,i.type="collection",i}return Object(Sr.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.C_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.C_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.D_.X();return t.et()?null:new zf(this.firestore,null,new hi(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.D_)},e}(Qf);function Bf(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Sf&&(t=t.d_),Pf("collection","path",e),t instanceof qf)return Rf(n=ui.ot.apply(ui,Object(Sr.g)([e],r))),new Gf(t,null,n);if(!(t instanceof zf||t instanceof Gf))throw new Xr(Kr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Rf(n=ui.ot.apply(ui,Object(Sr.g)([t.path],r)).child(ui.ot(e))),new Gf(t.firestore,null,n)}function Hf(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Sf&&(t=t.d_),1===arguments.length&&(e=Qr.u()),Pf("doc","path",e),t instanceof qf)return Cf(n=ui.ot.apply(ui,Object(Sr.g)([e],r))),new zf(t,null,new hi(n));if(!(t instanceof zf||t instanceof Gf))throw new Xr(Kr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Cf(n=t.D_.child(ui.ot.apply(ui,Object(Sr.g)([e],r)))),new zf(t.firestore,t instanceof Gf?t.v_:null,new hi(n))}function Yf(t,e){return t instanceof Sf&&(t=t.d_),e instanceof Sf&&(e=e.d_),(t instanceof zf||t instanceof Gf)&&(e instanceof zf||e instanceof Gf)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function Kf(t,e){return t instanceof Sf&&(t=t.d_),e instanceof Sf&&(e=e.d_),t instanceof Qf&&e instanceof Qf&&t.firestore===e.firestore&&_o(t.C_,e.C_)&&t.v_===e.v_}var Xf=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Xr(Kr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Xr(Kr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.U=function(t){return Gr(this.x_,t.x_)||Gr(this.N_,t.N_)},t}(),Wf=/^__.*__$/,Jf=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return null!==this.Gt?new ts(t,this.data,this.Gt,e,this.fieldTransforms):new $o(t,this.data,e,this.fieldTransforms)},t}(),Zf=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return new ts(t,this.data,this.Gt,e,this.fieldTransforms)},t}();function $f(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ur()}}var tl=function(){function t(t,e,n,r,i,o){this.settings=t,this.t=e,this.Qt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.Gt=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.t,this.Qt,this.ignoreUndefinedProperties,this.fieldTransforms,this.Gt)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.O_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return wl(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},t.prototype.contains=function(t){return void 0!==this.Gt.find((function(e){return t.nt(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.nt(e.field)}))},t.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if($f(this.k_)&&Wf.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),el=function(){function t(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.Qt=n||Wc(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new tl({k_:t,methodName:e,j_:n,path:ci.ct(),B_:!1,W_:r},this.t,this.Qt,this.ignoreUndefinedProperties)},t}();function nl(t){var e=t.p_(),n=Wc(t.I_);return new el(t.I_,!!e.ignoreUndefinedProperties,n)}function rl(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);yl("Data must be an object, but it was:",s,r);var u,a,c=dl(r,s);if(o.merge)u=new di(s.Gt),a=s.fieldTransforms;else if(o.mergeFields){for(var h=[],f=0,l=o.mergeFields;f<l.length;f++){var p=bl(e,l[f],n);if(!s.contains(p))throw new Xr(Kr.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");_l(h,p)||h.push(p)}u=new di(h),a=s.fieldTransforms.filter((function(t){return u.Tt(t.field)}))}else u=null,a=s.fieldTransforms;return new Jf(new Mi(c),u,a)}var il=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Sr.c)(e,t),e.prototype.z_=function(t){if(2!==t.k_)throw t.K_(1===t.k_?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.Gt.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Af);function ol(t,e,n){return new tl({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.t,e.Qt,e.ignoreUndefinedProperties)}var sl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Sr.c)(e,t),e.prototype.z_=function(t){return new Qo(t.path,new Ro)},e.prototype.isEqual=function(t){return t instanceof e},e}(Af),ul=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object(Sr.c)(e,t),e.prototype.z_=function(t){var e=ol(this,t,!0),n=this.H_.map((function(t){return pl(t,e)})),r=new Mo(n);return new Qo(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Af),al=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object(Sr.c)(e,t),e.prototype.z_=function(t){var e=ol(this,t,!0),n=this.H_.map((function(t){return pl(t,e)})),r=new Lo(n);return new Qo(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Af),cl=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return Object(Sr.c)(e,t),e.prototype.z_=function(t){var e=new Fo(t.Qt,So(t.Qt,this.J_));return new Qo(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Af);function hl(t,e,n,r){var i=t.G_(1,e,n);yl("Data must be an object, but it was:",i,r);var o=[],s=new Vi;li(r,(function(t,r){var u=ml(e,t,n);r instanceof Sf&&(r=r.d_);var a=i.U_(u);if(r instanceof il)o.push(u);else{var c=pl(r,a);null!=c&&(o.push(u),s.set(u,c))}}));var u=new di(o);return new Zf(s.Pt(),u,i.fieldTransforms)}function fl(t,e,n,r,i,o){var s=t.G_(1,e,n),u=[bl(e,r,n)],a=[i];if(o.length%2!=0)throw new Xr(Kr.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)u.push(bl(e,o[c])),a.push(o[c+1]);for(var h=[],f=new Vi,l=u.length-1;l>=0;--l)if(!_l(h,u[l])){var p=u[l],d=a[l];d instanceof Sf&&(d=d.d_);var v=s.U_(p);if(d instanceof il)h.push(p);else{var y=pl(d,v);null!=y&&(h.push(p),f.set(p,y))}}var b=new di(h);return new Zf(f.Pt(),b,s.fieldTransforms)}function ll(t,e,n,r){return void 0===r&&(r=!1),pl(n,t.G_(r?4:3,e))}function pl(t,e){if(t instanceof Sf&&(t=t.d_),vl(t))return yl("Unsupported field value:",e,t),dl(t,e);if(t instanceof Af)return function(t,e){if(!$f(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.Gt.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=pl(o[i],e.Q_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof Sf&&(t=t.d_),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return So(e.Qt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=ii.fromDate(t);return{timestampValue:Qs(e.Qt,n)}}if(t instanceof ii)return n=new ii(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Qs(e.Qt,n)};if(t instanceof Xf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Wr)return{bytesValue:Gs(e.Qt,t.I)};if(t instanceof zf){var r=t.firestore.I_;if(!r.isEqual(n=e.t))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Ys(t.firestore.I_||e.t,t.S_.path)}}throw e.K_("Unsupported field value: "+Mf(t))}(t,e)}function dl(t,e){var n={};return pi(t)?e.path&&e.path.length>0&&e.Gt.push(e.path):li(t,(function(t,r){var i=pl(r,e.L_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function vl(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof ii||t instanceof Xf||t instanceof Wr||t instanceof zf||t instanceof Af)}function yl(t,e,n){if(!vl(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Mf(n);throw e.K_("an object"===r?t+" a custom object":t+" "+r)}}function bl(t,e,n){if(e instanceof Sf&&(e=e.d_),e instanceof Nf)return e.f_;if("string"==typeof e)return ml(t,e);throw wl("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var gl=new RegExp("[~\\*/\\[\\]]");function ml(t,e,n){if(e.search(gl)>=0)throw wl("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Nf.bind.apply(Nf,Object(Sr.g)([void 0],e.split("."))))).f_}catch(r){throw wl("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function wl(t,e,n,r,i){var o=r&&!r.et(),s=void 0!==i,u="Function "+e+"() called with invalid data";n&&(u+=" (via `toFirestore()`)");var a="";return(o||s)&&(a+=" (found",o&&(a+=" in field "+r),s&&(a+=" in document "+i),a+=")"),new Xr(Kr.INVALID_ARGUMENT,(u+=". ")+t+a)}function _l(t,e){return t.some((function(t){return t.isEqual(e)}))}var Il=function(){function t(t){this.Sh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return Object(Sr.b)(this,void 0,void 0,(function(){var e,n=this;return Object(Sr.d)(this,(function(r){switch(r.label){case 0:if(this.nf(),this.mutations.length>0)throw new Xr(Kr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(Sr.b)(this,void 0,void 0,(function(){var n,r,i,o,s,u;return Object(Sr.d)(this,(function(a){switch(a.label){case 0:return n=qr(t),r=$s(n.Qt)+"/documents",i={documents:e.map((function(t){return Xs(n.Qt,t)}))},[4,n.Du("BatchGetDocuments",r,i)];case 1:return o=a.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){Fr(!!e.found);var n=Ws(t,e.found.name),r=Hs(e.found.updateTime),i=new Mi({mapValue:{fields:e.found.fields}});return new Fi(n,r,i,{})}(t,e):"missing"in e?function(t,e){Fr(!!e.missing),Fr(!!e.readTime);var n=Ws(t,e.missing),r=Hs(e.readTime);return new qi(n,r)}(t,e):Ur()}(n.Qt,t);s.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=s.get(t.toString());Fr(!!e),u.push(e)})),u)]}}))}))}(this.Sh,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof qi||t instanceof Fi?n.sf(t):Ur()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.F_(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new us(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return Object(Sr.b)(this,void 0,void 0,(function(){var t,e=this;return Object(Sr.d)(this,(function(n){switch(n.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=hi._t(n);e.mutations.push(new as(r,e.jt(r)))})),[4,function(t,e){return Object(Sr.b)(this,void 0,void 0,(function(){var n,r,i;return Object(Sr.d)(this,(function(o){switch(o.label){case 0:return n=qr(t),r=$s(n.Qt)+"/documents",i={writes:e.map((function(t){return ru(n.Qt,t)}))},[4,n.pu("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.Sh,this.mutations)];case 1:return n.sent(),this.X_=!0,[2]}}))}))},t.prototype.sf=function(t){var e;if(t instanceof Fi)e=t.version;else{if(!(t instanceof qi))throw Ur();e=oi.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Xr(Kr.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.jt=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?Bo.updateTime(e):Bo.Kt()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual(oi.min()))throw new Xr(Kr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Bo.updateTime(e)}return Bo.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),El=function(){function t(t,e,n,r){this._s=t,this.Sh=e,this.updateFunction=n,this.Es=r,this.cf=5,this.Gu=new Jc(this._s,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.Gu.Lu((function(){return Object(Sr.b)(t,void 0,void 0,(function(){var t,e,n=this;return Object(Sr.d)(this,(function(r){return t=new Il(this.Sh),(e=this.uf(t))&&e.then((function(e){n._s.Ps((function(){return t.commit().then((function(){n.Es.resolve(e)})).catch((function(t){n.hf(t)}))}))})).catch((function(t){n.hf(t)})),[2]}))}))}))},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!_i(e)&&e.catch&&e.then?e:(this.Es.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Es.reject(t),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this._s.Ps((function(){return e.af(),Promise.resolve()}))):this.Es.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!hs(e)}return!1},t}(),Ol=function(){function t(t,e,n){var r=this;this.credentials=t,this._s=e,this.yu=n,this.user=Jr.UNAUTHENTICATED,this.clientId=Qr.u(),this._f=function(){},this.C=new gu,this.credentials.v((function(t){Rr("FirestoreClient","Received user=",t.uid),r.user=t,r._f(t),r.C.resolve()}))}return t.prototype.getConfiguration=function(){return Object(Sr.b)(this,void 0,void 0,(function(){return Object(Sr.d)(this,(function(t){switch(t.label){case 0:return[4,this.C.promise];case 1:return[2,(t.sent(),{_s:this._s,yu:this.yu,clientId:this.clientId,credentials:this.credentials,Jl:this.user,pl:100})]}}))}))},t.prototype.ff=function(t){var e=this;this._f=t,this.C.promise.then((function(){return e._f(e.user)}))},t.prototype.df=function(){if(this._s.wf)throw new Xr(Kr.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this._s.Ef();var e=new gu;return this._s.Tf((function(){return Object(Sr.b)(t,void 0,void 0,(function(){var t,n;return Object(Sr.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.S(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Su(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function Tl(t,e){return Object(Sr.b)(this,void 0,void 0,(function(){var n,r,i=this;return Object(Sr.d)(this,(function(o){switch(o.label){case 0:return t._s.Af(),Rr("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.Jl,t.ff((function(n){r.isEqual(n)||(r=n,t._s.po((function(){return Object(Sr.b)(i,void 0,void 0,(function(){return Object(Sr.d)(this,(function(t){switch(t.label){case 0:return[4,cc(e.bh,n)];case 1:return t.sent(),[2]}}))}))})))})),e.persistence.Po((function(){return t.terminate()})),t.mf=e,[2]}}))}))}function jl(t,e){return Object(Sr.b)(this,void 0,void 0,(function(){var n,r;return Object(Sr.d)(this,(function(i){switch(i.label){case 0:return t._s.Af(),[4,xl(t)];case 1:return n=i.sent(),Rr("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.ff((function(n){return t._s.po((function(){return function(t,e){return Object(Sr.b)(this,void 0,void 0,(function(){var n,r;return Object(Sr.d)(this,(function(i){switch(i.label){case 0:return(n=qr(t))._s.Af(),Rr("RemoteStore","RemoteStore received new credentials"),r=lh(n),n.Nh.add(3),[4,oh(n)];case 1:return i.sent(),r&&n.Oh.set("Unknown"),[4,n.Dh.n_(e)];case 2:return i.sent(),n.Nh.delete(3),[4,ih(n)];case 3:return i.sent(),[2]}}))}))}(e.yl,n)}))})),t.If=e,[2]}}))}))}function xl(t){return Object(Sr.b)(this,void 0,void 0,(function(){return Object(Sr.d)(this,(function(e){switch(e.label){case 0:return t.mf?[3,2]:(Rr("FirestoreClient","Using default OfflineComponentProvider"),[4,Tl(t,new Ef)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}}))}))}function Nl(t){return Object(Sr.b)(this,void 0,void 0,(function(){return Object(Sr.d)(this,(function(e){switch(e.label){case 0:return t.If?[3,2]:(Rr("FirestoreClient","Using default OnlineComponentProvider"),[4,jl(t,new jf)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}}))}))}function Al(t){return xl(t).then((function(t){return t.persistence}))}function Sl(t){return xl(t).then((function(t){return t.bh}))}function Pl(t){return Nl(t).then((function(t){return t.yl}))}function Dl(t){return Nl(t).then((function(t){return t._a}))}function kl(t){return Object(Sr.b)(this,void 0,void 0,(function(){var e,n;return Object(Sr.d)(this,(function(r){switch(r.label){case 0:return[4,Nl(t)];case 1:return e=r.sent(),[2,((n=e.gl).jh=Bh.bind(null,e._a),n.Hh=Yh.bind(null,e._a),n)]}}))}))}function Cl(t,e,n){var r=this;void 0===n&&(n={});var i=new gu;return t._s.Ps((function(){return Object(Sr.b)(r,void 0,void 0,(function(){var r;return Object(Sr.d)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new xf({next:function(o){e.Ps((function(){return Dh(t,s)}));var u=o.docs.has(n);!u&&o.fromCache?i.reject(new Xr(Kr.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&o.fromCache&&r&&"server"===r.source?i.reject(new Xr(Kr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Mh(fo(n.path),o,{includeMetadataChanges:!0,nl:!0});return Ph(t,s)},[4,kl(t)];case 1:return[2,r.apply(void 0,[o.sent(),t._s,e,n,i])]}}))}))})),i.promise}function Rl(t,e,n){var r=this;void 0===n&&(n={});var i=new gu;return t._s.Ps((function(){return Object(Sr.b)(r,void 0,void 0,(function(){var r;return Object(Sr.d)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new xf({next:function(n){e.Ps((function(){return Dh(t,s)})),n.fromCache&&"server"===r.source?i.reject(new Xr(Kr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Mh(n,o,{includeMetadataChanges:!0,nl:!0});return Ph(t,s)},[4,kl(t)];case 1:return[2,r.apply(void 0,[o.sent(),t._s,e,n,i])]}}))}))})),i.promise}var Ml=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.Gu=new Jc(this,"async_queue_retry"),this.vf=function(){var e=Xc();e&&Rr("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Gu.qu()};var e=Xc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.Ps=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=Xc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise((function(t){})):this.Df(t)},t.prototype.po=function(t){var e=this;this.Ps((function(){return e.Pf.push(t),e.Cf()}))},t.prototype.Cf=function(){return Object(Sr.b)(this,void 0,void 0,(function(){var t,e=this;return Object(Sr.d)(this,(function(n){switch(n.label){case 0:if(0===this.Pf.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return n.sent(),this.Pf.shift(),this.Gu.reset(),[3,4];case 3:if(!Ou(t=n.sent()))throw t;return Rr("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.Gu.Lu((function(){return e.Cf()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Df=function(t){var e=this,n=this.Rf.then((function(){return e.pf=!0,t().catch((function(t){throw e.Vf=t,e.pf=!1,Mr("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.pf=!1,t}))}));return this.Rf=n,n},t.prototype.Tr=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=Au.Ts(this,t,e,n,(function(t){return r.xf(t)}));return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&Ur()},t.prototype.Af=function(){},t.prototype.Nf=function(){return Object(Sr.b)(this,void 0,void 0,(function(){var t;return Object(Sr.d)(this,(function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.$f=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].fs===t)return!0;return!1},t.prototype.Ff=function(t){var e=this;return this.Nf().then((function(){e.gf.sort((function(t,e){return t.ds-e.ds}));for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Rs(),"all"!==t&&i.fs===t)break}return e.Nf()}))},t.prototype.Of=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}();function Vl(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this.kf={},this.Mf=new gu,this.Lf={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this.kf={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this.Mf.promise.catch(t)},t.prototype.then=function(t,e){return this.Mf.promise.then(t,e)},t.prototype.ql=function(t){this.Ul(t),this.kf.complete&&this.kf.complete(),this.Mf.resolve(t)},t.prototype.Kl=function(t){this.Lf.taskState="Error",this.kf.next&&this.kf.next(this.Lf),this.kf.error&&this.kf.error(t),this.Mf.reject(t)},t.prototype.Ul=function(t){this.Lf=t,this.kf.next&&this.kf.next(t)}}();var Ll=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Bf=new Ml,r.w_="name"in e?e.name:"[DEFAULT]",r}return Object(Sr.c)(e,t),e.prototype.b_=function(){return this.qf||Fl(this),this.qf.terminate()},e}(qf);function Ul(t){return t.qf||Fl(t),t.qf.df(),t.qf}function Fl(t){var e=t.p_(),n=function(t,e,n){return new Pr(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.I_,t.w_,e);t.qf=new Ol(t.m_,t.Bf,n)}function ql(t,e,n){var r=this,i=new gu;return t._s.enqueue((function(){return Object(Sr.b)(r,void 0,void 0,(function(){var r;return Object(Sr.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Tl(t,n)];case 1:return o.sent(),[4,jl(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Kr.FAILED_PRECONDITION||t.code===Kr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function zl(t){if(t.R_||t.P_)throw new Xr(Kr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Ql=function(){function t(){}return t.prototype.Uf=function(t,e){switch(void 0===e&&(e="none"),Oi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return bi(t.integerValue||t.doubleValue);case 3:return this.Qf(t.timestampValue);case 4:return this.Kf(t,e);case 5:return t.stringValue;case 6:return this.Wf(gi(t.bytesValue));case 7:return this.jf(t.referenceValue);case 8:return this.Gf(t.geoPointValue);case 9:return this.zf(t.arrayValue,e);case 10:return this.Hf(t.mapValue,e);default:throw Ur()}},t.prototype.Hf=function(t,e){var n=this,r={};return li(t.fields||{},(function(t,i){r[t]=n.Uf(i,e)})),r},t.prototype.Gf=function(t){return new Xf(bi(t.latitude),bi(t.longitude))},t.prototype.zf=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.Uf(t,e)}))},t.prototype.Kf=function(t,e){switch(e){case"previous":var n=function t(e){var n=e.mapValue.fields.__previous_value__;return mi(n)?t(n):n}(t);return null==n?null:this.Uf(n,e);case"estimate":return this.Qf(wi(t));default:return null}},t.prototype.Qf=function(t){var e=yi(t);return new ii(e.seconds,e.nanos)},t.prototype.Jf=function(t,e){var n=ui.ot(t);Fr(bu(n));var r=new Dr(n.get(1),n.get(3)),i=new hi(n.Y(5));return r.isEqual(e)||Mr("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),Gl=function(){function t(t,e,n,r,i){this.Yf=t,this.Xf=e,this.S_=n,this.Zf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new zf(this.Yf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Zf},t.prototype.data=function(){if(this.Zf){if(this.v_){var t=new Bl(this.Yf,this.Xf,this.S_,this.Zf,null);return this.v_.fromFirestore(t)}return this.Xf.Uf(this.Zf.bt())}},t.prototype.get=function(t){if(this.Zf){var e=this.Zf.data().field(Hl("DocumentSnapshot.get",t));if(null!==e)return this.Xf.Uf(e)}},t}(),Bl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Sr.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Gl);function Hl(t,e){return"string"==typeof e?ml(t,e):e instanceof Sf?e.d_.f_:e.f_}function Yl(t){if(po(t)&&0===t.xt.length)throw new Xr(Kr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Kl=function(){};function Xl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.td(t)}return t}var Wl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).ed=e,i.nd=n,i.sd=r,i.type="where",i}return Object(Sr.c)(e,t),e.prototype.td=function(t){var e=nl(t.firestore),n=function(t,e,n,r,i,o,s){var u;if(i.ut()){if("array-contains"===o||"array-contains-any"===o)throw new Xr(Kr.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){rp(s,o);for(var a=[],c=0,h=s;c<h.length;c++)a.push(np(r,t,h[c]));u={arrayValue:{values:a}}}else u=np(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||rp(s,o),u=ll(n,"where",s,"in"===o||"not-in"===o);var f=Ki.create(i,o,u);return function(t,e){if(e.Ct()){var n=yo(t);if(null!==n&&!n.isEqual(e.field))throw new Xr(Kr.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=vo(t);null!==r&&ip(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Xr(Kr.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t.C_,0,e,t.firestore.I_,this.ed,this.nd,this.sd);return new Qf(t.firestore,t.v_,function(t,e){var n=t.filters.concat([e]);return new co(t.path,t.collectionGroup,t.xt.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,n))},e}(Kl),Jl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ed=e,r.rd=n,r.type="orderBy",r}return Object(Sr.c)(e,t),e.prototype.td=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Xr(Kr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Xr(Kr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new oo(e,n);return function(t,e){if(null===vo(t)){var n=yo(t);null!==n&&ip(0,n,e.field)}}(t,r),r}(t.C_,this.ed,this.rd);return new Qf(t.firestore,t.v_,function(t,e){var n=t.xt.concat([e]);return new co(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,e))},e}(Kl),Zl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.od=n,i.ad=r,i}return Object(Sr.c)(e,t),e.prototype.td=function(t){return new Qf(t.firestore,t.v_,wo(t.C_,this.od,this.ad))},e}(Kl),$l=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return Object(Sr.c)(e,t),e.prototype.td=function(t){var e=ep(t,this.type,this.ud,this.hd);return new Qf(t.firestore,t.v_,function(t,e){return new co(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.C_,e))},e}(Kl),tp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return Object(Sr.c)(e,t),e.prototype.td=function(t){var e=ep(t,this.type,this.ud,this.hd);return new Qf(t.firestore,t.v_,function(t,e){return new co(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.C_,e))},e}(Kl);function ep(t,e,n,r){if(n[0]instanceof Sf&&(n[0]=n[0].d_),n[0]instanceof Gl)return function(t,e,n,r,i){if(!r)throw new Xr(Kr.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,u=go(t);s<u.length;s++){var a=u[s];if(a.field.ut())o.push(Si(e,r.key));else{var c=r.field(a.field);if(mi(c))throw new Xr(Kr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=a.field.rt();throw new Xr(Kr.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new ro(o,i)}(t.C_,t.firestore.I_,e,n[0].Zf,r);var i=nl(t.firestore);return function(t,e,n,r,i,o){var s=t.xt;if(i.length>s.length)throw new Xr(Kr.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var u=[],a=0;a<i.length;a++){var c=i[a];if(s[a].field.ut()){if("string"!=typeof c)throw new Xr(Kr.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!bo(t)&&-1!==c.indexOf("/"))throw new Xr(Kr.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(ui.ot(c));if(!hi.wt(h))throw new Xr(Kr.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var f=new hi(h);u.push(Si(e,f))}else{var l=ll(n,r,c);u.push(l)}}return new ro(u,o)}(t.C_,t.firestore.I_,i,e,n,r)}function np(t,e,n){if(n instanceof Sf&&(n=n.d_),"string"==typeof n){if(""===n)throw new Xr(Kr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!bo(e)&&-1!==n.indexOf("/"))throw new Xr(Kr.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(ui.ot(n));if(!hi.wt(r))throw new Xr(Kr.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Si(t,new hi(r))}if(n instanceof zf)return Si(t,n.S_);throw new Xr(Kr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Mf(n)+".")}function rp(t,e){if(!Array.isArray(t)||0===t.length)throw new Xr(Kr.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Xr(Kr.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function ip(t,e,n){if(!n.isEqual(e))throw new Xr(Kr.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function op(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var sp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Sr.c)(e,t),e.prototype.Wf=function(t){return new Wr(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new zf(this.firestore,null,e)},e}(Ql),up=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),ap=function(t){function e(e,n,r,i,o,s){var u=this;return(u=t.call(this,e,n,r,i,s)||this).Yf=e,u.ld=e,u.metadata=o,u}return Object(Sr.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.Zf){if(this.v_){var e=new cp(this.Yf,this.Xf,this.S_,this.Zf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Xf.Uf(this.Zf.bt(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Zf){var n=this.Zf.data().field(Hl("DocumentSnapshot.get",t));if(null!==n)return this.Xf.Uf(n,e.serverTimestamps)}},e}(Gl),cp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Sr.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(ap),hp=function(){function t(t,e,n,r){this.Yf=t,this.Xf=e,this._d=r,this.metadata=new up(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._d.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._d.docs.forEach((function(r){t.call(e,new cp(n.Yf,n.Xf,r.key,r,new up(n._d.De.has(r.key),n._d.fromCache),n.query.v_))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._d.xe)throw new Xr(Kr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.fd&&this.dd===e||(this.fd=function(t,e){if(t._d.Se.et()){var n=0;return t._d.docChanges.map((function(e){return{type:"added",doc:new cp(t.Yf,t.Xf,e.doc.key,e.doc,new up(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_),oldIndex:-1,newIndex:n++}}))}var r=t._d.Se;return t._d.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new cp(t.Yf,t.Xf,e.doc.key,e.doc,new up(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:fp(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this.dd=e),this.fd},t}();function fp(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ur()}}function lp(t,e){return t instanceof ap&&e instanceof ap?t.Yf===e.Yf&&t.S_.isEqual(e.S_)&&(null===t.Zf?null===e.Zf:t.Zf.isEqual(e.Zf))&&t.v_===e.v_:t instanceof hp&&e instanceof hp&&t.Yf===e.Yf&&Kf(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._d.isEqual(e._d)}var pp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Sr.c)(e,t),e.prototype.Wf=function(t){return new Wr(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new zf(this.firestore,null,e)},e}(Ql);function dp(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Vf(t,zf);var o=Vf(t.firestore,Ll),s=nl(o);return e instanceof Sf&&(e=e.d_),yp(o,[("string"==typeof e||e instanceof Nf?fl(s,"updateDoc",t.S_,e,n,r):hl(s,"updateDoc",t.S_,e)).F_(t.S_,Bo.exists(!0))])}function vp(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof Sf&&(t=t.d_);var s={includeMetadataChanges:!1},u=0;"object"!=typeof i[u]||Vl(i[u])||(s=i[u],u++);var a,c,h,f={includeMetadataChanges:s.includeMetadataChanges};if(Vl(i[u])){var l=i[u];i[u]=null===(e=l.next)||void 0===e?void 0:e.bind(l),i[u+1]=null===(n=l.error)||void 0===n?void 0:n.bind(l),i[u+2]=null===(r=l.complete)||void 0===r?void 0:r.bind(l)}if(t instanceof zf)c=Vf(t.firestore,Ll),h=fo(t.S_.path),a={next:function(e){i[u]&&i[u](bp(c,t,e))},error:i[u+1],complete:i[u+2]};else{var p=Vf(t,Qf);c=Vf(p.firestore,Ll),h=p.C_;var d=new pp(c);a={next:function(t){i[u]&&i[u](new hp(c,d,p,t))},error:i[u+1],complete:i[u+2]},Yl(t.C_)}return function(t,e,n,r){var i=this,o=new xf(r),s=new Mh(e,o,n);return t._s.Ps((function(){return Object(Sr.b)(i,void 0,void 0,(function(){var e;return Object(Sr.d)(this,(function(n){switch(n.label){case 0:return e=Ph,[4,kl(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.i_(),t._s.Ps((function(){return Object(Sr.b)(i,void 0,void 0,(function(){var e;return Object(Sr.d)(this,(function(n){switch(n.label){case 0:return e=Dh,[4,kl(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(Ul(c),h,f,a)}function yp(t,e){return function(t,e){var n=this,r=new gu;return t._s.Ps((function(){return Object(Sr.b)(n,void 0,void 0,(function(){var n;return Object(Sr.d)(this,(function(i){switch(i.label){case 0:return n=Kh,[4,Dl(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(Ul(t),e)}function bp(t,e,n){var r=n.docs.get(e.S_),i=new pp(t);return new ap(t,i,e.S_,r,new up(n.hasPendingWrites,n.fromCache),e.v_)}var gp=function(){function t(t,e){this.Yf=t,this.wd=e,this.Ed=[],this.Td=!1,this.Id=nl(t)}return t.prototype.set=function(t,e,n){this.md();var r=mp(t,this.Yf),i=op(r.v_,e,n),o=rl(this.Id,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.Ed.push(o.F_(r.S_,Bo.Kt())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.md();var o,s=mp(t,this.Yf);return e instanceof Sf&&(e=e.d_),o="string"==typeof e||e instanceof Nf?fl(this.Id,"WriteBatch.update",s.S_,e,n,r):hl(this.Id,"WriteBatch.update",s.S_,e),this.Ed.push(o.F_(s.S_,Bo.exists(!0))),this},t.prototype.delete=function(t){this.md();var e=mp(t,this.Yf);return this.Ed=this.Ed.concat(new us(e.S_,Bo.Kt())),this},t.prototype.commit=function(){return this.md(),this.Td=!0,this.Ed.length>0?this.wd(this.Ed):Promise.resolve()},t.prototype.md=function(){if(this.Td)throw new Xr(Kr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function mp(t,e){if(t instanceof Sf&&(t=t.d_),t.firestore!==e)throw new Xr(Kr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var wp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Yf=e,r}return Object(Sr.c)(e,t),e.prototype.get=function(e){var n=this,r=mp(e,this.Yf),i=new pp(this.Yf);return t.prototype.get.call(this,e).then((function(t){return new ap(n.Yf,i,r.S_,t.Zf,new up(!1,!1),r.v_)}))},e}(function(){function t(t,e){this.Yf=t,this.Ad=e,this.Id=nl(t)}return t.prototype.get=function(t){var e=this,n=mp(t,this.Yf),r=new sp(this.Yf);return this.Ad.ef([n.S_]).then((function(t){if(!t||1!==t.length)return Ur();var i=t[0];if(i instanceof qi)return new Gl(e.Yf,r,n.S_,null,n.v_);if(i instanceof Fi)return new Gl(e.Yf,r,i.key,i,n.v_);throw Ur()}))},t.prototype.set=function(t,e,n){var r=mp(t,this.Yf),i=op(r.v_,e,n),o=rl(this.Id,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Ad.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=mp(t,this.Yf);return e instanceof Sf&&(e=e.d_),o="string"==typeof e||e instanceof Nf?fl(this.Id,"Transaction.update",s.S_,e,n,r):hl(this.Id,"Transaction.update",s.S_,e),this.Ad.update(s.S_,o),this},t.prototype.delete=function(t){var e=mp(t,this.Yf);return this.Ad.delete(e.S_),this},t}());function _p(){if("undefined"==typeof Uint8Array)throw new Xr(Kr.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Ip(){if("undefined"==typeof atob)throw new Xr(Kr.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Ep=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Sr.c)(e,t),e.fromBase64String=function(t){return Ip(),new e(Wr.fromBase64String(t))},e.fromUint8Array=function(t){return _p(),new e(Wr.fromUint8Array(t))},e.prototype.toBase64=function(){return Ip(),this.d_.toBase64()},e.prototype.toUint8Array=function(){return _p(),this.d_.toUint8Array()},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(Sf),Op=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){zl(t=Vf(t,Ll));var n=Ul(t),r=t.p_(),i=new jf;return ql(n,i,new Of(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t.d_,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){zl(t=Vf(t,Ll));var e=Ul(t),n=t.p_(),r=new jf;return ql(e,r,new Tf(r,n.cacheSizeBytes))}(t.d_)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.R_&&!t.P_)throw new Xr(Kr.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new gu;return t.Bf.Tf((function(){return Object(Sr.b)(e,void 0,void 0,(function(){var e;return Object(Sr.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(Sr.b)(this,void 0,void 0,(function(){return Object(Sr.d)(this,(function(e){switch(e.label){case 0:return _u.Kn()?[4,_u.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}}))}))}(nc(t.I_,t.w_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t.d_)},t}(),Tp=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Rd=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof Dr||(i.Pd=e),i}return Object(Sr.c)(e,t),Object.defineProperty(e.prototype,"I_",{get:function(){return this.d_.I_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.d_.V_()),t)).merge,this.d_.g_(t)},e.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=Vf(t,qf)).V_();"firestore.googleapis.com"!==r.host&&r.host!==e&&Vr("Host has been set in both settings() and useEmulator(), emulator host will be used"),t.g_(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this.d_,t,e)},e.prototype.enableNetwork=function(){return function(t){var e=this;return t._s.enqueue((function(){return Object(Sr.b)(e,void 0,void 0,(function(){var e,n;return Object(Sr.d)(this,(function(r){switch(r.label){case 0:return[4,Al(t)];case 1:return e=r.sent(),[4,Pl(t)];case 2:return n=r.sent(),[2,(e.yo(!0),function(t){var e=qr(t);return e.Nh.delete(0),ih(e)}(n))]}}))}))}))}(Ul(Vf(this.d_,Ll)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t._s.enqueue((function(){return Object(Sr.b)(e,void 0,void 0,(function(){var e,n;return Object(Sr.d)(this,(function(r){switch(r.label){case 0:return[4,Al(t)];case 1:return e=r.sent(),[4,Pl(t)];case 2:return n=r.sent(),[2,(e.yo(!1),function(t){return Object(Sr.b)(this,void 0,void 0,(function(){var e;return Object(Sr.d)(this,(function(n){switch(n.label){case 0:return(e=qr(t)).Nh.add(0),[4,oh(e)];case 1:return n.sent(),e.Oh.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Ul(Vf(this.d_,Ll)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&kf("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Rd.enableMultiTabIndexedDbPersistence(this):this.Rd.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Rd.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.Pd&&(this.Pd._removeServiceInstance("firestore"),this.Pd._removeServiceInstance("firestore-exp")),this.d_._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new gu;return t._s.Ps((function(){return Object(Sr.b)(e,void 0,void 0,(function(){var e;return Object(Sr.d)(this,(function(r){switch(r.label){case 0:return e=tf,[4,Dl(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Ul(Vf(this.d_,Ll)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new xf(e);return t._s.Ps((function(){return Object(Sr.b)(n,void 0,void 0,(function(){var e;return Object(Sr.d)(this,(function(n){switch(n.label){case 0:return e=function(t,e){qr(t).Wh.add(e),e.next()},[4,kl(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.i_(),t._s.Ps((function(){return Object(Sr.b)(n,void 0,void 0,(function(){var e;return Object(Sr.d)(this,(function(n){switch(n.label){case 0:return e=function(t,e){qr(t).Wh.delete(e)},[4,kl(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(Ul(t=Vf(t,Ll)),Vl(e)?e:{next:e})}(this.d_,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.Pd)throw new Xr(Kr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Pd},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Up(this,Bf(this.d_,t))}catch(t){throw Pp(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new Sp(this,Hf(this.d_,t))}catch(t){throw Pp(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new Mp(this,function(t,e){if(t=Vf(t,qf),Pf("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Xr(Kr.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Qf(t,null,function(t){return new co(ui.ct(),t)}(e))}(this.d_,t))}catch(t){throw Pp(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new gu;return t._s.Ps((function(){return Object(Sr.b)(n,void 0,void 0,(function(){var n;return Object(Sr.d)(this,(function(i){switch(i.label){case 0:return[4,function(t){return Nl(t).then((function(t){return t.Sh}))}(t)];case 1:return n=i.sent(),new El(t._s,n,e,r).run(),[2]}}))}))})),r.promise}(Ul(t),(function(n){return e(new wp(t,n))}))}(this.d_,(function(n){return t(new xp(e,n))}))},e.prototype.batch=function(){var t=this;return Ul(this.d_),new Np(new gp(this.d_,(function(e){return yp(t.d_,e)})))},e.prototype.loadBundle=function(t){throw new Xr(Kr.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new Xr(Kr.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(Sf),jp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Sr.c)(e,t),e.prototype.Wf=function(t){return new Ep(new Wr(t))},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return Sp.yd(e,this.firestore,null)},e}(Ql),xp=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r.Xf=new jp(e),r}return Object(Sr.c)(e,t),e.prototype.get=function(t){var e=this,n=Fp(t);return this.d_.get(n).then((function(t){return new Cp(e.Yf,new ap(e.Yf.d_,e.Xf,t.S_,t.Zf,t.metadata,n.v_))}))},e.prototype.set=function(t,e,n){var r=Fp(t);return n?(Df("Transaction.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Fp(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,Object(Sr.g)([s,e,n],i)),this},e.prototype.delete=function(t){var e=Fp(t);return this.d_.delete(e),this},e}(Sf),Np=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Sr.c)(e,t),e.prototype.set=function(t,e,n){var r=Fp(t);return n?(Df("WriteBatch.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Fp(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,Object(Sr.g)([s,e,n],i)),this},e.prototype.delete=function(t){var e=Fp(t);return this.d_.delete(e),this},e.prototype.commit=function(){return this.d_.commit()},e}(Sf),Ap=function(t){function e(e,n,r){var i=this;return(i=t.call(this,r)||this).Yf=e,i.Xf=n,i}return Object(Sr.c)(e,t),e.prototype.fromFirestore=function(t,e){var n=new cp(this.Yf.d_,this.Xf,t.S_,t.Zf,t.metadata,null);return this.d_.fromFirestore(new Rp(this.Yf,n),null!=e?e:{})},e.prototype.toFirestore=function(t,e){return e?this.d_.toFirestore(t,e):this.d_.toFirestore(t)},e.gd=function(t,n){var r=e.Vd,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new jp(t),n),i.set(n,o)),o},e}(Sf);Ap.Vd=new WeakMap;var Sp=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new jp(e),r}return Object(Sr.c)(e,t),e.pd=function(t,n,r){if(t.length%2!=0)throw new Xr(Kr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.rt()+" has "+t.length);return new e(n,new zf(n.d_,r,new hi(t)))},e.yd=function(t,n,r){return new e(n,new zf(n.d_,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Up(this.firestore,this.d_.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Up(this.firestore,Bf(this.d_,t))}catch(t){throw Pp(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof Sf&&(t=t.d_),t instanceof zf&&Yf(this.d_,t)},e.prototype.set=function(t,e){e=Df("DocumentReference.set",e);try{return function(t,e,n){t=Vf(t,zf);var r=Vf(t.firestore,Ll),i=op(t.v_,e,n);return yp(r,[rl(nl(r),"setDoc",t.S_,i,null!==t.v_,n).F_(t.S_,Bo.Kt())])}(this.d_,t,e)}catch(t){throw Pp(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?dp(this.d_,t):dp.apply(void 0,Object(Sr.g)([this.d_,t,e],n))}catch(t){throw Pp(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return yp(Vf((t=this.d_).firestore,Ll),[new us(t.S_,Bo.Kt())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Dp(e),i=kp(e,(function(e){return new Cp(t.firestore,new ap(t.firestore.d_,t.Xf,e.S_,e.Zf,e.metadata,t.d_.v_))}));return vp(this.d_,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Vf(t,zf);var e=Vf(t.firestore,Ll),n=Ul(e),r=new pp(e);return function(t,e){var n=this,r=new gu;return t._s.Ps((function(){return Object(Sr.b)(n,void 0,void 0,(function(){var n;return Object(Sr.d)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Sr.b)(this,void 0,void 0,(function(){var r,i;return Object(Sr.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=qr(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Tc.Ho(t,e)}))}(t,e)];case 1:return(i=o.sent())instanceof Fi?n.resolve(i):i instanceof qi?n.resolve(null):n.reject(new Xr(Kr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Su(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,Sl(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.S_).then((function(n){return new ap(e,r,t.S_,n,new up(n instanceof Fi&&n.Vt,!0),t.v_)}))}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=Vf(t,zf);var e=Vf(t.firestore,Ll);return Cl(Ul(e),t.S_,{source:"server"}).then((function(n){return bp(e,t,n)}))}(this.d_):function(t){t=Vf(t,zf);var e=Vf(t.firestore,Ll);return Cl(Ul(e),t.S_).then((function(n){return bp(e,t,n)}))}(this.d_)).then((function(t){return new Cp(e.firestore,new ap(e.firestore.d_,e.Xf,t.S_,t.Zf,t.metadata,e.d_.v_))}))},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(Ap.gd(this.firestore,t)))},e}(Sf);function Pp(t,e,n){return t.message=t.message.replace(e,n),t}function Dp(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Vl(r))return r}return{}}function kp(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Vl(t[0])?t[0]:Vl(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Cp=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Object(Sr.c)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new Sp(this.Yf,this.d_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this.d_.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this.d_.data(t)},e.prototype.get=function(t,e){return this.d_.get(t,e)},e.prototype.isEqual=function(t){return lp(this.d_,t.d_)},e}(Sf),Rp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Sr.c)(e,t),e.prototype.data=function(t){return this.d_.data(t)},e}(Cp),Mp=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new jp(e),r}return Object(Sr.c)(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,Xl(this.d_,function(t,e,n){var r=e,i=Hl("where",t);return new Wl(i,r,n)}(t,n,r)))}catch(t){throw Pp(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,Xl(this.d_,function(t,e){void 0===e&&(e="asc");var n=e,r=Hl("orderBy",t);return new Jl(r,n)}(t,n)))}catch(t){throw Pp(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,Xl(this.d_,function(t){return Lf("limit",t),new Zl("limit",t,"F")}(t)))}catch(t){throw Pp(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,Xl(this.d_,function(t){return Lf("limitToLast",t),new Zl("limitToLast",t,"L")}(t)))}catch(t){throw Pp(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Xl(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new $l("startAt",t,!0)}).apply(void 0,t)))}catch(t){throw Pp(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Xl(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new $l("startAfter",t,!1)}).apply(void 0,t)))}catch(t){throw Pp(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Xl(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new tp("endBefore",t,!0)}).apply(void 0,t)))}catch(t){throw Pp(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Xl(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new tp("endAt",t,!1)}).apply(void 0,t)))}catch(t){throw Pp(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return Kf(this.d_,t.d_)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Vf(t,Qf);var e=Vf(t.firestore,Ll),n=Ul(e),r=new pp(e);return function(t,e){var n=this,r=new gu;return t._s.Ps((function(){return Object(Sr.b)(n,void 0,void 0,(function(){var n;return Object(Sr.d)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Sr.b)(this,void 0,void 0,(function(){var r,i,o,s,u;return Object(Sr.d)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,bc(t,e,!0)];case 1:return u=a.sent(),r=new qh(e,u.Rc),i=r.fl(u.documents),o=r.wi(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=a.sent(),u=Su(s,"Failed to execute query '"+e+" against cache"),n.reject(u),[3,3];case 3:return[2]}}))}))},[4,Sl(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.C_).then((function(n){return new hp(e,r,t,n)}))}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=Vf(t,Qf);var e=Vf(t.firestore,Ll),n=Ul(e),r=new pp(e);return Rl(n,t.C_,{source:"server"}).then((function(n){return new hp(e,r,t,n)}))}(this.d_):function(t){t=Vf(t,Qf);var e=Vf(t.firestore,Ll),n=Ul(e),r=new pp(e);return Yl(t.C_),Rl(n,t.C_).then((function(n){return new hp(e,r,t,n)}))}(this.d_)).then((function(t){return new Lp(e.firestore,new hp(e.firestore.d_,e.Xf,e.d_,t._d))}))},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Dp(e),i=kp(e,(function(e){return new Lp(t.firestore,new hp(t.firestore.d_,t.Xf,t.d_,e._d))}));return vp(this.d_,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(Ap.gd(this.firestore,t)))},e}(Sf),Vp=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Object(Sr.c)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this.d_.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new Rp(this.Yf,this.d_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this.d_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this.d_.newIndex},enumerable:!1,configurable:!0}),e}(Sf),Lp=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Object(Sr.c)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new Mp(this.Yf,this.d_.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.d_.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.d_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this.d_.docs.map((function(e){return new Rp(t.Yf,e)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this.d_.docChanges(t).map((function(t){return new Vp(e.Yf,t)}))},e.prototype.forEach=function(t,e){var n=this;this.d_.forEach((function(r){t.call(e,new Rp(n.Yf,r))}))},e.prototype.isEqual=function(t){return lp(this.d_,t.d_)},e}(Sf),Up=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r.d_=n,r}return Object(Sr.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.d_.parent;return t?new Sp(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Sp(this.firestore,void 0===t?Hf(this.d_):Hf(this.d_,t))}catch(t){throw Pp(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Vf(t.firestore,Ll),r=Hf(t),i=op(t.v_,e);return yp(n,[rl(nl(t.firestore),"addDoc",r.S_,i,null!==t.v_,{}).F_(r.S_,Bo.exists(!1))]).then((function(){return r}))}(this.d_,t).then((function(t){return new Sp(e.firestore,t)}))},e.prototype.isEqual=function(t){return Yf(this.d_,t.d_)},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(Ap.gd(this.firestore,t)))},e}(Mp);function Fp(t){return t instanceof Sf&&(t=t.d_),Vf(t,zf)}var qp,zp=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(Nf.bind.apply(Nf,Object(Sr.g)([void 0],e))))||this}return Object(Sr.c)(e,t),e.documentId=function(){return new e(ci.ht().rt())},e.prototype.isEqual=function(t){return t instanceof Sf&&(t=t.d_),t instanceof Nf&&this.d_.f_.isEqual(t.f_)},e}(Sf),Qp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Sr.c)(e,t),e.serverTimestamp=function(){var t=new sl("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new il("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ul("arrayUnion",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new al("arrayRemove",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new cl("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e}(Sf),Gp=n("/6Yf"),Bp={Firestore:Tp,GeoPoint:Xf,Timestamp:ii,Blob:Ep,Transaction:xp,WriteBatch:Np,DocumentReference:Sp,DocumentSnapshot:Cp,Query:Mp,QueryDocumentSnapshot:Rp,QuerySnapshot:Lp,CollectionReference:Up,FieldPath:zp,FieldValue:Qp,setLogLevel:function(t){kr.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Gp.a("firestore",(function(t){return function(t,e){return new Tp(t,new Ll(t,e),new Op)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Bp)))})(qp=x.a),qp.registerVersion("@firebase/firestore","2.1.7");var Hp=n("UbJi");function Yp(t,e){return function(t,e=f.a){return new l.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function Kp(t,e){return Yp(t,e).pipe(Object(w.a)(t=>({payload:t,type:"query"})))}function Xp(t,e){return Kp(t,e).pipe(Object(v.a)(void 0),b(),Object(w.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function Wp(t,e,n){return Xp(t,n).pipe(Object(_.a)((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return Jp(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return Jp(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Jp(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),Object(I.a)(),Object(w.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function Jp(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function Zp(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}class $p{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=Xp(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(w.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(Object(v.a)(void 0),b(),Object(E.a)(([t,e])=>e.length>0||!t),Object(w.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Object(_.a)((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Zp(t);return Wp(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Kp(this.query,this.afs.schedulers.outsideAngular).pipe(Object(w.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(p.a)(this.query.get(t)).pipe(Object(O.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new td(this.ref.doc(t),this.afs)}}class td{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=sd(n,e);return new $p(r,i,this.afs)}snapshotChanges(){return Yp(this.ref,this.afs.schedulers.outsideAngular).pipe(Object(v.a)(void 0),b(),Object(w.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(w.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(p.a)(this.ref.get(t)).pipe(Object(O.b)(this.afs.schedulers.insideAngular))}}class ed{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?Xp(this.query,this.afs.schedulers.outsideAngular).pipe(Object(w.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Object(E.a)(t=>t.length>0),this.afs.keepUnstableUntilFirst):Xp(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Object(_.a)((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Zp(t);return Wp(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Kp(this.query,this.afs.schedulers.outsideAngular).pipe(Object(w.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(p.a)(this.query.get(t)).pipe(Object(O.b)(this.afs.schedulers.insideAngular))}}const nd=new o.q("angularfire2.enableFirestorePersistence"),rd=new o.q("angularfire2.firestore.persistenceSettings"),id=new o.q("angularfire2.firestore.settings"),od=new o.q("angularfire2.firestore.use-emulator");function sd(t,e=(t=>t)){return{query:e(t),ref:t}}let ud=(()=>{class t{constructor(t,e,n,i,o,s,u,a,c){this.schedulers=new T.d(s),this.keepUnstableUntilFirst=Object(T.h)(this.schedulers);const h=Object(T.g)(t,s,e);!j.a.auth&&c&&Object(T.j)();const f=a;[this.firestore,this.persistenceEnabled$]=Object(T.f)(h.name+".firestore","AngularFirestore",h,()=>{const t=s.runOutsideAngular(()=>h.firestore());if(i&&t.settings(i),f&&t.useEmulator(...f),n&&!Object(r.p)(o)){const e=()=>{try{return Object(p.a)(t.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(qp){return"undefined"!=typeof console&&console.warn(qp),Object(d.a)(!1)}};return[t,s.runOutsideAngular(e)]}return[t,Object(d.a)(!1)]},[i,f,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=sd(n,e),o=this.schedulers.ngZone.run(()=>r);return new $p(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new ed(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new td(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(o.Vb(T.c),o.Vb(T.b,8),o.Vb(nd,8),o.Vb(id,8),o.Vb(o.B),o.Vb(o.z),o.Vb(rd,8),o.Vb(od,8),o.Vb(Hp.a,8))},t.\u0275prov=Object(o.Hb)({factory:function(){return new t(Object(o.Vb)(T.c),Object(o.Vb)(T.b,8),Object(o.Vb)(nd,8),Object(o.Vb)(id,8),Object(o.Vb)(o.B),Object(o.Vb)(o.z),Object(o.Vb)(rd,8),Object(o.Vb)(od,8),Object(o.Vb)(Hp.a,8))},token:t,providedIn:"any"}),t})(),ad=(()=>{class t{constructor(t){this.firestore=t}submitResponse(t){return this.firestore.collection("enquiries").add(t)}}return t.\u0275fac=function(e){return new(e||t)(o.Vb(ud))},t.\u0275prov=o.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),cd=(()=>{class t{constructor(t,e){this.fb=t,this.contactService=e}ngOnInit(){this.createForm()}createForm(){this.form=this.fb.group({name:["",h.l.required],email:["",[h.l.required],h.l.email],message:["",h.l.required]})}onSubmit(){const{name:t,email:e,message:n}=this.form.value,r=Date();this.contactService.submitResponse({name:t,email:e,message:n,date:r}),this.form.reset()}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(h.b),o.Lb(ad))},t.\u0275cmp=o.Fb({type:t,selectors:[["app-contact"]],decls:8,vars:2,consts:[[3,"formGroup","ngSubmit"],["type","text","placeholder","Name","formControlName","name"],["type","text","placeholder","Email","formControlName","email"],["placeholder","Message","formControlName","message"],["type","submit",3,"disabled"]],template:function(t,e){1&t&&(o.Rb(0,"h1"),o.xc(1,"Information Request"),o.Qb(),o.Rb(2,"form",0),o.Zb("ngSubmit",(function(){return e.onSubmit()})),o.Mb(3,"input",1),o.Mb(4,"input",2),o.Mb(5,"textarea",3),o.Rb(6,"button",4),o.xc(7,"Submit"),o.Qb(),o.Qb()),2&t&&(o.Ab(2),o.gc("formGroup",e.form),o.Ab(4),o.gc("disabled",e.form.invalid))},directives:[h.m,h.i,h.d,h.a,h.h,h.c],styles:[""]}),t})(),hd=(()=>{class t{constructor(){}ngOnInit(){}search(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Fb({type:t,selectors:[["app-home"]],decls:55,vars:0,consts:[["id","1"],["id","2"]],template:function(t,e){1&t&&(o.Rb(0,"div",0),o.Mb(1,"app-intro"),o.Mb(2,"app-education"),o.Rb(3,"p"),o.xc(4,"dfsds"),o.Qb(),o.Rb(5,"p"),o.xc(6,"dfsds"),o.Qb(),o.Rb(7,"p"),o.xc(8,"dfsds"),o.Qb(),o.Rb(9,"p"),o.xc(10,"dfsds"),o.Qb(),o.Rb(11,"p"),o.xc(12,"dfsds"),o.Qb(),o.Rb(13,"p"),o.xc(14,"dfsds"),o.Qb(),o.Rb(15,"p"),o.xc(16,"dfsds"),o.Qb(),o.Rb(17,"p"),o.xc(18,"dfsds"),o.Qb(),o.Rb(19,"p"),o.xc(20,"dfsds"),o.Qb(),o.Rb(21,"p"),o.xc(22,"dfsds"),o.Qb(),o.Rb(23,"p"),o.xc(24,"dfsds"),o.Qb(),o.Rb(25,"p"),o.xc(26,"dfsds"),o.Qb(),o.Rb(27,"p"),o.xc(28,"dfsds"),o.Qb(),o.Rb(29,"p"),o.xc(30,"dfsds"),o.Qb(),o.Rb(31,"p"),o.xc(32,"dfsds"),o.Qb(),o.Rb(33,"p"),o.xc(34,"dfsds"),o.Qb(),o.Rb(35,"p"),o.xc(36,"dfsds"),o.Qb(),o.Rb(37,"p"),o.xc(38,"dfsds"),o.Qb(),o.Rb(39,"p"),o.xc(40,"dfsds"),o.Qb(),o.Rb(41,"p"),o.xc(42,"dfsds"),o.Qb(),o.Rb(43,"p"),o.xc(44,"dfsds"),o.Qb(),o.Rb(45,"p"),o.xc(46,"dfsds"),o.Qb(),o.Rb(47,"p"),o.xc(48,"dfsds"),o.Qb(),o.Rb(49,"p"),o.xc(50,"dfsds"),o.Qb(),o.Qb(),o.Mb(51,"hr"),o.Mb(52,"div",1),o.Mb(53,"app-project"),o.Mb(54,"app-contact"))},directives:[s,u,c,cd],styles:[""]}),t})();const fd=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Fb({type:t,selectors:[["app-portfolio"]],decls:2,vars:0,template:function(t,e){1&t&&(o.Rb(0,"div"),o.Mb(1,"router-outlet"),o.Qb())},directives:[i.c],styles:[""]}),t})(),children:[{path:"home",component:hd}]}];let ld=(()=>{class t{}return t.\u0275mod=o.Jb({type:t}),t.\u0275inj=o.Ib({factory:function(e){return new(e||t)},imports:[[i.b.forChild(fd)],i.b]}),t})();var pd=n("e/fS");let dd=(()=>{class t{}return t.\u0275mod=o.Jb({type:t}),t.\u0275inj=o.Ib({factory:function(e){return new(e||t)},imports:[[r.b,ld,pd.a]]}),t})()}}]);